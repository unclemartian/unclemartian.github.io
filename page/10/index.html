<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo Blog of Uncle Martian">
<meta property="og:url" content="http://yoursite.com/page/10/index.html">
<meta property="og:site_name" content="Hexo Blog of Uncle Martian">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Uncle Martian">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hexo Blog of Uncle Martian</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo Blog of Uncle Martian</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">a crypto journey</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/06/06/Tech/http-learning-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/06/06/Tech/http-learning-1/" class="post-title-link" itemprop="url">【Tech】 HTTP learning notes (1/3) all about http</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-06-06 00:00:00" itemprop="dateCreated datePublished" datetime="2015-06-06T00:00:00+00:00">2015-06-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="图解-http-读书笔记"><a href="#图解-http-读书笔记" class="headerlink" title="_图解 http_读书笔记"></a>_图解 http_读书笔记</h1><p><em><a target="_blank" rel="noopener" href="http://www.amazon.co.jp/HTTP%E3%81%AE%E6%95%99%E7%A7%91%E6%9B%B8-%E4%B8%8A%E9%87%8E-%E5%AE%A3/dp/479812625X">HTTP の教科書</a></em> by Tricorder CEO 上野宣</p>
<h1 id="Foundamentals"><a href="#Foundamentals" class="headerlink" title="Foundamentals"></a>Foundamentals</h1><h2 id="1989-birth-of-HTTP"><a href="#1989-birth-of-HTTP" class="headerlink" title="1989, birth of HTTP"></a>1989, birth of HTTP</h2><p><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#History">Tim Berners-Lee first proposed the “WorldWideWeb” project in 1989</a> — now known as the World Wide Web. The first version of the protocol had only one method, namely GET, which would request a page from a server.</p>
<p>1991, HTTP/0.9 现在的HTTP其实含有HTTP1.0之前版本的意思,因此被称为HTTP/0.9。</p>
<p>1996 HTTP/1.0, rfc1945. widely used today. </p>
<p>1997 HTTP/1.1, rfc2068, and later released updates with rfc2616. </p>
<p>today, HTTP/2.0 is under dev.</p>
<p>1994 - 2000 is the time for Browser War between IE and Netscape Navigator. </p>
<p>2004 - now, the war started again as Mozilla released Firefox. </p>
<h2 id="HTTP-versions"><a href="#HTTP-versions" class="headerlink" title="HTTP versions"></a>HTTP versions</h2><p>HTTP/1.0 defined GET, POST and HEAD methods and HTTP/1.1 added 5 new methods: OPTIONS, PUT, DELETE, TRACE and CONNECT. </p>
<p>In HTTP/0.9 and 1.0, the connection is closed after a single request/response pair. In HTTP/1.1 a keep-alive-mechanism was introduced, where a connection could be reused for more than one request. (client does not need to re-negotiate the TCP 3-Way-Handshake connection after the first request)</p>
<blockquote>
<p>当年 HTTP 协议的出现主要是为了解决文本传输的难题。由于协议本 身非常简单,于是在此基础上设想了很多应用方法并投入了实际使用。现 在 HTTP 协议已经超出了 Web 这个框架的局限,被运用到了各种场景里。</p>
</blockquote>
<h1 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h1><ol>
<li>application layer</li>
<li>transport (tcp/udp) layer</li>
<li>internet (ip) layer</li>
<li>data link (ethernet/fddi) layer</li>
</ol>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>应用层决定了向用户提供应用服务时通信的活动。</p>
<p>TCP/IP 协议族内预存了各类通用的应用服务。比如,FTP(File Transfer Protocol,文件传输协议)和 DNS(Domain Name System, 域名系统)服务就是其中两类。</p>
<p>HTTP 协议也处于该层。</p>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>传输层提供处于网络连接中的两台计算机之间的数据传输。</p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><p>网络层用来处理在网络上流动的数据包。</p>
<p>数据包是网络传输的最小数据单位。该层规定了通过怎样的路径(所谓的传输路线)到达对 方计算机,并把数据包传送给对方。 </p>
<p>与对方计算机之间通过多台计算机或网络设备进行传输时,网络层所起的作用就是在众多的选项内选择一条传输路线。</p>
<h2 id="链路层-又名数据链路层"><a href="#链路层-又名数据链路层" class="headerlink" title="链路层(又名数据链路层)"></a>链路层(又名数据链路层)</h2><p>用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱 动、NIC(Network Interface Card,网络适配器,即网卡),及光纤等</p>
<p>{&lt;1&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2012.33.28%20AM.png" alt=""></p>
<h2 id="more-on-IP"><a href="#more-on-IP" class="headerlink" title="more on IP"></a>more on IP</h2><p>IP 协议的作用是把各种数据包传送给对方。</p>
<p>IP 地址指明了节点被分配到的地址,MAC 地址是指网卡所属的固 定地址。IP 地址可以和 MAC 地址进行配对。IP 地址可变换,但 MAC 地址基本上不会更改。</p>
<h3 id="IP-间的通信依赖-MAC-地址。"><a href="#IP-间的通信依赖-MAC-地址。" class="headerlink" title="IP 间的通信依赖 MAC 地址。"></a>IP 间的通信依赖 MAC 地址。</h3><p>经过多台计算机和网络设备中转才 能连接到对方。而在进行中转时,会利用下一站中转设备的 MAC 地址 来搜索下一个中转目标。</p>
<p>这时,会采用 ARP 协议(Address Resolution Protocol)。ARP 是一种用以解析地址的协议,根据通信方的 IP 地址就可以反查出对应的 MAC 地址。</p>
<h3 id="routing"><a href="#routing" class="headerlink" title="routing"></a>routing</h3><p>在到达通信目标前的中转过程中,那些计算机和路由器等网络设备 只能获悉很粗略的传输路线。<br>这种机制称为路由选择(routing),有点像快递公司的送货过程。</p>
<h2 id="more-on-TCP-and-DNS"><a href="#more-on-TCP-and-DNS" class="headerlink" title="more on TCP and DNS"></a>more on TCP and DNS</h2><p>为了准确无误地将数据送达目标处,TCP 协议采用了三次握手 (three-way handshaking)策略。</p>
<p>用 TCP 协议把数据包送出去后,TCP 不会对传送后的情况置之不理,它一定会向对方确认是否成功送达。握 手过程中使用了 TCP 的标志(flag)——SYN(synchronize)和 ACK( acknowledgement)。</p>
<p>DNS(Domain Name System)服务是和 HTTP 协议一样位于应用层</p>
<h2 id="dry-run"><a href="#dry-run" class="headerlink" title="dry run"></a>dry run</h2><p>{&lt;2&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2012.53.44%20AM.png" alt=""></p>
<h1 id="the-basics-of-HTTP-protocol"><a href="#the-basics-of-HTTP-protocol" class="headerlink" title="the basics of HTTP protocol"></a>the basics of HTTP protocol</h1><p>在两台计算机之间使用 HTTP 协议通信时,在一条通信线路上必定 有一端是客户端,另一端则是服务器端。</p>
<p>有时候,按实际情况,两台计算机角色可能会互换。但就仅从一条通信路线来说,服务器端和客户端的角色是 确定的。</p>
<h2 id="request"><a href="#request" class="headerlink" title="request"></a>request</h2><p>{&lt;3&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2012.58.05%20AM.png" alt=""></p>
<h2 id="response"><a href="#response" class="headerlink" title="response"></a>response</h2><p>{&lt;4&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2012.58.11%20AM.png" alt=""></p>
<h2 id="stateless"><a href="#stateless" class="headerlink" title="stateless"></a>stateless</h2><p>HTTP 是一种不保存状态,即无状态(stateless)协议。</p>
<p>HTTP/1.1 虽然是无状态协议,但为了实现期望的保持状态功能, 于是引入了 Cookie 技术。有了 Cookie 再用 HTTP 协议通信,就可以管 理状态了。</p>
<h2 id="请求-URI-定位资源"><a href="#请求-URI-定位资源" class="headerlink" title="请求 URI 定位资源"></a>请求 URI 定位资源</h2><p>In request header, we specify either the full path or the relative path. </p>
<p>{&lt;5&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%201.00.49%20AM.png" alt=""></p>
<h2 id="other-than-GET-method"><a href="#other-than-GET-method" class="headerlink" title="other than GET method"></a>other than GET method</h2><p>POST: 功能与 GET 很相似,但 POST 的主要目的并不是获取响应的主体内容。</p>
<p>PUT: 传输文件</p>
<p>HEAD: 和 GET 方法一样,只是不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等。</p>
<p>DELETE: HTTP/1.1 的 DELETE 方法本身和 PUT 方法一样不带验证机 制,所以一般的 Web 网站也不使用 DELETE 方法。当配合 Web 应用程 序的验证机制,或遵守 REST 标准时还是有可能会开放使用的。</p>
<p>OPTIONS: 查询针对请求 URI 指定的资源支持的方法。</p>
<p>and TRACE, CONNECT.</p>
<p>{&lt;6&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%201.07.22%20AM.png" alt=""></p>
<h2 id="HTTP-persistent-connection"><a href="#HTTP-persistent-connection" class="headerlink" title="HTTP persistent connection"></a>HTTP persistent connection</h2><p>{&lt;7&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%202.53.44%20AM.png" alt=""></p>
<p>随着 HTTP 的普及,文档中包含大量图片的 情况多了起来。每次的请求都会造成无谓的 TCP 连接建立和断开, 增加通信量的开销。</p>
<p>HTTP/1.1 和一部分的 HTTP/1.0 想出 了持久连接(HTTP Persistent Connections,也称为 HTTP keep-alive 或 HTTP connection reuse)的方法。持久连接的特点是,只要任意一端没 有明确提出断开连接,则保持 TCP 连接状态。</p>
<p>{&lt;8&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%202.55.45%20AM.png" alt=""></p>
<p>Under HTTP 1.0, there is <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/HTTP_persistent_connection#HTTP_1.0">no official specification for how keepalive operates</a>. It was, in essence, added to an existing protocol. If the client supports keep-alive, it adds an additional header to the request:</p>
<pre><code>Connection: Keep-Alive</code></pre><p>In HTTP 1.1, all connections are considered persistent unless declared otherwise.</p>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookie 会根据从服务器端发送的响应报文内的一个叫做 Set-Cookie 的首部字段信息,通知客户端保存 Cookie。</p>
<p>当下次客户端再往该服务器 发送请求时,客户端会自动在请求报文中加入 Cookie 值后发送出去。</p>
<p>{&lt;9&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%203.25.58%20AM.png" alt=""></p>
<h1 id="Inside-a-HTTP-message"><a href="#Inside-a-HTTP-message" class="headerlink" title="Inside a HTTP message"></a>Inside a HTTP message</h1><p>HTTP 报文大致可分为报文首部和报文主体两块。两者由 <strong>最初出现的空行(CR+LF)来划分</strong>。</p>
<p>通常,并不一定要有报文主体。</p>
<p>{&lt;10&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%203.29.47%20AM.png" alt=""></p>
<h2 id="message-vs-entity"><a href="#message-vs-entity" class="headerlink" title="message vs. entity"></a>message vs. entity</h2><p>HTTP 报文的主体用于传输请求或响应的实体主体。</p>
<pre><code>HTTP-message   = Request | Response     ; HTTP/1.1 messages</code></pre><p>A HTTP-message has &gt;=0 message-headers and may have ONE message-body:</p>
<pre><code>generic-message = start-line
                  *(message-header CRLF)
                   CRLF
                   [ message-body ]</code></pre><p>通常,报文主体等于实体主体。只有当传输中进行编码操作时,实体主体的内容发生变化,才导致它和报文主体产生差异。</p>
<p>So not every HTTP-message has a message-body. But if it has a message-body, then that’s also the entity-body:</p>
<pre><code>message-body = entity-body
             | &lt;entity-body encoded as per Transfer-Encoding&gt;</code></pre><h2 id="HTTP-compression"><a href="#HTTP-compression" class="headerlink" title="HTTP compression"></a>HTTP compression</h2><p>HTTP data is compressed before it is sent from the server: </p>
<ol>
<li>compliant browsers will announce what methods are supported</li>
<li>browsers that do not support compliant compression method will download uncompressed data. </li>
<li>The most common compression schemes include gzip and Deflate</li>
</ol>
<h2 id="Chunked-transfer-encoding"><a href="#Chunked-transfer-encoding" class="headerlink" title="Chunked transfer encoding"></a>Chunked transfer encoding</h2><p>Only in version 1.1 of HTTP.</p>
<p>在传输大容量数据时,通过把数据分割 成多块,能够让浏览器逐步显示页面。</p>
<p>这种把实体主体分块的功能称为分块传输编码(Chunked Transfer Coding)。</p>
<h2 id="multipart"><a href="#multipart" class="headerlink" title="multipart"></a>multipart</h2><p>HTTP 协议中也采纳了多部分对象集合,发送的一份报文 主体内可含有多类型实体。通常是在图片或文本文件等上传时使用。</p>
<p><a target="_blank" rel="noopener" href="http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2">The following example illustrates “multipart/form-data” encoding</a>. Suppose we have the following form:</p>
<pre><code>&lt;FORM action=&quot;http://server.com/cgi/handle&quot;
       enctype=&quot;multipart/form-data&quot;
       method=&quot;post&quot;&gt;
   &lt;P&gt;
   What is your name? &lt;INPUT type=&quot;text&quot; name=&quot;submit-name&quot;&gt;&lt;BR&gt;
   What files are you sending? &lt;INPUT type=&quot;file&quot; name=&quot;files&quot;&gt;&lt;BR&gt;
   &lt;INPUT type=&quot;submit&quot; value=&quot;Send&quot;&gt; &lt;INPUT type=&quot;reset&quot;&gt;
&lt;/FORM&gt;</code></pre><p>If the user enters “Larry” in the text input, and selects the text file “file1.txt”, the user agent might send back the following data:</p>
<pre><code>Content-Type: multipart/form-data; boundary=AaB03x

--AaB03x
Content-Disposition: form-data; name=&quot;submit-name&quot;

Larry
--AaB03x
Content-Disposition: form-data; name=&quot;files&quot;; filename=&quot;file1.txt&quot;
Content-Type: text/plain

... contents of file1.txt ...
--AaB03x--</code></pre><p>使用 boundary 字符串来划分多部分对象集合指明的各类实体。在 boundary 字符串指定的各个实体的起始行之前插入“–”标记</p>
<h2 id="HTTP-Range-Requests"><a href="#HTTP-Range-Requests" class="headerlink" title="HTTP Range Requests"></a>HTTP Range Requests</h2><p>指定范围发送的 请求叫做范围请求(Range Request)。</p>
<p>对一份 10 000 字节大小的资源,如果使用范围请求,可以只请求 5001~10 000 字节内的资源。</p>
<p><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Byte_serving">Clients which request byte-serving might do so</a> in cases in which a large file has been only partially delivered and a limited portion of the file is needed in a particular range. </p>
<p>In the HTTP/1.0 standard, clients were only able to request an entire document. </p>
<h2 id="Content-negotiation"><a href="#Content-negotiation" class="headerlink" title="Content negotiation"></a>Content negotiation</h2><p>当浏览器的默认语言为英语或中文,访问相同 URI 的 Web 页面时, 则会显示对应的英语版或中文版的 Web 页面。</p>
<p>{&lt;11&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2011.30.18%20AM.png" alt=""></p>
<p>Content negotiation makes it possible to serve different versions of a document (or more generally, a resource representation) at the same URI, so that user agents can specify which version fit their capabilities the best. </p>
<h1 id="Status-codes-in-HTTP"><a href="#Status-codes-in-HTTP" class="headerlink" title="Status codes in HTTP"></a>Status codes in HTTP</h1><ol>
<li>1xx Informational</li>
<li>2xx Success</li>
<li>3xx Redirection</li>
<li>4xx Client Error</li>
<li>5xx Server Error</li>
</ol>
<p>Read more at <a target="_blank" rel="noopener" href="http://www.w3.org/Protocols/HTTP/HTRESP.html">w3.org</a></p>
<p>{&lt;12&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%201.36.46%20PM.png" alt=""></p>
<h2 id="HTTP-301"><a href="#HTTP-301" class="headerlink" title="HTTP 301"></a>HTTP 301</h2><p>当 301、302、303 响应状态码返回时,几乎所有的浏览器都会把 POST 改成 GET,并删除请求报文内的主体,之后请求会自动再次发送。</p>
<p>301、302 标准是禁止将 POST 方法改变成 GET 方法的,但实际使用 时大家都会这么做。</p>
<p>Google recommends using a 301 redirect to change the URL of a page as it is shown in search engine results.</p>
<h1 id="web-server"><a href="#web-server" class="headerlink" title="web server"></a>web server</h1><p>HTTP/1.1 规范允许一台 HTTP 服务器搭建多个 Web 站点。</p>
<p>即使物理层面只有一台服务器,但只要使用虚拟主机 (VPS) 的功能,则可 以假想已具有多台服务器。</p>
<p>{&lt;13&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%202.07.04%20PM.png" alt=""></p>
<p>在相同的 IP 地址下,由于虚拟主机可以寄存多个不同主机名和域 名的 Web 网站,因此在发送 HTTP 请求时,必须在 Host 首部内完整指 定主机名或域名的 URI。</p>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p>代理是一种有转发功能的应用程序,它扮演了位于服务器和客户端 “中间人”的角色,接收由客户端发送的请求并转发给服务器,同时也接收服务器返回的响应并转发给客户端。</p>
<p>{&lt;14&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%202.32.34%20PM.png" alt=""></p>
<p>there’re mainly 2 kinds of proxy:</p>
<ol>
<li><p>缓存代理</p>
<p> 代理转发响应时,缓存代理(Caching Proxy)会预先将资源的副本 (缓存)保存在代理服务器上。</p>
<p> 当代理再次接收到对相同资源的请求时,就将之前缓存的资源作为响应返回。</p>
</li>
<li><p>透明代理</p>
<p> 转发请求或响应时,不对报文做任何加工的代理类型被称为透明代 理(Transparent Proxy)。反之,对报文内容进行加工的代理被称为非透明代理。</p>
</li>
</ol>
<h2 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h2><p>网关是转发其他服务器通信数据的服务器,接收从客户端发送来的 请求时,它就像自己拥有资源的源服务器一样对请求进行处理。</p>
<p>有时客户端可能都不会察觉,自己的通信目标是一个网关。</p>
<p>{&lt;15&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%202.38.42%20PM.png" alt=""></p>
<p>网关的工作机制和代理十分相似。而网关能使通信线路上的服务器 提供非 HTTP 协议服务。(eg. 连接数据库,使用 SQL 语句查询数据。另外,在 Web 购物网站上进行信用卡结算时,网关可以和信用卡结算系统联动。)</p>
<h2 id="隧道"><a href="#隧道" class="headerlink" title="隧道"></a>隧道</h2><p>HTTP tunneling is a technique by which communications performed using various network protocols are encapsulated using the HTTP protocol. </p>
<p>{&lt;16&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%202.47.52%20PM.png" alt=""></p>
<p>隧道可按要求建立起一条与其他服务器的通信线路,届时使用 SSL等加密手段进行通信。隧道的目的是确保客户端能与服务器进行安全的 通信。</p>
<p>隧道本身不会去解析 HTTP 请求。隧道会在通信双方断开连接时结束。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/06/06/Tech/http-learning-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/06/06/Tech/http-learning-2/" class="post-title-link" itemprop="url">【Tech】 HTTP learning notes (2/3) security</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-06-06 00:00:00" itemprop="dateCreated datePublished" datetime="2015-06-06T00:00:00+00:00">2015-06-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="图解-http-读书笔记"><a href="#图解-http-读书笔记" class="headerlink" title="_图解 http_读书笔记"></a>_图解 http_读书笔记</h1><p><em><a target="_blank" rel="noopener" href="http://www.amazon.co.jp/HTTP%E3%81%AE%E6%95%99%E7%A7%91%E6%9B%B8-%E4%B8%8A%E9%87%8E-%E5%AE%A3/dp/479812625X">HTTP の教科書</a></em> by Tricorder CEO 上野宣</p>
<h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><h2 id="Disadvantages-of-HTTP"><a href="#Disadvantages-of-HTTP" class="headerlink" title="Disadvantages of HTTP:"></a>Disadvantages of HTTP:</h2><ol>
<li>通信使用明文(不加密),内容可能会被窃听</li>
<li>不验证通信方的身份,因此有可能遭遇伪装</li>
<li>无法证明报文的完整性,所以有可能已遭篡改</li>
</ol>
<p>按 TCP/IP 协议族的工作机制,通信内容在所有的通信线路上都有可能遭到窥视。</p>
<p>窃听相同段上的通信并非难事。只需要收集在互联网上流动的数据包(帧)就行了。对于收集来的数据包的解析工作,可交给那些抓包(Packet Capture)或嗅探器(Sniffer)工具。</p>
<h2 id="1-内容的加密"><a href="#1-内容的加密" class="headerlink" title="1. 内容的加密"></a>1. 内容的加密</h2><p>把 HTTP 报 文里所含的内容进行加密处理。</p>
<p>由于该方式不同于 SSL 或 TLS 将整个通信线路加密处理,所以内容仍 有被篡改的风险。比如,从某个 Web 网站上下载内容,是无法确定客户端下载的文件和服务器上存放的文件是否前后一致的。文件内容在传输途中可能已 经被篡改为其他的内容。</p>
<p>{&lt;1&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%204.56.22%20PM.png" alt=""></p>
<p>像这样,请求或响应在传输途中,遭攻击者拦截并篡改内容的攻击 称为中间人攻击(Man-in-the-Middle attack,MITM)。</p>
<p>使用 HTTP 协议确定报文完整性的方法,常用MD5 和 SHA-1 等散列值校验的方法,以及用来确认文件的数字签名方法。但事实上并不便捷、可靠。</p>
<p>用户需要手动下载验证文件。浏览器无法自动帮用户检查。</p>
<p>而且PGP 和 MD5 本身被改写的话,用户是没有办法意识到的。</p>
<h2 id="2-通信的加密-TLS-SSL"><a href="#2-通信的加密-TLS-SSL" class="headerlink" title="2. 通信的加密: TLS/SSL"></a>2. 通信的加密: TLS/SSL</h2><p>HTTP 协议中没有加密机制,但可以通 过和 SSL(Secure Socket Layer,安全套接层)或 TLS(Transport Layer Security,安全层传输协议)的组合使用,加密 HTTP 的通信内容。</p>
<p>Transport Layer Security (TLS) and its predecessor, Secure Sockets Layer (SSL), are cryptographic protocols designed to provide communications security over a computer network. </p>
<p>当使用 SSL 时,它的处理速度会 变慢。一是指通信慢，因为大量的SSL 通信。另一是指由于大量消耗 CPU 及内存等资源,导致处理速度变慢。和使用 HTTP 相比,网络负载可能会变慢 2 到 100 倍。</p>
<p>针对速度变慢这一问题,并没有根本性的解决方案,我们会使用 SSL 加速器这种(专用服务器)硬件来改善该问题。该硬件为 SSL 通信 专用硬件,相对软件来讲,能够提高数倍 SSL 的计算速度。</p>
<h3 id="Why-not-HTTPS"><a href="#Why-not-HTTPS" class="headerlink" title="Why not HTTPS?"></a>Why not HTTPS?</h3><p>每当那些访问量较多的 Web 网站在进行加密处理时,它们所承 担着的负载不容小觑。并且，使用的证书必须向认证机 构(CA)购买。</p>
<h2 id="HTTP-加密-认证-完整性保护-HTTPS"><a href="#HTTP-加密-认证-完整性保护-HTTPS" class="headerlink" title="HTTP+ 加密 + 认证 + 完整性保护 =HTTPS"></a>HTTP+ 加密 + 认证 + 完整性保护 =HTTPS</h2><p>HTTPS 并非是应用层的一种新协议。</p>
<ol>
<li>HTTP: 直接和 TCP 通信。</li>
<li>HTTPS: 先和 SSL 通信,再由 SSL 和 TCP 通信了。</li>
</ol>
<p>简言之,所谓 HTTPS,其实就是 身披 SSL 协议这层外壳的 HTTP。(TLS and SSL encrypt data in the application layer)</p>
<p>SSL 是独立于 HTTP 的协议,所以不光是 HTTP 协议,其他运行在 应用层的 SMTP 和 Telnet 等协议均可配合 SSL 协议使用。可以说 SSL 是当今世界上应用最为广泛的网络安全技术。</p>
<h2 id="密钥"><a href="#密钥" class="headerlink" title="密钥"></a>密钥</h2><ol>
<li>common key crypto system</li>
<li>private/public key</li>
</ol>
<p>要想根据密文和公开密钥,恢复到信息原文是异常困难的, 因为解密过程就是在对离散对数进行求值,这并非轻而易举就能办到。</p>
<h3 id="HTTPS-采用混合加密机制"><a href="#HTTPS-采用混合加密机制" class="headerlink" title="HTTPS 采用混合加密机制"></a>HTTPS 采用混合加密机制</h3><p>HTTPS 采用共享密钥加密和公开密钥加密两者并用的混合加密机制。<br>因为公开密钥加密处理速度慢。</p>
<p>在交换密钥环节使用公开密钥加密方式,之后的建立通信交换报文阶段 则使用共享密钥加密方式。</p>
<h2 id="how-HTTPS-works"><a href="#how-HTTPS-works" class="headerlink" title="how HTTPS works"></a>how HTTPS works</h2><ol>
<li><p>数字证书认证机构(CA,Certificate Authority) 颁发公开密钥证书。</p>
<p> website 向数字证书认证机构提出公开密钥的申请。CA 在判明提出申请者的身份之后,会对已申请的 public key 做数字签名,然 后分配这个已签名的公开密钥, 并将该公开密钥放入公钥证书后绑定在 一起。</p>
</li>
<li><p>client side request this certificate</p>
<p> website 会将这份由数字证书认证机构颁发的公钥证书发送给客户 端,以进行公开密钥加密方式通信。公钥证书也可叫做数字证书或直接 称为证书。</p>
<p> 接到证书的 client browser 可使用数字证书认证机构的公开密钥,对那张证 书上的数字签名进行验证</p>
</li>
<li><p>How does client know CA’s public key, then?</p>
<p> 多数浏览器开发商发布版 本时,会事先在内部植入常用认证机关的公开密钥。</p>
</li>
</ol>
<p>{&lt;2&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%209.25.16%20PM.png" alt=""></p>
<blockquote>
<p>2011 年 7 月,荷兰的一家名叫 DigiNotar 的 认证机构曾遭黑客不法入侵,颁布了 google.com 和 twitter.com 等网站 的伪造证书事件。这一事件从根本上撼动了 SSL 的可信度。</p>
</blockquote>
<p>{&lt;3&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%209.28.47%20PM.png" alt=""></p>
<h2 id="SSL-客户端证书"><a href="#SSL-客户端证书" class="headerlink" title="SSL 客户端证书"></a>SSL 客户端证书</h2><p>HTTPS 中还可以使用客户端证书。以客户端证书进行客户端认证, 证明服务器正在通信的对方始终是预料之内的客户端, 银行的网上银行就采用了客户端证书。</p>
<p>but it’s not widely used because:</p>
<ol>
<li>not everyone likes (or knows how) to install a certificate.</li>
<li>certificate costs</li>
<li>if you hack into root access, the certificate will be available to you</li>
</ol>
<p>现状是,安全性极高的认证机构可颁发客户端证书但仅用于特殊用 途的业务。</p>
<h2 id="自签名证书"><a href="#自签名证书" class="headerlink" title="自签名证书"></a>自签名证书</h2><p>使用 OpenSSL 这套开源程序,每个人都可以构建一套属于自 己的认证机构,从而自己给自己颁发服务器证书。</p>
<p>浏览器访问该服务器时,会显示“无法确认连接安全性”</p>
<h1 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h1><p>HTTP/1.1 使用的认证方式:</p>
<ol>
<li>BASIC 认证(基本认证)</li>
<li>DIGEST 认证(摘要认证)</li>
<li>SSL 客户端认证</li>
<li>FormBase 认证(基于表单认证)</li>
</ol>
<h2 id="BASIC-认证"><a href="#BASIC-认证" class="headerlink" title="BASIC 认证"></a>BASIC 认证</h2><p>since HTTP/1.0</p>
<p>simplest technique for enforcing access controls to web resources because it doesn’t require cookies, session identifier and login pages. 现在仍有一部分的网站会使用这种认证方式。</p>
<p>{&lt;4&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%209.53.21%20PM.png" alt=""></p>
<p>The BA mechanism provides no confidentiality protection for the transmitted credentials. They are merely encoded with Base64 in transit, but not encrypted or hashed in any way. </p>
<h3 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h3><p>Convert 8-bit-padded (256-based) ASCII characters into Base64 scheme. Which is to say, convert 3 ASCII letters (24 bits) will be encoded into 4 Base64 letter (4 * 6 = 26). ‘Man’ converts to ‘TWFu’. </p>
<p>{&lt;5&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2010.02.13%20PM.png" alt=""></p>
<p>在 HTTP 等非加密通信的线路上进行 BASIC 认证的过程中, 如果被人窃听,被盗的可能性极高。另外，browser无<br>法实现认证注销操作。</p>
<p>Basic Authentication is, therefore, typically used over HTTPS.</p>
<h2 id="DIGEST-认证"><a href="#DIGEST-认证" class="headerlink" title="DIGEST 认证"></a>DIGEST 认证</h2><p>since HTTP/1.1</p>
<p>{&lt;6&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-06%20at%2010.23.21%20PM.png" alt=""></p>
<ol>
<li><p>when requested, server 会随着状态码 401 Authorization Required,返回带 WWW-Authenticate 首部字段, which 包含 realm 和 nonce 这两个字段的信息。(nonce 是一种任意随机字符串)。</p>
</li>
<li><p>client will return DIGEST 认证必须的首部字段 Authorization 信息, which 包含 username、realm、nonce、uri 和response 的字段信息。其中,realm 和 nonce 就是之前从服务器接收到的响应中的字段。<strong>response 也可叫做 Request-Digest,存放经过 MD5 运算后 的密码字符串,形成响应码</strong>。</p>
</li>
<li><p>server 接收到包含首部字段 Authorization 请求, 确认 认证信息，并返回包含 Request-URI 资源的响应。</p>
</li>
</ol>
<p>Technically, digest authentication is an application of MD5 cryptographic hashing with usage of nonce values to prevent replay attacks. It uses the HTTP protocol. </p>
<p><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Digest_access_authentication#Disadvantages">Digest access authentication is vulnerable to</a> a man-in-the-middle (MitM) attack.</p>
<h2 id="SSL-客户端证书-1"><a href="#SSL-客户端证书-1" class="headerlink" title="SSL 客户端证书"></a>SSL 客户端证书</h2><ol>
<li>事先将客户端证书分发给客户 端,且客户端必须安装此证书。</li>
<li>when requested, server 发送 Certificate Request 报文,要求客户端提供客户端证书。</li>
<li>client send <strong>Client Certificate</strong>.</li>
<li>server validate and <strong>retrieve public key of client</strong>, then they start HTTPS.</li>
</ol>
<h2 id="Form-based-认证"><a href="#Form-based-认证" class="headerlink" title="Form-based 认证"></a>Form-based 认证</h2><p>由于使用上的便利性及安全性问题,HTTP 协议标准提供的 BASIC 认证和 DIGEST 认证几乎不怎么使用。另外,SSL 客户端认证虽然具有 高度的安全等级,但因为导入及维持费用等问题,还尚未普及。</p>
<p>反观，SSH 和 FTP, 服务器与客户端之间的认证是合乎标准规范的, 并且满足了基本的安全需求,因此 widely 使用。</p>
<p>对于 Web 网站的认证功能,能够满足 其安全使用级别的标准规范并不存在,所以只好使用由 Web 应用程序 各自实现基于表单的认证方式。</p>
<p>Form-based 认证的标准规范尚未有定论,<strong>一般会使用 Cookie 来管理 Session(会话)</strong>。</p>
<h2 id="Session-管理及-Cookie-应用"><a href="#Session-管理及-Cookie-应用" class="headerlink" title="Session 管理及 Cookie 应用"></a>Session 管理及 Cookie 应用</h2><p>我们使用 Cookie 来管理 Session,以弥补 HTTP 协议中不存在的状态管理功能。</p>
<p>Usign session id in Cookie is pretty easy process:</p>
<p>{&lt;7&gt;}<img src="https://dl.dropboxusercontent.com/u/23764314/ghost_immortalfish/Screen%20Shot%202015-06-07%20at%2010.01.47%20AM.png" alt=""></p>
<ol>
<li><p>客户端把用户 ID 和密码等登录信息放入报文的实体部分, 通常是以 POST 方法把请求发送给服务器。而这时<strong>会使用 HTTPS 通信来进行</strong> HTML 表单画面的显示和用户输入 数据的发送。</p>
</li>
<li><p>服务器会发放用以识别用户的 Session ID (首部字段 Set-Cookie 内写入 Session ID 如 PHPSESSID=028a8c)。然后把用户的认 证状态与 Session ID 绑定后记录在服务器端(maybe a database, develop end will manage)。</p>
</li>
<li><p>客户端将 Cookie 保存在本地。浏览器下次 会自动发送 Cookie,所以 Session ID 也随之发送到服务器。</p>
</li>
</ol>
<p>You must not lose your session id, otherwise someone can act like they were you. </p>
<p>Web server will manage <strong>expiration of sessions</strong>. </p>
<p>To avoid 跨站脚本攻击(XSS), set HTTPonly as TRUE, for session cookie. </p>
<p>另外</p>
<blockquote>
<p>一种安全的保存方法是,先利用给密码加盐(salt)的方式<br>增加额外信息,再使用散列(hash)函数计算出散列值后保存。</p>
<p>salt 其实就是由服务器随机生成的一个字符串,但是要保证长度足够长。把它和密码字符串相连接(前后都可以)生成散 列值。</p>
<p>当两个用户使用了同一个密码时,由于随机生成的 salt 值不同,对应 的散列值也将是不同的。这样一来,很大程度上减少了密码特征, 攻击者也 就很难利用自己手中的密码特征库进行破解。</p>
</blockquote>
<h2 id="HTTPonly"><a href="#HTTPonly" class="headerlink" title="HTTPonly"></a>HTTPonly</h2><p>HttpOnly cookies can only be used when transmitted via HTTP (or HTTPS). They are not accessible through non-HTTP APIs such as JavaScript. </p>
<p><a target="_blank" rel="noopener" href="http://cookiecontroller.com/internet-cookies/secure-cookies/">This limits the potential damage many cross site script attacks can cause</a> – specifically, the attacks that target cookie data.</p>
<h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><h3 id="Can-we-put-session-id-in-URL-instead-of-in-cookie"><a href="#Can-we-put-session-id-in-URL-instead-of-in-cookie" class="headerlink" title="Can we put session id in URL instead of in cookie?"></a>Can we put session id in URL instead of in cookie?</h3><p>Yes, but definitely not a good practise (even if we send these messages thru HTTPS). <a target="_blank" rel="noopener" href="http://security.stackexchange.com/questions/14093/why-is-passing-the-session-id-as-url-parameter-insecure">Here is a great post discussing about it</a>:</p>
<ol>
<li><p>if you send over a link to someone, he might use your session id and have full access to your account.</p>
</li>
<li><p>possibility of <strong>session fixation attacks</strong>, which means hackers send a prepared URL with a known session id to the user, and entice the user to log in. Once user does, hacker would have a session with priviledges. It’s not possible with cookies. </p>
</li>
<li><p>putting anything in the URL makes it more likely that it will leak. This can be through a Referer header in a linked resource, from access to the endpoint with browser history records, from brute force history sniffing, inappropriately protected web logs, and so on. </p>
</li>
</ol>
<p>A little history.</p>
<blockquote>
<p>the reason (session-in-URL) was typically done in the past was to support browsers without cookies enabled. This is less and less a concern these days, and the usability problems of not being to share links, in addition to the session fixation attacks, mean that session-in-URL is usually avoided today.</p>
</blockquote>
<h3 id="Can-we-sent-session-id-via-non-encrypted-HTTP"><a href="#Can-we-sent-session-id-via-non-encrypted-HTTP" class="headerlink" title="Can we sent session id via non-encrypted HTTP?"></a>Can we sent session id via non-encrypted HTTP?</h3><p><a target="_blank" rel="noopener" href="http://security.stackexchange.com/questions/81998/should-a-session-id-ever-be-sent-over-an-unencrypted-connection">For Google, the SSIDcookie is marked with the Secure flag</a>. This means that it won’t be sent by the browser over a plain HTTP connection.</p>
<blockquote>
<p>[Google] store the important stuff (for example, HSID, NID and SSID) as HTTPonly</p>
</blockquote>
<p>However, <strong>(HTTP transfer) may be acceptable for Session IDs that do not allow access to sensitive information</strong>. For example, you may set a cookie so you can let a user add items to their basket. When they proceed to checkout, the insecure session is transferred to secure session over HTTPS. An attacker can only intercept the insecure session and possibly add or change basket items, but once transferred to HTTPS, user can review the basket before placing order. Additionally, all personal details are considered anonymous until the HTTPS checkout is reached.</p>
<p>Google use non secure and non-http only cookies for items in a similar way.</p>
<p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/709085/secure-cookies-and-mixed-https-http-site-usage">A suggestion is</a>:</p>
<blockquote>
<p>you should never trust any content sent over a non-secured connection. privacy is seen as more important than ever, even for actions that aren’t critical to the authentication, such as writing comments, uploading photos, and more.</p>
</blockquote>
<blockquote>
<p>Google announced that HTTPS-only sites will benefit in search engine rankings.</p>
</blockquote>
<blockquote>
<p>So… make the whole site use HTTPS. A few years back this might not have been feasible mainly because of CDNs not providing HTTPS support. However, today it’s mainly a question of balancing development and operational costs.</p>
</blockquote>
<h3 id="how-to-manage-session-if-client-disables-cookie"><a href="#how-to-manage-session-if-client-disables-cookie" class="headerlink" title="how to manage session if client disables cookie?"></a>how to manage session if client disables cookie?</h3><p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/1795998/manage-session-when-broswer-has-disable-cookies">Two way</a>. First of which is more standard, that is to <strong>pass session id thru URLs</strong>. This requires developer to append session id to EVERY url. eg. </p>
<pre><code>/path/to/page</code></pre><p>becomes</p>
<pre><code>/path/to/page?sessionid=ASDFG-ASDFG-ASDFG-ASDFG-ASDFG</code></pre><p>Second way, if to use info in the HTTP header as identifier of the user, i.e: </p>
<blockquote>
<p>By combining the Http UserAgent, RemoteIp and RemoteXfip you can get close to uniquely identifying a user, but there is no guarantees that this key is 100% unique.</p>
</blockquote>
<h2 id="attacks"><a href="#attacks" class="headerlink" title="attacks"></a>attacks</h2><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><p>Cross-site scripting (XSS) is a type of computer security vulnerability typically found in Web applications. XSS enables attackers to inject client-side script into Web pages viewed by other users. </p>
<h3 id="Man-in-the-middle-attack"><a href="#Man-in-the-middle-attack" class="headerlink" title="Man-in-the-middle attack"></a>Man-in-the-middle attack</h3><p>Man-in-the-middle attack (MitM) is an attack where the attacker secretly relays and possibly alters the communication between two parties who believe they are directly communicating with each other. </p>
<h3 id="Session-fixation"><a href="#Session-fixation" class="headerlink" title="Session fixation"></a>Session fixation</h3><p>Session fixation attacks attempt to exploit the vulnerability of a system which allows one person to fixate (set) another person’s session identifier (SID). </p>
<p>Most session fixation attacks are web based, and most rely on session identifiers being accepted from URLs (query string) or POST data.</p>
<p>example</p>
<blockquote>
<p>Mallory visits <a target="_blank" rel="noopener" href="http://vulnerable.example.com/">http://vulnerable.example.com/</a> and checks which SID is returned. For example, the server may respond: Set-Cookie: SID=0D6441FEA4496C2.</p>
<p>Mallory is now able to send Alice an e-mail: “Check out this new cool feature on our bank, <a target="_blank" rel="noopener" href="http://vulnerable.example.com/?SID=0D6441FEA4496C2.&quot;">http://vulnerable.example.com/?SID=0D6441FEA4496C2.&quot;</a></p>
<p>Alice logs on, with fixated session identifier SID=0D6441FEA4496C2.</p>
<p>Mallory visits <a target="_blank" rel="noopener" href="http://vulnerable.example.com/?SID=0D6441FEA4496C2">http://vulnerable.example.com/?SID=0D6441FEA4496C2</a> and now has unlimited access to Alice’s account.</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/31/Tech/php-learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/05/31/Tech/php-learning/" class="post-title-link" itemprop="url">【Tech】 PHP learning notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-05-31 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-31T00:00:00+00:00">2015-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="PHP-language"><a href="#PHP-language" class="headerlink" title="PHP language"></a>PHP language</h1><h2 id="web-server-must-have-a-php-server"><a href="#web-server-must-have-a-php-server" class="headerlink" title="web server must have a php server"></a>web server must have a php server</h2><p>web server: Apache, IIS, Tomcat, JBoss, WebLogic…</p>
<p>app server: Jsp, PHP, Asp…</p>
<p>we also need database, but does need to be at same machine as web/app server.</p>
<h2 id="A-Comparison"><a href="#A-Comparison" class="headerlink" title="A Comparison"></a>A Comparison</h2><p>Linux   +  Apache  + MySql      +  PHP  =  LAMP      - open sourced, dev speed fastest</p>
<p>Unix    +  Tomcat  + Oracle     +  JSP  =  J2EE      - most expensive</p>
<p>Windows +  IIS     + SQL server +  ASP  =  ASP.net   - virus risks, very not safe</p>
<h2 id="To-get-information-from-POST-form"><a href="#To-get-information-from-POST-form" class="headerlink" title="To get information from POST form"></a>To get information from POST form</h2><pre><code>Hi &lt;?php echo htmlspecialchars($_POST[&apos;name&apos;]); ?&gt;.
You are &lt;?php echo (int)$_POST[&apos;age&apos;]; ?&gt; years old.</code></pre><h2 id="Superglobals"><a href="#Superglobals" class="headerlink" title="Superglobals"></a>Superglobals</h2><p>build-in variables that are always available in all scopes. like:</p>
<ol>
<li><p>$GLOBALS, variables available in global scope</p>
<pre><code>&lt;?php
function test() &#123;
    $foo = &quot;local variable&quot;;
    echo &apos;$foo in global scope: &apos; . $GLOBALS[&quot;foo&quot;] . &quot;\n&quot;;
    echo &apos;$foo in current scope: &apos; . $foo . &quot;\n&quot;;
&#125;

$foo = &quot;Example content&quot;;
test();
?&gt;</code></pre></li>
<li><p>$_SERVER, Server and execution environment information</p>
<pre><code>&lt;?php
echo $_SERVER[&apos;SERVER_NAME&apos;];
?&gt;</code></pre></li>
<li><p>$_GET, GET variables</p>
<pre><code>&lt;?php
echo &apos;Hello &apos; . htmlspecialchars($_GET[&quot;name&quot;]) . &apos;!&apos;;
?&gt;</code></pre></li>
<li><p>$_POST, POST variables</p>
<pre><code>&lt;?php
echo &apos;Hello &apos; . htmlspecialchars($_POST[&quot;name&quot;]) . &apos;!&apos;;
?&gt;</code></pre></li>
<li><p>$_FILES, File Upload variables</p>
</li>
<li><p>$_COOKIE</p>
</li>
<li><p>$_SESSION</p>
</li>
<li><p>$_REQUEST</p>
<p> The PHP $_REQUEST variable contains the contents of both $_GET, $_POST, and $_COOKIE.</p>
</li>
<li><p>$_ENV, Environment variables</p>
<p> These variables are imported into PHP’s global namespace from the environment under which the PHP parser is running. Many are provided by the shell under which PHP is running.</p>
</li>
</ol>
<h2 id="php-code-to-print-a-variable"><a href="#php-code-to-print-a-variable" class="headerlink" title="php code to print a variable:"></a>php code to print a variable:</h2><pre><code>&lt;html&gt;
        &lt;body&gt;
        &lt;?php
        $capital = 67;
        print(&quot;Variable capital is $capital&lt;br&gt;&quot;);
        print(&quot;Variable CaPiTaL is $CaPiTaL&lt;br&gt;&quot;);
        ?&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><h2 id="preg-match"><a href="#preg-match" class="headerlink" title="preg_match"></a>preg_match</h2><p>in PHP does a regex match.</p>
<h2 id="include-and-require"><a href="#include-and-require" class="headerlink" title="include() and require()"></a>include() and require()</h2><p><strong>The include() function</strong> takes all the text in a specified file and copies it into the file that uses the include function.</p>
<p><strong>The require() function</strong> takes all the text in a specified file and copies it into the file that uses the include function. If there is any problem in loading a file then the require() function <strong>generates a fatal error and halt the execution of the script</strong>.</p>
<h2 id="a-list-of-PHP-Predefined-Variables"><a href="#a-list-of-PHP-Predefined-Variables" class="headerlink" title="a list of PHP - Predefined Variables"></a>a list of PHP - Predefined Variables</h2><p>can be found here:</p>
<p><a target="_blank" rel="noopener" href="http://www.tutorialspoint.com/php/php_predefined_variables.htm">http://www.tutorialspoint.com/php/php_predefined_variables.htm</a></p>
<h2 id="define-a-error-handling-function"><a href="#define-a-error-handling-function" class="headerlink" title="define a error-handling function:"></a>define a error-handling function:</h2><pre><code>error_function(error_level, error_messag, error_file,error_line, error_context);</code></pre><h1 id="PHP-OOP"><a href="#PHP-OOP" class="headerlink" title="PHP OOP"></a>PHP OOP</h1><h2 id="PHP-Classes"><a href="#PHP-Classes" class="headerlink" title="PHP Classes"></a>PHP Classes</h2><pre><code>&lt;?php
class  Books&#123;
    /* Member variables */
    var $price;
    var $title;
    /* Member functions */
    function setPrice($par)&#123;
       $this-&gt;price = $par;
    &#125;
    function getPrice()&#123;
       echo $this-&gt;price .&quot;&lt;br/&gt;&quot;;
    &#125;
    function setTitle($par)&#123;
       $this-&gt;title = $par;
    &#125;
    function getTitle()&#123;
       echo $this-&gt;title .&quot; &lt;br/&gt;&quot;;
    &#125;
&#125;
?&gt;</code></pre><h2 id="Creating-Objects"><a href="#Creating-Objects" class="headerlink" title="Creating Objects"></a>Creating Objects</h2><pre><code>$physics = new Books( &quot;Physics for High School&quot;, 10 );
$maths = new Books;
$chemistry = new Books;

$physics-&gt;setTitle( &quot;Physics for High School&quot; );
$maths-&gt;setTitle( &quot;Algebra&quot; );
$chemistry-&gt;setTitle( &quot;Advanced Chemistry&quot; );</code></pre><h2 id="Public-and-Private-members"><a href="#Public-and-Private-members" class="headerlink" title="Public and Private members"></a>Public and Private members</h2><p>Unless you specify otherwise, properties and methods of a class are public.</p>
<p>If you wish to limit the accessibility of the members of a class then you define class members as private or protected.</p>
<pre><code>class MyClass &#123;
   private $car = &quot;skoda&quot;;
   $driver = &quot;SRK&quot;;

   function __construct($par) &#123;
      // Statements here run every time
      // an instance of the class
      // is created.
   &#125;

   function myPublicFunction() &#123;
      return(&quot;I&apos;m visible!&quot;);
   &#125;
   private function myPrivateFunction() &#123;
      return(&quot;I&apos;m  not visible outside!&quot;);
   &#125;
&#125;</code></pre><h2 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h2><pre><code>interface Mail &#123;
   public function sendMail();
&#125;

class Report implements Mail &#123;
   // sendMail() Definition goes here
&#125;</code></pre><h2 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h2><p>constant’s name does not have a leading $, as variable names do.</p>
<pre><code>class MyClass &#123;
   const requiredMargin = 1.7;
   function __construct($incomingValue) &#123;
      // Statements here run every time
      // an instance of the class
      // is created.
   &#125;
&#125;</code></pre><h2 id="Abstract-Classes"><a href="#Abstract-Classes" class="headerlink" title="Abstract Classes"></a>Abstract Classes</h2><p>When inheriting from an abstract class, all methods marked abstract in the parent’s class declaration must be defined by the child.</p>
<p>It is not legal to have abstract function definitions inside a non-abstract class.</p>
<pre><code>abstract class MyAbstractClass &#123;
   abstract function myAbstractFunction() &#123;
   &#125;
&#125;</code></pre><h2 id="Static"><a href="#Static" class="headerlink" title="Static"></a>Static</h2><p>A member declared as static can not be accessed with an instantiated class object (though a static method can).</p>
<pre><code>&lt;?php
class Foo
&#123;
    public static $my_static = &apos;foo&apos;;

    public function staticValue() &#123;
        return self::$my_static;
    &#125;
&#125;
print Foo::$my_static . &quot;\n&quot;;
$foo = new Foo();
print $foo-&gt;staticValue() . &quot;\n&quot;;</code></pre><h2 id="Final-Keyword"><a href="#Final-Keyword" class="headerlink" title="Final Keyword"></a>Final Keyword</h2><p>Prefixing the method definition with final prevents child classes from overriding.</p>
<p>If the class itself is being defined final then it cannot be extended.</p>
<h2 id="Calling-parent-constructors"><a href="#Calling-parent-constructors" class="headerlink" title="Calling parent constructors"></a>Calling parent constructors</h2><p>The constructor of NameSub1 functions by calling its parent constructor explicitly using the :: syntax.</p>
<pre><code>class Name
&#123;
   var $_firstName;
   var $_lastName;
   function Name($first_name, $last_name)
   &#123;
     $this-&gt;_firstName = $first_name;
     $this-&gt;_lastName = $last_name;
   &#125;
   function toString() &#123;
     return($this-&gt;_lastName .&quot;, &quot; .$this-&gt;_firstName);
   &#125;
&#125;
class NameSub1 extends Name
&#123;
   var $_middleInitial;
   function NameSub1($first_name, $middle_initial, $last_name) &#123;
       Name::Name($first_name, $last_name);
       $this-&gt;_middleInitial = $middle_initial;
   &#125;
   function toString() &#123;
       return(Name::toString() . &quot; &quot; . $this-&gt;_middleInitial);
   &#125;
&#125;</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="http://php.net/">http://php.net/</a></p>
<p><a target="_blank" rel="noopener" href="http://www.tutorialspoint.com/php/index.htm">http://www.tutorialspoint.com/php/index.htm</a></p>
<p><a target="_blank" rel="noopener" href="http://www.w3schools.com/php/">http://www.w3schools.com/php/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/31/Tech/python-learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/05/31/Tech/python-learning/" class="post-title-link" itemprop="url">【Tech】 Python learning notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-05-31 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-31T00:00:00+00:00">2015-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Python-Basics"><a href="#Python-Basics" class="headerlink" title="Python Basics"></a>Python Basics</h1><p>Python does not use brackets to structure code, instead it uses whitespaces.</p>
<h2 id="To-define-a-variable"><a href="#To-define-a-variable" class="headerlink" title="To define a variable"></a>To define a variable</h2><p>you do not have to specify the datatype.</p>
<h2 id="find-the-datatype"><a href="#find-the-datatype" class="headerlink" title="find the datatype:"></a>find the datatype:</h2><pre><code>print type(x)</code></pre><h2 id="comment"><a href="#comment" class="headerlink" title="comment"></a>comment</h2><pre><code># This is a single line comment
&apos;&apos;&apos; This is a multi-line Python
comment. &apos;&apos;&apos;</code></pre><h2 id="ask-the-user-for-input"><a href="#ask-the-user-for-input" class="headerlink" title="ask the user for input"></a>ask the user for input</h2><p>using the raw_input function:</p>
<pre><code>#!/usr/bin/env python

x = int(raw_input(&quot;Enter x:&quot;))
y = int(raw_input(&quot;Enter y:&quot;))

sum = x + y
print sum</code></pre><p>In the latest Python version you can use the input() function instead:</p>
<pre><code>x = int(input(&quot;Enter x:&quot;))</code></pre><h2 id="do-operations-on-strings"><a href="#do-operations-on-strings" class="headerlink" title="do operations on strings:"></a>do operations on strings:</h2><pre><code>s = &quot;Hello Python&quot;
print s       # prints whole string
print s[0]    # prints &quot;H&quot;
print s[0:2]  # prints &quot;He&quot;
print s[2:4]  # prints &quot;ll&quot;
print s[6:]   # prints &quot;Python&quot;
print s + &apos; &apos; + s # print concatenated string.
print s.replace(&apos;Hello&apos;,&apos;Thanks&apos;) # print a string with a replaced word</code></pre><h3 id="Python-String-compare"><a href="#Python-String-compare" class="headerlink" title="Python String compare"></a>Python String compare</h3><pre><code>sentence = &quot;The cat is brown&quot;
q = &quot;cat&quot;

if q == sentence:
    print &apos;equal&apos;
else:
    print &apos;not equal&apos;</code></pre><h3 id="Python-String-contains"><a href="#Python-String-contains" class="headerlink" title="Python String contains"></a>Python String contains</h3><pre><code>sentence = &quot;The cat is brown&quot;
q = &quot;cat&quot;

if q in sentence:
    print q + &quot; found in &quot; + sentence</code></pre><h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><pre><code>l = [ &quot;Drake&quot;, &quot;Derp&quot;, &quot;Derek&quot;, &quot;Dominique&quot; ]

print l     # prints all elements
print l[0]  # print first element
print l[1]  # prints second element

l.append(&quot;Victoria&quot;)   # add element.
print l                # print all elements
l.remove(&quot;Derp&quot;)       # remove element.
l.remove(&quot;Drake&quot;)      # remove element.
print l                # print all elements.

l.sort()    # sorts the list in alphabetical order
l.reverse() # reverse order.</code></pre><p>iteration: </p>
<pre><code>items = [ &quot;Abby&quot;,&quot;Brenda&quot;,&quot;Cindy&quot;,&quot;Diddy&quot; ]

for item in items:
    print item</code></pre><h2 id="A-tuple-is-a-sequence-of-data"><a href="#A-tuple-is-a-sequence-of-data" class="headerlink" title="A tuple is a sequence of data."></a>A tuple is a sequence of data.</h2><p>It is defined as a sequence of elements separated by a comma.</p>
<pre><code>point = (3,4)
point2 = (2,6,12)

print point
print point[0]
print point[1]

print point2
print point2[0]
print point2[1]</code></pre><h2 id="A-dictionary"><a href="#A-dictionary" class="headerlink" title="A dictionary"></a>A dictionary</h2><p>is an unordered set of key:</p>
<pre><code>words = &#123;&#125;
words[&quot;Hello&quot;] = &quot;Bonjour&quot;
words[&quot;Yes&quot;] = &quot;Oui&quot;
words[&quot;No&quot;] = &quot;Non&quot;
words[&quot;Bye&quot;] = &quot;Au Revoir&quot;

print words            # print key-pairs.
del words[&quot;Yes&quot;]       # delete a key-pair.
print words            # print key-pairs.
words[&quot;Yes&quot;] = &quot;Oui!&quot;  # add new key-pair.
print words            # print key-pairs.</code></pre><p>Output:</p>
<pre><code>&#123;&apos;Yes&apos;: &apos;Oui&apos;, &apos;Bye&apos;: &apos;Au Revoir&apos;, &apos;Hello&apos;: &apos;Bonjour&apos;, &apos;No&apos;: &apos;Non&apos;&#125;
&#123;&apos;Bye&apos;: &apos;Au Revoir&apos;, &apos;Hello&apos;: &apos;Bonjour&apos;, &apos;No&apos;: &apos;Non&apos;&#125;
&#123;&apos;Yes&apos;: &apos;Oui!&apos;, &apos;Bye&apos;: &apos;Au Revoir&apos;, &apos;Hello&apos;: &apos;Bonjour&apos;, &apos;No&apos;: &apos;Non&apos;&#125;</code></pre><h2 id="Datatype-casting"><a href="#Datatype-casting" class="headerlink" title="Datatype casting"></a>Datatype casting</h2><table style="width:100%; " class="easy-table easy-table-cuscosky "><thead><tr><th>Function</th><th> Description</th></tr></thead><tbody><tr><td>int(x)</td><td> &nbsp;Converts x to an integer</td></tr><tr><td>long(x)</td><td> Converts x to a long integer</td></tr><tr><td>float(x)</td><td> Converts x to a floating point number</td></tr><tr><td>str(x)</td><td> Converts x to an string. &nbsp;x can be of the type float. integer or long.</td></tr><tr><td>hex(x)</td><td> Converts x integer to a hexadecimal string</td></tr><tr><td>chr(x)</td><td> Converts x integer to a character</td></tr><tr><td>ord(x)</td><td> Converts character x to an integer</td></tr></tbody></table>

<pre><code>x = 3
y = 2.15315315313532

print &quot;We have defined two numbers,&quot;
print &quot;x = &quot; + str(x)
print &quot;y = &quot; + str(y)

a = &quot;135.31421&quot;
b = &quot;133.1112223&quot;

c = float(a) + float(b)
print c</code></pre><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><pre><code>print &quot;Guess my age&quot;
guess = int(raw_input(&quot;Guess: &quot;))

if guess &gt; 10 and guess &lt; 20:
    print &quot;In range&quot;
else:
    print &quot;Out of range&quot;</code></pre><h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><pre><code>def doA():
    a = 5

def doB(a):
    print a   # this will work

doB(3)</code></pre><h2 id="For-loop-1"><a href="#For-loop-1" class="headerlink" title="For loop 1"></a>For loop 1</h2><pre><code>items = [ &quot;Abby&quot;,&quot;Brenda&quot;,&quot;Cindy&quot;,&quot;Diddy&quot; ]

for item in items:
    print item</code></pre><h2 id="For-loop-2"><a href="#For-loop-2" class="headerlink" title="For loop 2"></a>For loop 2</h2><pre><code>for x in range(1,10):
    for y in range(1,10):
        print &quot;(&quot; + str(x) + &quot;,&quot; + str(y) + &quot;)&quot;</code></pre><h2 id="while-loop"><a href="#while-loop" class="headerlink" title="while loop"></a>while loop</h2><pre><code>while button_not_pressed:
     drive()</code></pre><h1 id="Python-OOP"><a href="#Python-OOP" class="headerlink" title="Python OOP"></a>Python OOP</h1><h2 id="class-in-Python"><a href="#class-in-Python" class="headerlink" title="class in Python"></a>class in Python</h2><pre><code>class User:
    name = &quot;&quot;

    def __init__(self, name):
        self.name = name

    def sayHello(self):
        print &quot;Hello, my name is &quot; + self.name

# create virtual objects
james = User(&quot;James&quot;)
david = User(&quot;David&quot;)
eric = User(&quot;Eric&quot;)

# call methods owned by virtual objects
james.sayHello()
david.sayHello()</code></pre><h2 id="inheritance"><a href="#inheritance" class="headerlink" title="inheritance"></a>inheritance</h2><pre><code>class User:
    name = &quot;&quot;

    def __init__(self, name):
        self.name = name

    def printName(self):
        print &quot;Name  = &quot; + self.name

class Programmer(User):
    def __init__(self, name):
        self.name = name

    def doPython(self):
        print &quot;Programming Python&quot;

brian = User(&quot;brian&quot;)
brian.printName()

diana = Programmer(&quot;Diana&quot;)
diana.printName()
diana.doPython()</code></pre><h2 id="polymorphism"><a href="#polymorphism" class="headerlink" title="polymorphism"></a>polymorphism</h2><pre><code>class Bear(object):
def sound(self):
    print &quot;Groarrr&quot;

class Dog(object):
def sound(self):
    print &quot;Woof woof!&quot;

def makeSound(animalType):
animalType.sound()

bearObj = Bear()
dogObj = Dog()

makeSound(bearObj)
makeSound(dogObj)</code></pre><h2 id="polymorphism-with-abstract-class"><a href="#polymorphism-with-abstract-class" class="headerlink" title="polymorphism with abstract class"></a>polymorphism with abstract class</h2><pre><code>class Document:
    def __init__(self, name):
        self.name = name

    def show(self):
        raise NotImplementedError(&quot;Subclass must implement abstract method&quot;)

class Pdf(Document):
    def show(self):
        return &apos;Show pdf contents!&apos;

class Word(Document):
    def show(self):
        return &apos;Show word contents!&apos;

documents = [Pdf(&apos;Document1&apos;),
             Pdf(&apos;Document2&apos;),
             Word(&apos;Document3&apos;)]

for document in documents:
    print document.name + &apos;: &apos; + document.show()</code></pre><p>Output:</p>
<pre><code>Document1: Show pdf contents!
Document2: Show pdf contents!
Document3: Show word contents!</code></pre><h2 id="another-example"><a href="#another-example" class="headerlink" title="another example"></a>another example</h2><p>of abstract class:</p>
<pre><code>class Car:
    def __init__(self, name):
        self.name = name

    def drive(self):
        raise NotImplementedError(&quot;Subclass must implement abstract method&quot;)

    def stop(self):
        raise NotImplementedError(&quot;Subclass must implement abstract method&quot;)

class Sportscar(Car):
    def drive(self):
        return &apos;Sportscar driving!&apos;

    def stop(self):
        return &apos;Sportscar breaking!&apos;

class Truck(Car):
    def drive(self):
        return &apos;Truck driving slowly because heavily loaded.&apos;

    def stop(self):
        return &apos;Truck breaking!&apos;


cars = [Truck(&apos;Bananatruck&apos;),
        Truck(&apos;Orangetruck&apos;),
        Sportscar(&apos;Z3&apos;)]

for car in cars:
    print car.name + &apos;: &apos; + car.drive()</code></pre><p>Output:</p>
<pre><code>Bananatruck: Truck driving slowly because heavily loaded.
Orangetruck: Truck driving slowly because heavily loaded.
Z3: Sportscar driving!</code></pre><p>Reference: <a target="_blank" rel="noopener" href="https://pythonspot.com/beginner/">Python Beginner by pythonspot.com</a></p>
<h1 id="Python-tricks"><a href="#Python-tricks" class="headerlink" title="Python tricks"></a>Python tricks</h1><h2 id="start-a-simple-HTTP-server"><a href="#start-a-simple-HTTP-server" class="headerlink" title="start a simple HTTP server:"></a>start a simple HTTP server:</h2><pre><code>python -m SimpleHTTPServer</code></pre><h2 id="Using-Zip"><a href="#Using-Zip" class="headerlink" title="Using Zip"></a>Using Zip</h2><p>to combine arrays</p>
<pre><code>&gt;&gt;&gt; b = [[1, 2, 3, 4], [6, 5, 4, 3]]
&gt;&gt;&gt; zip(*b)
[(1, 6), (2, 5), (3, 4), (4, 3)]</code></pre><h2 id="We-know-that-“array-reverse-”-will-reverse-an-array"><a href="#We-know-that-“array-reverse-”-will-reverse-an-array" class="headerlink" title="We know that “array.reverse()” will reverse an array."></a>We know that “array.reverse()” will reverse an array.</h2><p>How do we reverse a string?</p>
<pre><code>&gt;&gt;&gt; s = &quot;Hello world&quot;
&gt;&gt;&gt; s = s[::-1]
&gt;&gt;&gt; print s
dlrow olleH</code></pre><h2 id="Swapping-variables"><a href="#Swapping-variables" class="headerlink" title="Swapping variables"></a>Swapping variables</h2><pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; b = 3
&gt;&gt;&gt; b,a = a,b
&gt;&gt;&gt; print a
3
&gt;&gt;&gt; print b
1</code></pre><p>Reference: <a target="_blank" rel="noopener" href="https://pythonspot.com/fun-tricks-with-python/">Fun tricks with Python, pythonspot.com</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/24/Tech/regex-tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/05/24/Tech/regex-tutorial/" class="post-title-link" itemprop="url">【Tech】 Regular Expression Learning Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-24T00:00:00+00:00">2015-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>\d    any Digit</p>
</li>
<li><p>.    any Character</p>
</li>
<li><p>.    Period</p>
</li>
<li><p>[abc]    Only a, b, or c</p>
</li>
<li><p>[^abc]    Not a, b, nor c</p>
</li>
<li><p>[a-z]    Characters a to z</p>
</li>
<li><p>[0-9]    Numbers 0 to 9</p>
</li>
<li><p>{m}    m Repetitions</p>
</li>
<li><p>{m,n}    m to n Repetitions</p>
<p> eg. a{1,} means <strong>&gt;=1 occurance of a</strong></p>
</li>
<li><p>*    Zero or more repetitions</p>
</li>
<li><p>+    One or more repetitions</p>
<p> eg. [abc]+ means <strong>&gt;=1 occurance of a or b or c</strong></p>
</li>
<li><p>?    Optional</p>
<p> eg. ab?c matches <strong>abc or ac</strong></p>
</li>
<li><p>\s    any Whitespace</p>
</li>
<li><p>\t    any tab</p>
</li>
<li><p>\n    any new line</p>
</li>
<li><p>^…$    Starts and ends</p>
</li>
<li><p>()    capture Group</p>
</li>
<li><p>(a(bc))    capture Sub group</p>
<p> eg. ^(IMG\d+).png$ matches <strong>an image file name</strong></p>
</li>
<li><p>(.*)    capture Variable content</p>
</li>
<li><p>(a|b)    Matchs a or b</p>
</li>
<li><p>metacharacters</p>
<ol>
<li><p>\w    any Alphanumeric character</p>
</li>
<li><p>\W    any Non-alphanumeric character</p>
</li>
<li><p>\d    any Digit</p>
</li>
<li><p>\D    any Non-digit character</p>
</li>
<li><p>\s    any Whitespace</p>
</li>
<li><p>\S    any Non-whitespace character</p>
</li>
</ol>
</li>
<li><p>Last but not least: <strong>.* matches anything</strong></p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/14/Tech/ssh-keys-github/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/05/14/Tech/ssh-keys-github/" class="post-title-link" itemprop="url">【Tech】 SSH keys setup for GitHub</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-05-14 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-14T00:00:00+00:00">2015-05-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Setup-for-the-first-Github"><a href="#Setup-for-the-first-Github" class="headerlink" title="Setup for the first Github"></a>Setup for the first Github</h1><p>This is the standard procedure for generating SSH and connect to GitHub:</p>
<p>check current SSH:</p>
<pre><code>ls -al ~/.ssh</code></pre><p>generate new:</p>
<pre><code>ssh-keygen -t rsa -b 4096 -C &quot;theimmortalfish@gmail.com&quot;</code></pre><p>(-t for type, -b for number of bits, -C for comment)</p>
<p><strong>then press Enter</strong>, then set passphrase.</p>
<p>set SSH-agent:</p>
<pre><code>eval &quot;$(ssh-agent -s)&quot;
ssh-add ~/.ssh/id_rsa</code></pre><p>add SSH to GitHub:</p>
<pre><code>pbcopy &lt; ~/.ssh/id_rsa.pub</code></pre><p>put it into GitHub settings</p>
<p>test SSH:</p>
<pre><code>ssh -T git@github.com</code></pre><h1 id="Setup-for-the-second-Github"><a href="#Setup-for-the-second-Github" class="headerlink" title="Setup for the second Github"></a>Setup for the second Github</h1><h2 id="generate-a-second-SSH-key"><a href="#generate-a-second-SSH-key" class="headerlink" title="generate a second SSH key"></a>generate a second SSH key</h2><p>Same steps untli the “<strong>then press Enter</strong>“, we’ll instead give it another name like “id_rsa_fish”:</p>
<pre><code>Fishs-MacBook-Pro:.ssh Fish$ ssh-keygen -t rsa -b 4096 -C &quot;theimmortalfish@gmail.com&quot;
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/Fish/.ssh/id_rsa): id_rsa_fish
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in id_rsa_fish.
Your public key has been saved in id_rsa_fish.pub.
The key fingerprint is:
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx theimmortalfish@gmail.com
The key&apos;s randomart image is:
+--[ RSA 4096]----+
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
|       xxxxx     |
+-----------------+
Fishs-MacBook-Pro:.ssh Fish$ ls -al ~/.ssh/
total 40
drwx------   7 Fish  staff   238 May 14 12:43 .
drwxr-xr-x+ 45 Fish  staff  1530 May 13 23:01 ..
-rw-------   1 Fish  staff  1766 Jul 28  2014 id_rsa
-rw-r--r--   1 Fish  staff   402 Jul 28  2014 id_rsa.pub
-rw-------   1 Fish  staff  3326 May 14 12:43 id_rsa_fish
-rw-r--r--   1 Fish  staff   751 May 14 12:43 id_rsa_fish.pub
-rw-r--r--   1 Fish  staff  2828 May 13 22:47 known_hosts</code></pre><p>Again, we’ll do</p>
<pre><code>eval &quot;$(ssh-agent -s)&quot;
ssh-add ~/.ssh/id_rsa_fish</code></pre><p>And also, add public key to the second GitHub account. </p>
<h2 id="SSH-configuration"><a href="#SSH-configuration" class="headerlink" title="SSH configuration"></a>SSH configuration</h2><p>Now this is the key step: go to .ssh folder and <strong>create a config file</strong>: </p>
<pre><code>touch config</code></pre><p>And put in the following configuration:</p>
<pre><code>Host github-old
  HostName github.com
  User git
  IdentityFile ~/.ssh/id_rsa

Host github.com
  HostName github.com
  User git
  IdentityFile ~/.ssh/id_rsa_fish</code></pre><p>Depending on your preference, change one of the host from “github.com” to some other names. In my case, I give the name “github-old” to my first SSH, and the second one would just stay the same (cuz I use the second GitHub more frequently). </p>
<p>The next step is the most important!</p>
<h2 id="configure-ssh-agent"><a href="#configure-ssh-agent" class="headerlink" title="configure ssh-agent"></a>configure ssh-agent</h2><p>Now restart your ssh-agent:</p>
<pre><code>killall ssh-agent; eval `ssh-agent -s`</code></pre><p>Now if you give it a try, you notice something fishy:</p>
<pre><code>ssh -T git@github.com

ssh -T git@github-old</code></pre><p>You notice that only the default SSH key (id_rsa) is being used. You are essentially querying the same GitHub account. </p>
<p><strong>This is wrong</strong>. Because we have not added both SSH keys to ssh-agent yet. Immediately, do this: </p>
<pre><code>ssh-add ~/.ssh/id_rsa_fish

ssh-add ~/.ssh/id_rsa</code></pre><p>Now if you test connection again, you shall see no problem. </p>
<h2 id="Last-step-change-remote-url"><a href="#Last-step-change-remote-url" class="headerlink" title="Last step, change remote url"></a>Last step, change remote url</h2><p>The last step is to make changes to the git repository so that your computer works with both GitHub account. </p>
<p>Whenever we clone or “remote add origin”, we shall replace “github-old” with “github.com” in the remote url. </p>
<p>Example: go to your first GitHub account and create a new repo called “hello”. Then,</p>
<pre><code>mkdir hello
cd hello
git init
git remote add origin git@github-old:old-name/hello.git
touch testing-file.txt
git add .
git commit -m &apos;first commit&apos;
git push origin master</code></pre><p>You should see it works fine. Notice how we changed the remote url from “github.com” to “github-old”, which matches our host configuration in the .ssh folder. </p>
<p>Your second GitHub shall work just like a normal GitHub account. 3 hours of hard work, all done! </p>
<p>Thanks to <a target="_blank" rel="noopener" href="http://code.tutsplus.com/tutorials/how-to-work-with-github-and-multiple-accounts--net-22574">Jeffrey Way from tutsplus.com</a> for the nice tutorial. </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/30/Tech/nginx-tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/04/30/Tech/nginx-tutorial/" class="post-title-link" itemprop="url">【Tech】 Nginx tutorial</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-04-30 00:00:00" itemprop="dateCreated datePublished" datetime="2015-04-30T00:00:00+00:00">2015-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>nginx [engine x] is <strong>an HTTP and reverse proxy server</strong>, a mail proxy server, and a generic TCP proxy server. </p>
<p>For a long time, it has been running on many heavily loaded Russian sites, and recently, Netflix, Wordpress.com. </p>
<p>Ref: <a target="_blank" rel="noopener" href="http://nginx.org/en/">nginx</a></p>
<p><strong>nginx has one master process and several worker processes</strong>. The main purpose of the master process is to read and evaluate configuration, and maintain worker processes. Worker processes do actual processing of requests. </p>
<h1 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h1><h2 id="start-nginx"><a href="#start-nginx" class="headerlink" title="start nginx"></a>start nginx</h2><pre><code>nginx</code></pre><h2 id="stop-nginx"><a href="#stop-nginx" class="headerlink" title="stop nginx"></a>stop nginx</h2><pre><code>nginx -s signal</code></pre><p>signal: </p>
<ol>
<li><p>stop — fast shutdown</p>
</li>
<li><p>quit — graceful shutdown</p>
</li>
<li><p>reload — reloading the configuration file</p>
</li>
<li><p>reopen — reopening the log files</p>
</li>
</ol>
<h2 id="List-of-running-nginx-process"><a href="#List-of-running-nginx-process" class="headerlink" title="List of running nginx process"></a>List of running nginx process</h2><pre><code>ps -ax | grep nginx</code></pre><h1 id="config-file：-nginx-conf"><a href="#config-file：-nginx-conf" class="headerlink" title="config file： nginx.conf"></a>config file： nginx.conf</h1><p><strong>nginx.conf</strong></p>
<p>By default, the configuration file is placed in <strong>/etc/nginx</strong>. (If not, check /usr/local/nginx/conf, or /usr/local/etc/nginx.)</p>
<h2 id="first-part"><a href="#first-part" class="headerlink" title="first part"></a>first part</h2><pre><code>user www-data;
worker_processes 4;
pid /run/nginx.pid;

events &#123;
    worker_connections 768;
    # multi_accept on;
&#125;</code></pre><ol>
<li><p>user</p>
<p> Defines which Linux system user will own and run the Nginx server. Most Debian-based distributions use www-data</p>
<p> In case you run two simultaneous web servers, or need another program’s user to have control over Nginx, you can play with it.</p>
</li>
<li><p>worker_process</p>
<p> Defines how many threads, or simultaneous instances, of Nginx to run. </p>
</li>
<li><p>pid</p>
<p> Defines where Nginx will write its master process ID, or PID. </p>
<blockquote>
<p>On my machine, the file /run/nginx.pid store a single number 724. </p>
</blockquote>
</li>
</ol>
<h2 id="http-part"><a href="#http-part" class="headerlink" title="http part"></a>http part</h2><pre><code>http &#123;

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable &quot;msie6&quot;;

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
&#125;</code></pre><p>Note: The HTTP block of the nginx.conf file contains the statement include <strong>/etc/nginx/sites-enabled/*;</strong>. This allows for server block configurations to be loaded in from separate files found in <strong>the sites-enabled sub-directory</strong>. </p>
<p>Usually these are <strong>symlinks to files stored in /etc/nginx/sites-available/</strong>. By using symlinks you can quickly enable or disable a virtual server while preserving its configuration file. </p>
<h1 id="config-file-for-sites"><a href="#config-file-for-sites" class="headerlink" title="config file for sites"></a>config file for sites</h1><h2 id="sites-available"><a href="#sites-available" class="headerlink" title="sites-available"></a>sites-available</h2><p><strong>/etc/nginx/sites-available/default</strong> is a template provided for you. </p>
<pre><code>server &#123;
        listen 80 default_server;
        listen [::]:80 default_server ipv6only=on;

        root /usr/share/nginx/html;
        index index.html index.htm;

        # Make site accessible from http://localhost/
        server_name localhost;

        location / &#123;
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ /index.html;
                # Uncomment to enable naxsi on this location
                # include /etc/nginx/naxsi.rules
        &#125;
&#125;</code></pre><p><strong>Do not modify this file</strong>. Generally, you’ll want to make a separate file with its own server block for each virtual domain on your server.  So do: </p>
<pre><code>cp /etc/nginx/sites-available/default /etc/nginx/sites-available/example.com</code></pre><h2 id="listen-directive"><a href="#listen-directive" class="headerlink" title="listen directive"></a>listen directive</h2><pre><code>listen 80 default_server;
listen [::]:80 default_server ipv6only=on;</code></pre><p>The argument <strong>default_server</strong> means this virtual host will answer requests on port 80 that don’t match any other virtual host’s listen statement. </p>
<p>The second statement listens over IPv6 and behaves in the same way.</p>
<pre><code>listen     127.0.0.1:80;
listen     localhost:80;</code></pre><p>Note: localhost is conventionally set as the hostname for 127.0.0.1 in /etc/hosts.</p>
<pre><code>listen     80;
listen     *:80;</code></pre><p>This will listen on all domains and IP addresses on port 80. <strong>listen 80;</strong> is equivalent to <strong>listen *:80;</strong></p>
<pre><code>listen     12.34.56.77:80;
listen     12.34.56.78:80;
listen     12.34.56.79:80;       
listen     12.34.56.79:8080;       </code></pre><p>This will listen on multiple IP/port. </p>
<h2 id="server-name-directive"><a href="#server-name-directive" class="headerlink" title="server_name directive"></a>server_name directive</h2><p>Common:</p>
<pre><code>server_name   example.com;</code></pre><p>Or</p>
<pre><code>server_name   example.com www.example.com;</code></pre><p>Now this:</p>
<pre><code>server_name   *.example.com;
server_name   .example.com;</code></pre><p>will listen to all subdomains of example.com, including <a target="_blank" rel="noopener" href="http://www.example.com">www.example.com</a>, foo.example.com, etc. <strong>Both equivalent</strong>.</p>
<pre><code>server_name   &quot;&quot;;</code></pre><p>If you set server_name to the empty quote set (”“), Nginx will process <strong>all requests that either</strong> do not have a hostname, <strong>or</strong> that have an unspecified hostname, such as requests for the IP address itself.</p>
<h2 id="location-directive"><a href="#location-directive" class="headerlink" title="location directive"></a>location directive</h2><p><strong>location</strong> setting lets you configure how Nginx will respond to requests for resources within the server.</p>
<p>eg. </p>
<pre><code>location / &#123; &#125; 
location /images/ &#123; &#125; 
location /blog/ &#123; &#125; 
location /planet/ &#123; &#125; 
location /planet/blog/ &#123; &#125;</code></pre><p>The location can set actual path in the file system (that is under /etc/nginx/ folder). Or we can also set <strong>proxy_pass</strong> directive. </p>
<p>Ref 1: <a target="_blank" rel="noopener" href="http://nginx.org/en/docs/beginners_guide.html">nginx Beginner’s Guide</a></p>
<p>Ref 2: <a target="_blank" rel="noopener" href="https://www.linode.com/docs/websites/nginx/basic-nginx-configuration#location-root-and-index">Basic Nginx Configuration by Linode</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/28/Tech/linux-directory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Uncle Martian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Blog of Uncle Martian">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/04/28/Tech/linux-directory/" class="post-title-link" itemprop="url">【Tech】 Linux Directory Structure</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-04-28 00:00:00" itemprop="dateCreated datePublished" datetime="2015-04-28T00:00:00+00:00">2015-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-05 19:41:33" itemprop="dateModified" datetime="2022-04-05T19:41:33+00:00">2022-04-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><h2 id="a-brief-introduction"><a href="#a-brief-introduction" class="headerlink" title="a brief introduction"></a>a brief introduction</h2><ol>
<li>bin - user binary</li>
<li>boot - boot loader</li>
<li>dev - device (manipulate your hard drives)</li>
<li>etc - config files</li>
<li>home - user home dir except root</li>
<li>initrd.img </li>
<li>lib - system library</li>
<li>lib64</li>
<li>lost+found</li>
<li>media - removable devices (CD, USB etc)</li>
<li>mnt - mount file systems</li>
<li>opt - optional (eg. desktop environment)</li>
<li>proc - process info</li>
<li>root - root user’s home</li>
<li>run</li>
<li>sbin - system binary (runnable only by root)</li>
<li>srv - service data</li>
<li>sys</li>
<li>tmp - temporary (delete on restart)</li>
<li>usr - Unix System Resources (user programs)<ol>
<li>usr/bin - user programs</li>
<li>usr/lib - user system lib</li>
<li>usr/local -  programs that’s <strong>manually compiled</strong> rather than install from package</li>
<li>usr/sbin - root programs</li>
</ol>
</li>
<li>var - variables, application data (eg. MySQL db, cached files)</li>
</ol>
<p>Reference: <cite>Linux Directory Structure (File System Structure) Explained with Examples</cite><a target="_blank" rel="noopener" href="http://www.thegeekstuff.com/2010/09/linux-file-system-structure/">1</a></p>
<h1 id="Some-important-folders"><a href="#Some-important-folders" class="headerlink" title="Some important folders"></a>Some important folders</h1><h2 id="bin-sbin-usr-bin-usr-sbin"><a href="#bin-sbin-usr-bin-usr-sbin" class="headerlink" title="bin, sbin, usr/bin, usr/sbin"></a>bin, sbin, usr/bin, usr/sbin</h2><p><strong>bin/</strong> stores commands needed during boot-up that might be needed by normal users. eg. cat, tar…</p>
<blockquote>
<p>Applications <strong>such as Firefox</strong> are stored in /usr/bin, while important system programs and utilities such as the <strong>bash shell</strong> are located in /bin. </p>
</blockquote>
<p><strong>sbin/</strong> is like bin but commands are not intended for normal users. Commands run by LINUX. eg. ifconfig, fdisk…</p>
<p><strong>/usr/bin</strong> is all user commands, while <strong>/usr/sbin</strong> is system admin commands not needed on the root filesystem. e.g. most server programs.</p>
<h2 id="proc"><a href="#proc" class="headerlink" title="proc"></a>proc</h2><p>This filesystem is not on a disk. Exists in the kernels imagination (virtual). </p>
<p>It holds information about kernel parameters and system configuration.</p>
<h2 id="usr"><a href="#usr" class="headerlink" title="usr"></a>usr</h2><p><strong>/usr</strong> usually contains by far the largest share of data on a system. Hence, this is <a target="_blank" rel="noopener" href="http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/usr.html">one of the most important directories</a> in the system as it contains all the <strong>user binaries, their documentation, libraries, header files</strong>, etc…. </p>
<p>Reference: <a target="_blank" rel="noopener" href="http://www.comptechdoc.org/os/linux/usersguide/linux_ugfilestruct.html">Linux Directory Structure</a></p>
<h1 id="A-brief-history"><a href="#A-brief-history" class="headerlink" title="A brief history"></a>A brief history</h1><blockquote>
<p>Originally, there was /bin for programs, /dev for device files and /lib for extra executable code and /usr for user data. </p>
</blockquote>
<blockquote>
<p>The source code was also often provided somewhere under /usr.</p>
</blockquote>
<blockquote>
<p>And there were a few files in the operating system that didn’t fit in any of the existing categories. This included <strong>a passwd file containing users’ passwords</strong>, and <strong>an mtab file written by mount</strong>. </p>
</blockquote>
<blockquote>
<p>At first, there was no connotation that files in <strong>/etc</strong> were configuration files. In these very early days, if you wanted to customize something, you’d be recompiling that part of the system. As Unix got more powerful, there were more and more things you could do without recompiling. As Unix got used more widely, there were more and more things people wanted to do, and they found ways of doing them without going through the trouble of recompiling. </p>
</blockquote>
<blockquote>
<p>So <strong>/etc</strong> filled up with more and more text files that people could and did customize, hence it gradually became the configuration directory.</p>
</blockquote>
<blockquote>
<p>With the creation of <strong>/sbin</strong> to contain programs intended only for the system administrator, <strong>/etc</strong> ended up containing only text files, many of which can be customized by the system administrator. </p>
</blockquote>
<p>Reference: <a target="_blank" rel="noopener" href="http://unix.stackexchange.com/a/56172">Answer by Gilles on StackExchange</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Uncle Martian</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">89</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Uncle Martian</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>

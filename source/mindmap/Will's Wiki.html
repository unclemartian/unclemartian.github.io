<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 6, revision: 5, date: new Date("October 6, 2011"), extensions: {}};
//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="copyright" content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2011

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
" />
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' />
<!--}}}-->

<!--PRE-HEAD-END-->
<title> Will's Wiki Page - Two bicycle makers, from Ohio, one day decided to fly. </title>
<style id="styleArea" type="text/css">
#saveTest {display:none;}
#messageArea {display:none;}
#copyright {display:none;}
#storeArea {display:none;}
#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}
#shadowArea {display:none;}
#javascriptWarning {width:100%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}
</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>
</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {background:[[ColorPalette::PrimaryMid]];}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}
.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}
.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}
.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];
	border:1px solid [[ColorPalette::PrimaryMid]];}
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}
#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}
.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}
.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}
.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}
.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}
.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}

.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
* html .tiddler {height:1%;}

body {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

a {text-decoration:none;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.externalLink {text-decoration:underline;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
	#mainMenu .tiddlyLinkNonExisting,
	#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}

.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard {padding:0.1em 1em 0 2em;}
.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizardStep {padding:1em 1em 1em 1em;}
.wizard .button {margin:0.5em 0 0; font-size:1.2em;}
.wizardFooter {padding:0.8em 0.4em 0.8em 0;}
.wizardFooter .status {padding:0 0.4em; margin-left:1em;}
.wizard .button {padding:0.1em 0.2em;}

#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}
.messageToolbar {display:block; text-align:right; padding:0.2em;}
#messageArea a {text-decoration:underline;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}
.popup .popupMessage {padding:0.4em;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.popup li.disabled {padding:0.4em;}
.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation {padding:0.5em; margin:0.5em;}

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}
.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}
table.listView {font-size:0.85em; margin:0.8em 1.0em;}
table.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}

.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}
.viewer code {font-size:1.2em; line-height:1.4em;}

.editor {font-size:1.1em;}
.editor input, .editor textarea {display:block; width:100%; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0px;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}
#displayArea {margin: 1em 1em 0em;}
noscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
}
/*}}}*/</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;</pre>
</div>
</div>
<!--POST-SHADOWAREA-->
<div id="storeArea">
<div title="Accessories" creator="Will" modifier="Will" created="201111060723" modified="201111060742" server.type="file" server.host="" changecount="2">
<pre>[[Bluetooth Headset]]
</pre>
</div>
<div title="An example of P/E ratio and market capitalization" creator="Will" modifier="Will" created="201110310238" modified="201110310245" server.type="file" server.host="" changecount="4">
<pre>[[P/E ratio]]
[[market capitalization]]

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6297415622/&quot; title=&quot;An example of P:E ratio and market capitalization by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6112/6297415622_4285354f16_z.jpg&quot; width=&quot;640&quot; height=&quot;452&quot; alt=&quot;An example of P:E ratio and market capitalization&quot;&gt;&lt;/a&gt;
&lt;/html&gt;</pre>
</div>
<div title="App cannot build as iPhone app, only &quot;My Mac&quot; appear in Scheme Select" creator="Will" modifier="Will" created="201111250230" modified="201201230528" server.type="file" server.host="" changecount="4">
<pre>! Problem
&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397680151/&quot; title=&quot;1 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7153/6397680151_f030ae286a_z.jpg&quot; width=&quot;502&quot; height=&quot;277&quot; alt=&quot;1&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

! Solution
Click on Edit Scheme, and change the Executable to Xxxxxx.app, and that's it!

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397680335/&quot; title=&quot;2 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7031/6397680335_c0340b3e78.jpg&quot; width=&quot;390&quot; height=&quot;245&quot; alt=&quot;2&quot;&gt;&lt;/a&gt;

&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397680491/&quot; title=&quot;3 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7013/6397680491_a8da30e02a_z.jpg&quot; width=&quot;640&quot; height=&quot;436&quot; alt=&quot;3&quot;&gt;&lt;/a&gt;

&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397680681/&quot; title=&quot;4 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7163/6397680681_5b8e5c2c36_z.jpg&quot; width=&quot;530&quot; height=&quot;338&quot; alt=&quot;4&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

! Other scenario
In other scenarios, the version of base SDK should be changed to solve this problem. 

For example, if the Cocos2D library is based on SDK3, and now we want it run on SDK 4 environment. This is what we should do.

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6747162787/&quot; title=&quot;Screen shot 2012-01-23 at PM 01.25.37 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7160/6747162787_c9c4277f46_b.jpg&quot; width=&quot;793&quot; height=&quot;393&quot; alt=&quot;Screen shot 2012-01-23 at PM 01.25.37&quot;&gt;&lt;/a&gt;
&lt;/html&gt;</pre>
</div>
<div title="Applescript" creator="YourName" modifier="Will" created="201110170305" modified="201111010325" server.page.revision="201110170308" server.type="file" server.host="" changecount="11">
<pre>[[Working with Excel in Applescript]]

tell application &quot;Microsoft Excel&quot;
     activate
     set invoice_number to value of cell 3 of column 1 of active sheet
end tell

-------------------------------------------------------------------

Loop: 
repeat with thePossibleTitle in allPossibleTitles
*set thePossibleTitle to contents of thePossibleTitle
*if (.....) then
*end if
end repeat

-------------------------------------------------------------------

set content_array to {-1, -1, -1}

repeat with array_item in content_array
     set item i of content_array to &quot;abc&quot;
end repeat

-------------------------------------------------------------------

set checking to text returned of (display dialog &quot;Which column do you want to check?&quot; default answer &quot;13&quot; buttons {&quot;Quit&quot;, &quot;OK&quot;} default button 2) as integer

-------------------------------------------------------------------

get all items from a SAP table:

set current_line to 1
set engrav_index to {}
set engrav_items to {}
set position of vertical scrollbar of table control &quot;/app/con[0]/ses[0]/wnd[0]/usr/tabsTAXI_TABSTRIP_OVERVIEW/tabpT\\01/ssubSUBSCREEN_BODY:SAPMV45A:4400/subSUBSCREEN_TC:SAPMV45A:4900/tblSAPMV45ATCTRL_U_ERF_AUFTRAG&quot; to 0

repeat

     set abc to txt of text field &quot;/app/con[0]/ses[0]/wnd[0]/usr/tabsTAXI_TABSTRIP_OVERVIEW/tabpT\\01/ssubSUBSCREEN_BODY:SAPMV45A:4400/subSUBSCREEN_TC:SAPMV45A:4900/tblSAPMV45ATCTRL_U_ERF_AUFTRAG/txtVBAP-POSNR[0,0]&quot;

     set abcd to txt of combo text field &quot;/app/con[0]/ses[0]/wnd[0]/usr/tabsTAXI_TABSTRIP_OVERVIEW/tabpT\\01/ssubSUBSCREEN_BODY:SAPMV45A:4400/subSUBSCREEN_TC:SAPMV45A:4900/tblSAPMV45ATCTRL_U_ERF_AUFTRAG/ctxtRV45A-MABNR[1,0]&quot;

     set position of vertical scrollbar of table control &quot;/app/con[0]/ses[0]/wnd[0]/usr/tabsTAXI_TABSTRIP_OVERVIEW/tabpT\\01/ssubSUBSCREEN_BODY:SAPMV45A:4400/subSUBSCREEN_TC:SAPMV45A:4900/tblSAPMV45ATCTRL_U_ERF_AUFTRAG&quot; to current_line

     set current_line to (current_line + 1)

     if (abc = &quot;&quot;) then exit repeat

     if (character 1 of abcd = &quot;P&quot;) then
          set engrav_index to engrav_index &amp; (abc as integer)
          set engrav_items to engrav_items &amp; abcd
     end if

end repeat

-------------------------------------------------------------------

ASCII code convertion: 

set filter_col to ((id of filter_col) - (id of &quot;A&quot;) + 1) as integer

-------------------------------------------------------------------

</pre>
</div>
<div title="Applescript Comment" creator="YourName" modifier="YourName" created="201110170606" modified="201110170607" server.page.revision="201110170607" server.type="file" server.host="">
<pre>Block:

(* First line...
Second line...
and so on... *)

SIngle-line:
&lt;html&gt;&lt;p&gt;
--the comment write here
&lt;/p&gt;&lt;/html&gt;</pre>
</div>
<div title="Auto-Sync Time and Date in Windows 7" creator="Will" modifier="Will" created="201110161312" modified="201110310244" server.page.revision="201110161319" server.type="file" server.host="" changecount="1">
<pre>Okay here is the thing. I am using Bootloader to boot each time. And when I log in Windows 7, I always find the funny time which sometimes shocks me (indicating 7 am while it's actually still night-time).

So I want Windows 7 to sync time every time I log into the system. This is how. 

Go to start =&gt; task scheduler
Go to Microsoft / Windows / Time Synchronization branch and click Create Task...
Give the new task a name. I called mine Actually Synchronize Time.

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249315287/&quot; title=&quot;Untitled by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6176/6249315287_e9922a8244_z.jpg&quot; width=&quot;640&quot; height=&quot;442&quot; alt=&quot;0&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

Set the property as follow:

1
Set the new task to run as the LOCAL SERVICE user. 
Set it to run with highest privileges and to be configured for your OS version.

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249843296/&quot; title=&quot;1 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6234/6249843296_682cf8b780_z.jpg&quot; width=&quot;640&quot; height=&quot;481&quot; alt=&quot;1&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
2
add triggers

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249315565/&quot; title=&quot;2 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6217/6249315565_440f597aa2_z.jpg&quot; width=&quot;640&quot; height=&quot;431&quot; alt=&quot;2&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
3
The task will have two actions. Make sure they end up in the right order. The first action does the same as the original Synchronize Time task and ensures the Windows Time service is running. The second action makes the actual time sync happen.
Set the first action to start a program, which is %windir%\system32\sc.exe with arguments start w32time task_started

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249843588/&quot; title=&quot;3 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6155/6249843588_b3effcc701_z.jpg&quot; width=&quot;640&quot; height=&quot;493&quot; alt=&quot;3&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
4
Set the second action to start a program, which is %windir%\system32\w32tm.exe with argument /resync

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249315931/&quot; title=&quot;4 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6239/6249315931_8c164ca3e6_z.jpg&quot; width=&quot;640&quot; height=&quot;485&quot; alt=&quot;4&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
5
Turn off the setting which makes the task only run on AC power. The task is very brief so there's no reason not to run it when on battery power. 
Set the task to start only if a network connection is available.

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249843918/&quot; title=&quot;5 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6158/6249843918_87b4c3d43a_z.jpg&quot; width=&quot;640&quot; height=&quot;481&quot; alt=&quot;5&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
6
Set the task to run as soon as possible if its schedule is missed.

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249316241/&quot; title=&quot;6 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6119/6249316241_843280c7c7_z.jpg&quot; width=&quot;640&quot; height=&quot;481&quot; alt=&quot;6&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
7
You should also check the Date and Time control panel to ensure it is set to synchronize time via the Internet. You might also want to use a closer NTP server (e.g. one run by your ISP).

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249316373/&quot; title=&quot;7 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6215/6249316373_4bd54323d5_z.jpg&quot; width=&quot;563&quot; height=&quot;606&quot; alt=&quot;7&quot;&gt;&lt;/a&gt;
&lt;/html&gt;


http://www.pretentiousname.com/timesync/index.html
</pre>
</div>
<div title="BackstageArea" creator="Will" modifier="Will" created="201111030329" modified="201111030332" changecount="5">
<pre>means the top bar of the TiddlyWiki page.

! [Very Important !!!]
The BackstageArea is not available on non-editable version of TiddlyWiki. For example, the online dropbox version.</pre>
</div>
<div title="Backup Kext" creator="Will" modifier="Will" created="201110161051" modified="201110161107" server.page.revision="201110161107" server.type="file" server.host="">
<pre>Kext = Kernel Extension

To backup:

sudo -s
[enter password]
cp -r /System/Library/Extensions /System/Library/Extensions.backup
cp -r /mach_kernel /mach_kernel.backup

To restore: 
sudo -s
[enter password]
cp -r /System/Library/Extensions.backup /System/Library/Extensions
cp -r /mach_kernel.backup /mach_kernel


If you are restoring from [[single user mode]] (-s at F8 prompt), its the same commands except type in this command before you do the above commands:

mount -uw /


ref: http://www.insanelymac.com/forum/index.php?showtopic=89260</pre>
</div>
<div title="Bash" creator="Will" modifier="Will" created="201110240131" modified="201110240131" server.type="file" server.host="" changecount="2">
<pre>Bash</pre>
</div>
<div title="Basic TiddlyWiki Markup" creator="Will" modifier="Will" created="201110240637" modified="201110260902" server.type="file" server.host="" changecount="3">
<pre>!Basic Formatting

|!Format|!Markup|!Example|
|Bold|{{{''Bold''}}} (2 single quotes)|''Bold''|
|Italic|{{{//Italic//}}}|//Italic//|
|Bold Italic|{{{''//Bold Italic//''}}}|''//Bold Italic//''|
|Underlined|{{{__Underline__}}}(2 underscores)|__Underlined__|
|Strikethough|{{{--Strikethrough--}}}&lt;br /&gt;{{{--}}} replaced {{{==}}} for Stikethrough in TiddlyWiki 2.1|--Strikethrough--|
|Superscript|{{{Text^^Superscript^^}}}|Text^^Superscript^^|
|Subscript|{{{Text~~Subscript~~}}}|Text~~Subscript~~|
|Monospaced text|&lt;html&gt;&lt;code&gt;{{{Monospaced}}}&lt;/code&gt;&lt;/html&gt;|{{{Monospaced}}}|
|Monospaced multiline block|Put &lt;html&gt;&lt;code&gt;{{{&lt;/code&gt;&lt;/html&gt; and &lt;html&gt;&lt;code&gt;}}}&lt;/code&gt;&lt;/html&gt; on their own lines|&lt;html&gt;&lt;pre&gt;{{{&lt;br/&gt;Monospaced&lt;br/&gt;Multi-line&lt;br/&gt;Block&lt;br/&gt;}}}&lt;/pre&gt;&lt;/html&gt;|
|Highlight|{{{@@Highlight@@}}}|@@Highlight@@|
|Color|{{{@@color(green):green text@@}}}|@@color(green):green text@@ |
|~|{{{@@bgcolor(green):text@@}}}|@@bgcolor(green):text@@ |
|~|{{{@@bgcolor(#3399ff):text@@}}}|@@bgcolor(#3399ff):text@@|
|~|{{{@@bgcolor(#39f):text@@}}}|@@bgcolor(#39f):text@@|
|CSS Extended Highlights|{{{@@some css;Highlight@@}}}&lt;br /&gt;For backwards compatibility, the following highlight syntax is also accepted:&lt;br /&gt;{{{@@bgcolor(#ff0000):color(#ffffff):red coloured@@}}}|@@background-color:#ff0000;color:#ffffff;red coloured@@&lt;br /&gt;&lt;&lt;slider AtEg ./atEg 'Extended example ...'&gt;&gt;|
|Custom CSS Class|&lt;html&gt;&lt;code&gt;{{wrappingClass{Text that is now accentuated}}}&lt;/code&gt;&lt;/html&gt;&lt;br /&gt;By default, the text is placed in a &lt;span&gt;. To use a &lt;div&gt; instead, insert a line break before the text (after the single {)&lt;br /&gt;In the CSS:&lt;br /&gt;{{{.wrappingClass {color: red;} }}}|Add .wrappingClass to StyleSheet|
|Any HTML|{{{&lt;html&gt;&lt;span&gt;any&lt;/span&gt;&lt;br /&gt;}}}&lt;br /&gt;{{{&lt;b&gt;valid&lt;/b&gt; &lt;em&gt;xhtml&lt;/em&gt;&lt;/html&gt;}}}|&lt;html&gt;&lt;span&gt;any&lt;/span&gt;&lt;br /&gt;&lt;b&gt;valid&lt;/b&gt; &lt;em&gt;xhtml&lt;/em&gt;&lt;/html&gt;|

!Table Formatting

|!Markup|!Explanation|
| {{{|}}} |Column Seperator |
| {{{!}}} |Heading (Row or Column) |
| {{{&gt;}}} |Column Span |
| {{{~}}} |Row Span |
| {{{|Left |}}} |Left Align |
| {{{| Right|}}} |Right Align|
| {{{| Center |}}} |Center Align |
| {{{|Caption|c}}} |Table Caption (Can be at top or bottom)|
| {{{|Header|h}}} |Marks the row as being a header row (will be wrapped with a {{{&lt;thead&gt;}}} and so all entries are automatically formatted as per {{{|!}}} cells)|
| {{{|Footer|f}}} |Marks the row as being a footer row (will be wrapped with a {{{&lt;tfoot&gt;}}}, no special formatting is pre-defined for this but can be added to your own CSS)|
| {{{|CSSclass|k}}} |Applies a CSS class to the table to allow additional formatting (NB: only works if no whitespace after the k)|
|&gt;|To have a table with no borders at all. Use {{{|noBorder|k}}} with the CSS (in your StyleSheet tiddler):&lt;br /&gt;{{{ .noBorder,.noBorder td,.noBorder th,.noBorder tr{border:0} }}}|
|&gt;|!Sample Table|
|&gt;|{{{|table caption|c}}}&lt;br /&gt;{{{|header|header|h}}}&lt;br /&gt;{{{|text|more text|}}}&lt;br /&gt;{{{|!heading|!heading|}}}&lt;br /&gt;{{{|&gt;|colspan|}}}&lt;br /&gt;{{{|rowspan|left align |}}}&lt;br /&gt;{{{|~| center |}}}&lt;br /&gt;{{{|bgcolor(green):green| right|}}}&lt;br /&gt;{{{|footer|footer|f}}} |
|&gt;|&lt;&lt;tiddler ./tblShow&gt;&gt;|

!Real table:
|table caption|c
|header|header|h
|text|more text|
|!heading|!heading|
|&gt;|colspan|
|rowspan|left align |
|~| center |
|bgcolor(green):green| right|
|footer|footer|f

</pre>
</div>
<div title="Bluetooth Headset" creator="Will" modifier="Will" created="201111060743" modified="201111060748" server.type="file" server.host="" changecount="10">
<pre># Regular Bluetooth (mono bluetooth)
# Stereo Bluetooth
! Regular Bluetooth (mono bluetooth)
*''HSP &amp; HFP profiles''
*talk, but no music

! Stereo Bluetooth
*''&lt;nowiki&gt;A2DP&lt;/nowiki&gt; profile''
*designed for music
*has the ability to be used as &quot;regular&quot; bluetooth</pre>
</div>
<div title="C Format specifiers" creator="YourName" modifier="YourName" created="201110170327" modified="201110170329" server.page.revision="201110170329" server.type="file" server.host="">
<pre>&lt;html&gt;

&lt;table class=&quot;graybox&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;0&quot;&gt;&lt;caption class=&quot;tablecaption&quot;&gt;&lt;strong class=&quot;caption_number&quot;&gt;Table 1&lt;/strong&gt;&amp;nbsp;&amp;nbsp;Format specifiers supported by the &lt;code&gt;NSString&lt;/code&gt; formatting methods and CFString formatting functions&lt;/caption&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th scope=&quot;col&quot; class=&quot;TableHeading_TableRow_TableCell&quot;&gt;&lt;p&gt; Specifier&lt;/p&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot; class=&quot;TableHeading_TableRow_TableCell&quot;&gt;&lt;p&gt;Description&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%@&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Objective-C object, printed as the string returned by &lt;code&gt;descriptionWithLocale:&lt;/code&gt; if available, or &lt;code&gt;description&lt;/code&gt; otherwise. Also works with &lt;code&gt;CFTypeRef&lt;/code&gt; objects, returning the result of the &lt;code&gt;CFCopyDescription&lt;/code&gt; function.&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%%&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;code&gt;'%'&lt;/code&gt; character&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%d&lt;/code&gt;, &lt;code&gt;%D&lt;/code&gt;, &lt;code&gt;%i&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Signed 32-bit integer (&lt;code&gt;&lt;/code&gt;&lt;code&gt;int&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%u&lt;/code&gt;, &lt;code&gt;%U&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 32-bit integer (&lt;code&gt;&lt;/code&gt;&lt;code&gt;unsigned int&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%hi&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Signed 16-bit integer (&lt;code&gt;&lt;/code&gt;&lt;code&gt;short&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%hu&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 16-bit integer (&lt;code&gt;unsigned short&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%qi&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Signed 64-bit integer (&lt;code&gt;long long&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%qu&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 64-bit integer (&lt;code&gt;unsigned long long&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%x&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 32-bit integer (&lt;code&gt;unsigned int&lt;/code&gt;), printed in hexadecimal using the digits 0&#8211;9 and lowercase a&#8211;f&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%X&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 32-bit integer (&lt;code&gt;unsigned int&lt;/code&gt;), printed in hexadecimal using the digits 0&#8211;9 and uppercase A&#8211;F&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%qx&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 64-bit integer (&lt;code&gt;unsigned long long&lt;/code&gt;), printed in hexadecimal using the digits 0&#8211;9 and lowercase a&#8211;f&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%qX&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 64-bit integer (&lt;code&gt;unsigned long long&lt;/code&gt;), printed in hexadecimal using the digits 0&#8211;9 and uppercase A&#8211;F&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%o&lt;/code&gt;, &lt;code&gt;%O&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Unsigned 32-bit integer (&lt;code&gt;unsigned int&lt;/code&gt;), printed in octal&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%f&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;)&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%e&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in scientific notation using a lowercase e to introduce the exponent&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%E&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in scientific notation using an uppercase E to introduce the exponent&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%g&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in the style of &lt;code&gt;%e&lt;/code&gt; if the exponent is less than &#8211;4 or greater than or equal to the precision, in the style of &lt;code&gt;%f&lt;/code&gt; otherwise&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%G&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in the style of &lt;code&gt;%E&lt;/code&gt; if the exponent is less than &#8211;4 or greater than or equal to the precision, in the style of &lt;code&gt;%f&lt;/code&gt; otherwise&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%c&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;8-bit unsigned character (&lt;code&gt;unsigned char&lt;/code&gt;), printed by &lt;code&gt;NSLog()&lt;/code&gt; as an ASCII character, or, if not an ASCII character, in the octal format &lt;code&gt;\\ddd&lt;/code&gt; or the Unicode hexadecimal format &lt;code&gt;\\udddd&lt;/code&gt;, where &lt;code&gt;d&lt;/code&gt; is a digit&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%C&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;16-bit Unicode character (&lt;code&gt;unichar&lt;/code&gt;), printed by &lt;code&gt;NSLog()&lt;/code&gt; as an ASCII character, or, if not an ASCII character, in the octal format &lt;code&gt;\\ddd&lt;/code&gt; or the Unicode hexadecimal format &lt;code&gt;\\udddd&lt;/code&gt;, where &lt;code&gt;d&lt;/code&gt; is a digit&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Null-terminated array of 8-bit unsigned characters. &lt;code&gt;%s&lt;/code&gt; interprets its input in the system encoding rather than, for example, UTF-8. &lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%S&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Null-terminated array of 16-bit Unicode characters&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%p&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Void pointer (&lt;code&gt;void *&lt;/code&gt;), printed in hexadecimal with the digits 0&#8211;9 and lowercase a&#8211;f, with a leading &lt;code&gt;0x&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%L&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Length modifier specifying that a following &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;e&lt;/code&gt;, &lt;code&gt;E&lt;/code&gt;, &lt;code&gt;f&lt;/code&gt;, &lt;code&gt;F&lt;/code&gt;, &lt;code&gt;g&lt;/code&gt;, or &lt;code&gt;G&lt;/code&gt; conversion specifier applies to a &lt;code&gt;long double&lt;/code&gt; argument&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%a&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in scientific notation with a leading &lt;code&gt;0x&lt;/code&gt; and one hexadecimal digit before the decimal point using a lowercase &lt;code&gt;p&lt;/code&gt; to introduce the exponent&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%A&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in scientific notation with a leading &lt;code&gt;0X&lt;/code&gt; and one hexadecimal digit before the decimal point using a uppercase &lt;code&gt;P&lt;/code&gt; to introduce the exponent&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%F&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;64-bit floating-point number (&lt;code&gt;double&lt;/code&gt;), printed in decimal notation&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%z&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Length modifier specifying that a following &lt;code&gt;d&lt;/code&gt;, &lt;code&gt;i&lt;/code&gt;, &lt;code&gt;o&lt;/code&gt;, &lt;code&gt;u&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt;, or &lt;code&gt;X&lt;/code&gt; conversion specifier applies to a &lt;code&gt;size_t&lt;/code&gt; or the corresponding signed integer type argument&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%t&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Length modifier specifying that a following &lt;code&gt;d&lt;/code&gt;, &lt;code&gt;i&lt;/code&gt;, &lt;code&gt;o&lt;/code&gt;, &lt;code&gt;u&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt;, or &lt;code&gt;X&lt;/code&gt; conversion specifier applies to a &lt;code&gt;ptrdiff_t&lt;/code&gt; or the corresponding unsigned integer type argument&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope=&quot;row&quot;&gt;&lt;p&gt;&lt;code&gt;%j&lt;/code&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;Length modifier specifying that a following &lt;code&gt;d&lt;/code&gt;, &lt;code&gt;i&lt;/code&gt;, &lt;code&gt;o&lt;/code&gt;, &lt;code&gt;u&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt;, or &lt;code&gt;X&lt;/code&gt; conversion specifier applies to a &lt;code&gt;intmax_t&lt;/code&gt; or &lt;code&gt;uintmax_t&lt;/code&gt; argument&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;

&lt;/html&gt;</pre>
</div>
<div title="Chrome OS" creator="Will" modifier="Will" created="201111030338" modified="201111030527" server.type="file" server.host="" changecount="3">
<pre>Chrome OS download: 
http://chromeos.hexxeh.net/index.php</pre>
</div>
<div title="Chrome OS on VM" creator="Will" modifier="Will" created="201110250450" modified="201110250452" server.type="file" server.host="" changecount="4">
<pre>1. download Vanilla Nightly Builds image from http://chromeos.hexxeh.net/vanilla.php

2. Use VirtualBox to create a new ''Ubuntu System''. 

3. Use existing disk image, which is the one we downloaded. 

4. Remember to go to OS system =&gt; processor =&gt; Enable PAE. 

5. Run Chrome OS.


Ref: 
http://chromeos.hexxeh.net/vanilla.php
http://chromeos.hexxeh.net/
</pre>
</div>
<div title="Chromium Project" creator="Will" modifier="Will" created="201110180258" modified="201110180258" server.type="file" server.host="" changecount="2">
<pre>Chromium Project

Chromium is an open source web browser project from which [[Google Chrome]] draws its source code.

Chromium is a project, making all releases developmental, with Chrome being the official release.</pre>
</div>
<div title="Confusion about DetailViewController in Master Detail App" creator="Will" modifier="Will" created="201111250124" modified="201111250224" server.type="file" server.host="" changecount="45">
<pre>In Xcode 4.2, the structure of Detail View Controller have significantly changed. 

There are 2 view controllers: 
# Master View Controller
# Detail View Controller

! iPhone Version
The following code demos the use of detail view controller for iPhone:
&lt;&lt;&lt;
''&lt;nowiki&gt;MasterViewController.m&lt;/nowiki&gt;''
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
	    if (!self.detailViewController) {
	        self.detailViewController = [[DetailViewController alloc] initWithNibName:@&quot;DetailViewController_iPhone&quot; bundle:nil];
	    }
        [self.navigationController pushViewController:self.detailViewController animated:YES];
    }
}
&lt;&lt;&lt;
Basically, Detail View Controller is the one that is pushed to screen when a selection is make on Master Table.
&lt;html&gt;

&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397632569/&quot; title=&quot;Confusion about DetailViewController in Master Detail App by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.staticflickr.com/6097/6397632569_45edeb055b_z.jpg&quot; width=&quot;325&quot; height=&quot;640&quot; alt=&quot;Confusion about DetailViewController in Master Detail App&quot;&gt;&lt;/a&gt;

&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397632745/&quot; title=&quot;Confusion about DetailViewController in Master Detail App by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7016/6397632745_29bf059fdb_z.jpg&quot; width=&quot;324&quot; height=&quot;640&quot; alt=&quot;Confusion about DetailViewController in Master Detail App&quot;&gt;&lt;/a&gt;

&lt;/html&gt;
! iPad Version
For iPad though, it is very very tricky. Detail View Controller is actually ''not'' the main view controller. 

Detail View Controller is still able to bu pushed (of course if you dun push, it won't be displayed).
And Main View Controller is the one actually displayed in the main area. 
&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397632955/&quot; title=&quot;Confusion about DetailViewController in Master Detail App by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7011/6397632955_1ff0c74c60_z.jpg&quot; width=&quot;640&quot; height=&quot;502&quot; alt=&quot;Confusion about DetailViewController in Master Detail App&quot;&gt;&lt;/a&gt;

&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6397633167/&quot; title=&quot;Confusion about DetailViewController in Master Detail App by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7033/6397633167_2160aef1cd_z.jpg&quot; width=&quot;640&quot; height=&quot;515&quot; alt=&quot;Confusion about DetailViewController in Master Detail App&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
You have to add the following code:
&lt;&lt;&lt;
''&lt;nowiki&gt;MasterViewController.h&lt;/nowiki&gt;''
#import &lt;UIKit/UIKit.h&gt;
@class DetailViewController;
@interface MasterViewController : UITableViewController

@property (strong, nonatomic) DetailViewController *detailViewController;
__''@property (strong, nonatomic) DetailViewController *mainDetailViewController;''__

@end
&lt;&lt;&lt;
------------------------------------------------------------------------------------------------------------------------------
&lt;&lt;&lt;
''&lt;nowiki&gt;MasterViewController.m&lt;/nowiki&gt;''
__''@synthesize mainDetailViewController;''__
&lt;&lt;&lt;
------------------------------------------------------------------------------------------------------------------------------
&lt;&lt;&lt;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
    else {
        //iPad
        
        MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@&quot;MasterViewController_iPad&quot; bundle:nil];
        UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
        
        DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@&quot;DetailViewController_iPad&quot; bundle:nil];
        UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];
    	
        ///add///
__''        masterViewController.mainDetailViewController = detailViewController;''__
        ///add///
        
        self.splitViewController = [[UISplitViewController alloc] init];
        self.splitViewController.delegate = detailViewController;
        self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];
        
        self.window.rootViewController = self.splitViewController;
    }
    
    [self.window makeKeyAndVisible];
    return YES;
}

&lt;&lt;&lt;
&lt;&lt;&lt;

</pre>
</div>
<div title="CrappStore" creator="Will" modifier="Will" created="201110161217" modified="201111050419" server.page.revision="201110161554" server.type="file" server.host="" changecount="17">
<pre>Instruction on How to Use: 

(This instruction works on Xcode 3.2.6 but DOES NOT work on Xcode 4. )
(works for both iOS 3.4.5 and iOS 5)

1. download http://download.imodzone.net/ipagod/CrappStore.zip (latest version cab be found in google code)

2. unzip CrappStore folder to &quot;/ Developer / Platforms / iPhoneOS.platform / Developer / Library / Xcode / Project Templates / Application /&quot;

3. download the *.ipa file. Make a copy of the *.ipa file and rename the new one to *.zip. Unzip it.

4. go into the unzipped folder and go to /Payload/something.app. Copy the file name without &quot;.app&quot;. This is the only thing we need from the zip file. 

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249807759/&quot; title=&quot;CrappStore-step-3 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6157/6249807759_fc677b6398_z.jpg&quot; width=&quot;640&quot; height=&quot;322&quot; alt=&quot;CrappStore-step-3&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

5. create a new project with CrappStore templet, the project name is the &quot;something&quot; we get from above. Dun name it wrongly.

6. Now we can compile and run on the Device. If there is error &quot;missing SDK&quot;, right click the project name and &quot;get info&quot;. You may see this: 

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6250337236/&quot; title=&quot;CrappStore-step-6 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6217/6250337236_73ee57c141_z.jpg&quot; width=&quot;640&quot; height=&quot;607&quot; alt=&quot;CrappStore-step-6&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

Change it to your current Xcode SDK version. 

7. Now for Xcode 3.2 on iOS4, this should work. You just need to build and run the app. 

For iOS5 though, here should pop-up a code-sign error. So instead of build and run we need to do this following: 

7.1 From menu, select Build =&gt; Build and Archieve.
&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6253484455/&quot; title=&quot;Screen%20shot%202011-10-17%20at%20PM%2009.46.42 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6232/6253484455_c87b00574b.jpg&quot; width=&quot;500&quot; height=&quot;288&quot; alt=&quot;Screen%20shot%202011-10-17%20at%20PM%2009.46.42&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

7.2 There sould be organizer pop up and the app lay under &quot;Archieve&quot;. 
&lt;html&gt;

&lt;/html&gt;
7.3 Now click on &quot;Share&quot; and save the new *.ipa file to desktop.
&lt;html&gt;&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6253484215/&quot; title=&quot;Screen%20shot%202011-10-17%20at%20PM%2009.47.19 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6228/6253484215_8f44d1615a.jpg&quot; width=&quot;500&quot; height=&quot;221&quot; alt=&quot;Screen%20shot%202011-10-17%20at%20PM%2009.47.19&quot;&gt;&lt;/a&gt;

&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6254014910/&quot; title=&quot;Screen%20shot%202011-10-17%20at%20PM%2009.47.28 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6035/6254014910_5a7908d5ef.jpg&quot; width=&quot;411&quot; height=&quot;247&quot; alt=&quot;Screen%20shot%202011-10-17%20at%20PM%2009.47.28&quot;&gt;&lt;/a&gt;

&lt;/html&gt;
7.3 Now drag drop the app to iTunes and syn with iPad. That's done finally!
&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6254015492/&quot; title=&quot;Screen shot 2011-10-17 at PM 09.48.38 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6094/6254015492_c82182e094.jpg&quot; width=&quot;500&quot; height=&quot;384&quot; alt=&quot;Screen shot 2011-10-17 at PM 09.48.38&quot;&gt;&lt;/a&gt;
&lt;/html&gt;



[Note] Very Important

1. About App Files: such apps are tricky. You can delete these apps but the app data is preserved. I had 5GB of movie inside AVPlayerHD before. After I reset iOS, reset iPad, the 5GB data is still there! It's only after I re-installed AVPlayerHD again that I found out all my old movies are still stored on iPad, regardless of the fact that I reset the whole device and all personal data is gone.

</pre>
</div>
<div title="Darwin" creator="Will" modifier="Will" created="201110180212" modified="201110180331" server.type="file" server.host="" changecount="2">
<pre>Darwin is an open source operating system released by Apple in 2000. 

It is composed of code developed by Apple, as well as code derived from NeXTSTEP, BSD, and other free software projects.

Darwin forms the core of [[Mac OS X]], Apple TV, and [[iOS]].</pre>
</div>
<div title="Database" creator="Will" modifier="Will" created="201110280152" modified="201110280205" server.type="file" server.host="" changecount="2">
<pre>''relational'' model VS ''XML''//(extensible markup language)//

DTD - the benefit of &quot;typing&quot;
must check valid/invalid.</pre>
</div>
<div title="DefaultTiddlers" creator="Will" modifier="YourName" created="201110160517" modified="201110161005" server.page.revision="201110161005" server.type="file" server.host="">
<pre>[[Hello Will]]</pre>
</div>
<div title="Double Click to minimize window" creator="Will" modifier="Will" created="201110180254" server.type="file" server.host="" changecount="1">
<pre>Open your System Preferences, then Appearance pane.
Check the box &quot;Double-click a window's title bar to minimize&quot;</pre>
</div>
<div title="F&amp;B" creator="Will" modifier="Will" created="201110310220" modified="201110310238" server.type="file" server.host="" changecount="6">
<pre>[[P/E ratio]]
[[market capitalization]]
[[An example of P/E ratio and market capitalization]]

[[shares outstanding]]</pre>
</div>
<div title="File Type: Device files" creator="Will" modifier="Will" created="201110301752" modified="201110301754" server.type="file" server.host="" changecount="4">
<pre>[[Unix Files]]
|First Character|c
|Character|File Type|h
|-|regular file|
|l|symbolic link|
|c|character special|
|b|block special|
|p|named pipe|
|d|directory|
# Character Special Files (c) - means communication is 1-character at a time. //&quot;raw devices&quot;//
# Block Special Files (b) - transfer by blocks

</pre>
</div>
<div title="File Type: Links" creator="Will" modifier="Will" created="201110270810" modified="201110301752" server.type="file" server.host="" changecount="10">
<pre>[[Unix Files]]
|First Character|c
|Character|File Type|h
|-|regular file|
|l|symbolic link|
|c|character special|
|b|block special|
|p|named pipe|
|d|directory|

! Links
!!! hard link
#only point to file, not directory
#indistinguishable from original file 
''hard link is considered as regular file using ''&quot;//ls -l //&quot; command
&lt;&lt;&lt;
created via //&quot;ln&quot;// command
{{{
ln src target
}}}
eg.
$ ln apple banana
&lt;&lt;&lt;
#can move the link file around, still linked to original
#delete a link, quite ok
#delete original file, the content remain on disk until the link is deleted.
{{{
If a file has 3 hard links to it, removing the file will not free up disk space. 
You must remove all 3 hard links.
}}}
!!! symbolic link
#it's just a path name
#the link is either relative or absolute
&lt;&lt;&lt;
created via //&quot;ln -s&quot;// command
{{{
ln -s src target
}}}
eg.
$ echo Persimmons are bitter until they ripen &gt; persimmon 
$ ln &#8211;s persimmon bitter 
$ cat bitter 
Persimmons are bitter until they ripen
$ mv bitter .. 
$ cat ../bitter 
cat: ../bitter: No such file or directory 
$ ls -l ../bitter 
lrwxrwxrwt 1 root wheel 9 Jan 13 00:16 ../bitter@ -&gt; persimmon
&lt;&lt;&lt;
#''cannot'' move the link file around freely 
#delete a link, quite ok
#delete or move original file, the link died.

</pre>
</div>
<div title="Gesture Recognizer does not work" creator="Will" modifier="Will" created="201111250232" modified="201111250234" server.type="file" server.host="" changecount="5">
<pre>If you did the following 
&lt;&lt;&lt;
self.myPinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchHandler:)];
[self.displayText addGestureRecognizer:self.myPinch];
&lt;&lt;&lt;
and everything else you can think of, but still not working, you may try add this line to the object that listens to gesture. 
&lt;&lt;&lt;
''self.displayText.userInteractionEnabled = YES;''
&lt;&lt;&lt;
and should work now.</pre>
</div>
<div title="GettingStarted" creator="YourName" modifier="Will" created="201110160954" modified="201110161008" server.page.revision="201110161008" server.type="file" server.host="">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;</pre>
</div>
<div title="Gray screen appears during startup" creator="Will" modifier="Will" created="201110161110" modified="201110161111" server.page.revision="201110161111" server.type="file" server.host="">
<pre>More on [[Mac troubleshooting]]

Perform a Safe Boot
Simply performing the Safe Boot may resolve this issue.

  1. Shut down your Mac. If necessary, hold your Mac's power button for several seconds to force it to power down.
  2. Start your Mac, then immediately hold the Shift key. This performs a Safe Boot. Advanced tip: If you want to see the status of a Safe Boot as it progresses, you can hold Shift-Command-V during start up (instead of just Shift).
Note: A Safe Boot takes longer than a typical start up because it includes a disk check and other operations.
 
  3. If your Mac starts up as expected, immediately try restarting.
If the Safe Boot does not work, or the restart after a successful Safe Boot does not work, go to the next section.

Resetting PRAM and NVRAM
  1. Shut down the computer.
  2. Locate the following keys on the keyboard: Command, Option, P, and R. You will need to hold these keys down simultaneously in step 4.
  3. Turn on the computer.
  4. Press and hold the Command-Option-P-R keys. You must press this key combination before the gray screen appears.
  5. Hold the keys down until the computer restarts and you hear the startup sound for the second time.
  6. Release the keys.
Your computer's PRAM and the NVRAM are reset to the default values. The clock settings may be reset to a default date on some models.

If the gray screen issue persists, go to the next section.

Start from your Mac OS X Install disc; use Disk Utility

  1. Insert your Mac OS X 10.4 or 10.5 installation disc (if you have discs with both versions, use whichever is closest to the Mac OS X version installed on your Mac; do not use a startup disc which came with a different Mac or which contains an earlier version of Mac OS X).
  2. Shut down your Mac. If necessary, hold your Mac's power button for several seconds to force it to power down.
  3. Start up your Mac while holding the C key to start from the disc.
  4. Once started from the disc, choose Disk Utility from the Utility menu.
Note: If the gray screen issue persists and you can't start from the disc, go to the &quot;Disconnect peripheral devices&quot; section.
  5. In Disk Utility, perform a disk repair of your Mac OS X volume; if no issues are found, perform a permissions repair as well. If issues are found during the disk repair, try repairing again.
  6. After the Disk Utility operations are complete, restart without holding any keys.


ref:
http://support.apple.com/kb/TS2570</pre>
</div>
<div title="HP DV6700 Series" creator="Will" modifier="Will" created="201110161026" modified="201110161104" server.page.revision="201110161104" server.type="file" server.host="">
<pre>The [[HP DV6700 Series]], released in 2008, was marketed by HP as an &quot;Entertainment Notebook PC&quot; with an emphasis on multimedia capability.

The DV6700t is the base model in the series.

[[Hp DV6773tx]]
[[dv6700's whole range of models]]

&lt;html&gt;
&lt;h1&gt;The Specs:&lt;/h1&gt;
&lt;h2&gt;General&lt;/h2&gt;
             &lt;ul&gt;
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Processor&lt;/strong&gt;&lt;span&gt;Core 2 Duo&lt;/span&gt;&lt;/li&gt;
                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Motherboard chipset&lt;/strong&gt;&lt;span&gt;Intel 965PM&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Processor number&lt;/strong&gt;&lt;span&gt;T8300&lt;/span&gt;&lt;/li&gt;

                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Centrino&lt;/strong&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Processor speed&lt;/strong&gt;&lt;span&gt;2.4GHz&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Connectivity&lt;/h2&gt;
             &lt;ul&gt;
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Ports&lt;/strong&gt;&lt;span&gt;3 x USB 2.0; FireWire; VGA port; S-video port; HDMI&lt;/span&gt;&lt;/li&gt;

                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Modem&lt;/strong&gt;&lt;span&gt;56kbps&lt;/span&gt;&lt;/li&gt;
                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Built-in devices&lt;/strong&gt;&lt;span&gt;ExpressCard slot&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Wireless LAN&lt;/strong&gt;&lt;span&gt;802.11a, 802.11b, 802.11g, 802.11n&lt;/span&gt;&lt;/li&gt;
                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Bluetooth&lt;/strong&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Ethernet&lt;/strong&gt;&lt;span&gt;10/100&lt;/span&gt;&lt;/li&gt;

                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Infrared&lt;/strong&gt;&lt;span&gt;No&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Webcam&lt;/strong&gt;&lt;span&gt;No&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Display&lt;/h2&gt;
             &lt;ul&gt;
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Graphics hardware&lt;/strong&gt;&lt;span&gt;Nvidia GeForce Go 8400M GS&lt;/span&gt;&lt;/li&gt;

                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Amt of video RAM&lt;/strong&gt;&lt;span&gt;256MB&lt;/span&gt;&lt;/li&gt;
                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;LCD technology&lt;/strong&gt;&lt;span&gt;transflective (widescreen)&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Diagonal screen size&lt;/strong&gt;&lt;span&gt;15.4 inch&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Memory/Storage&lt;/h2&gt;
             &lt;ul&gt;

                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Optical drive&lt;/strong&gt;&lt;span&gt;Blu-ray ROM drive&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Card Reader&lt;/strong&gt;&lt;span&gt;SD, MMC, MS, MS Pro, xD&lt;/span&gt;&lt;/li&gt;
                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Amt of RAM&lt;/strong&gt;&lt;span&gt;2048 MB&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Hard drive&lt;/strong&gt;&lt;span&gt;250 GB&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Multimedia&lt;/h2&gt;

             &lt;ul&gt;
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Sound hardware&lt;/strong&gt;&lt;span&gt;Integrated audio&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Remote&lt;/strong&gt;&lt;span&gt;No&lt;/span&gt;&lt;/li&gt;
                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;DVD/MP3 without bootup&lt;/strong&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;TV tuner&lt;/strong&gt;&lt;span&gt;No&lt;/span&gt;&lt;/li&gt;

                    
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Jacks&lt;/strong&gt;&lt;span&gt;mic-in, earphone-out&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Power Supply&lt;/h2&gt;
             &lt;ul&gt;
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Battery type(s) included&lt;/strong&gt;&lt;span&gt;6-cell Lithium ion&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Software&lt;/h2&gt;

             &lt;ul&gt;
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Operating system&lt;/strong&gt;&lt;span&gt;Win Vista Home Premium&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Warranty&lt;/h2&gt;
             &lt;ul&gt;
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Warranty&lt;/strong&gt;&lt;span&gt;One-year warranty&lt;/span&gt;&lt;/li&gt;
                    
                 
             &lt;/ul&gt; 
                       &lt;br clear=&quot;all&quot;&gt;&lt;h2&gt;Chassis&lt;/h2&gt;

             &lt;ul&gt;
                                    
                                         &lt;li class=&quot;even&quot;&gt;&lt;strong&gt;Weight w/battery&lt;/strong&gt;&lt;span&gt;2.78 kg&lt;/span&gt;&lt;/li&gt;
                    
                                    
                      
                      &lt;li&gt;&lt;strong&gt;Dimensions&lt;/strong&gt;&lt;span&gt;357 x 254 x 43 mm&lt;/span&gt;
&lt;/html&gt;</pre>
</div>
<div title="HTML" creator="Will" modifier="Will" created="201201151819" server.type="file" server.host="" changecount="1">
<pre>[[How to easily view source code in Firefox?]]</pre>
</div>
<div title="Hackintosh" creator="Will" modifier="Will" created="201110161045" modified="201110181206" server.page.revision="201110170315" server.type="file" server.host="" changecount="5">
<pre>This post is meant for bootable Hackintosh. For VM approach, refer to [[Hackintosh on VM]]

Pre-install:


Post-install:

Important tool: [[Multi-beast]]
[[Hackintosh Timer Machine]]
[[Backup Kext]]
[[Wifi solution for Hackintosh (PdaNet)]]
[[Hackintosh Sound Card driver]]
[[Hackintosh Keyboard Match]]

Unsolved Problems: 
1. Wifi (current solution: [[Wifi solution for Hackintosh (PdaNet)]])
2. Sleep Problem - do not use [[SleepEnabler]]
</pre>
</div>
<div title="Hackintosh Keyboard Match" creator="Will" modifier="Will" created="201110161123" modified="201110161127" server.page.revision="201110161127" server.type="file" server.host="">
<pre>This apply for a complete Hackintosh, not VM 

on HP keyboard :
&lt;html&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tr&gt;
&lt;th&gt;on Windows&lt;/th&gt;
&lt;th&gt;ctrl&lt;/th&gt;
&lt;th&gt;Fn&lt;/th&gt;
&lt;th&gt;Windows&lt;/th&gt;
&lt;th&gt;alt&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;b&gt;on Mac&lt;/b&gt;&lt;/td&gt;
&lt;td&gt;control&lt;/td&gt;
&lt;td&gt;Fn&lt;/td&gt;
&lt;td&gt;option&lt;/td&gt;
&lt;td&gt;command&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt; 
&lt;/html&gt;</pre>
</div>
<div title="Hackintosh Sound Card driver" creator="Will" modifier="Will" created="201110161119" modified="201110161122" server.page.revision="201110161122" server.type="file" server.host="">
<pre>Go to Multibeast and install : 

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249041379/&quot; title=&quot;hackintosh-sound-driver by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6155/6249041379_9ec6211675_m.jpg&quot; width=&quot;232&quot; height=&quot;234&quot; alt=&quot;hackintosh-sound-driver&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

Sound working after install this (no boot required). 

Cannot adjust speaker's volume. Headphone volume can be adjusted. 
</pre>
</div>
<div title="Hackintosh Timer Machine" creator="Will" modifier="Will" created="201110161115" server.page.revision="201110161115" server.type="file" server.host="">
<pre>For Snow Leopard, the time machine method works. 
Just insert SL DVD, go to file menu and select &quot;restore from Time machine&quot;
and That's it!

Basic Procedure is like this: 

In the retail DVD, at the menu there is an option to restore from Time Machine. You should be back and running within one hour. Keep in mind that Time Machine does not correctly backup Chameleon or other bootloader, so you might want to have a back up of that too. I use Terminal again from within the retail DVD to fix bootloader issues after the restore. 
(or can do it in the following way) Use iboot to boot the restored drive and install any chameleon flavor you prefer. 
(If anything bad happens, this can help: ) Install Chimera on the Time Machine drive. That way you can use it to boot into your restored drive.

Is it good to use Time Machine method to deploy on another machine?

Well, no. 

I think you could make it work but it's not the right way and could be a pain as you already have it set to a specific hardware. You should install a fresh lion/sl and then import your account and stuff from the MacPro drive with the migration assistant. 

But for Lion, this DOES NOT WORK, and will cause serious problems: 

[quote] 

My Lion 10.7.1 had a problam with Disk Utility and I needed to restore from Time Machine with the 10.6.0 installation disk + iBoot.
I did, but when I tried to boot the restored partition with iBoot, i get an instant reboot. Can't even look at it with verbose. I tried all boot flags I ever used and nothing. No way to make it boot.

I'm now reinstalling from the zero. I just hope to not need a full system restore in the future!

[quote]

How to solve the problem for Lion: 

iBoot doesn't work with lion (at least for me), you'll have to create a bootable USB with a chameleon installer or, if you have the Time Machine partition in another HD, install chameleon in that partition too so you can then boot from it. Also I wouldn't recommend restoring Lion with the TM from SL, maybe they changed something that may not restore the partition correctly and you'll be :banghead: for days for nothing.
I've restored the &quot;InstallESD&quot; image included in the Lion installer to a partition, so I can always boot from it to reinstall, restore or correct any.


http://www.tonymacx86.com/viewtopic.php?f=7&amp;t=5979
</pre>
</div>
<div title="Hackintosh on VM" creator="YourName" modifier="YourName" created="201110170316" modified="201110170321" server.page.revision="201110170321" server.type="file" server.host="">
<pre>Need: 
1. empireEFI - this is the booter. I think iBoot is the same function but I used this one. it's great.
2. Retailed version Mac OS X 10.6 - I used image download from internet. I have one disc which comes with iMac, cannot use cuz not retailed version. 
That's it!


How-to:

Install Virtual Box.
Create Mac OS Server.
&lt;html&gt;&lt;b&gt;Tick off &quot;Enable EFI(special OS only)&quot;&lt;/b&gt;&lt;/html&gt; under System Tab in Settings
Allocate at lease 20GB and give more than 1GB memory. 
If want Xcode3, ALLOCATE 30GB SPACE cuz Xcode itself is 10GB and Mac OS X is another 10+GB.
Later set the display acceleration RAM to be highest (128M)
Enable 3D.
In setting=&gt;storage Tab, can change ISO or DMG file, which works like &quot;changing the disk&quot;
After changed disk, press F5 so that empireEFI will read the new disk.


Problems encountered:

1.Virtualisation 

Error Message: 
     Mac OS X is not supported with software virtualization. To run Mac OS X you need a host on which VMware Player supports hardware virtualization OR VT-x/AMD_V hardware has been enabled, but is not operational.Certain guests (e.g. OS/2 and QNX) require this feature. Please ensure that you have enabled VT-x/AMD_V properly in the BIOS of your host computer.
Cause:
          The Hardware Virtualisation is not enabled or not supported.

After search the net, I found my processor do support Hardware Virtualisation:

  Intel Core 2 Duo
  (3M Cache, 2.40 GHz, 800 MHz FSB)
  Intel&#174; Virtualization Technology (Intel&#174; VT) --------------------- YES

     Increasing manageability, security, and flexibility in IT environments, virtualization technologies like hardware-assisted Intel&#174; Virtualization Technology (Intel&#174; VT) combined with software-based virtualization solutions provide maximum system utilization by consolidating multiple environments into a single server or PC. By abstracting the software away from the underlying hardware, a world of new usage models opens up that reduce costs, increase management efficiency, strengthen security, while making your computing infrastructure more resilient in the event of a disaster.


To enable it, go to BIOS page at startup. (Hit F9 for HP DV6700)
All BIOS's are different and call this feature different names, but It will either be called:

   * AMD-V
   * Intel-VT
   * VT-x
   * Virtualisation Technology
   * Hardware Virtualisation

Or something very similar. Make sure this is enabled and try again. 

Reference: http://iiju.co.uk/mac/


2. stuck with ACPI table not found: DSDT.aml

There is some answers on the forum, but my solution is simple and works: just hit ENTER and proceed. That's it.


3. Shared Folder

In Finder, click on Go and Connect to Server in Snow Leopard menu.

Type, &quot;smb:// 192.168.56.1&quot;
what's smb:// 192.168.56.1? It's the Windows Host IP

Next Screen will pop up for windows authentication; provide windows user name and password for account having read/write access.

Reference: http://www.sysprobs.com/mac-os-guest-virtualbox-326-snow-leopard-1064-windows-7-32-bit (post-installation part 3)


4. Screen resolution:
refer to second link from the top or 
http://www.sysprobs.com/increase-mac-os-virtual-machine-screen-resolution-virtualbox-vmware-player

Either type the follow in during empireEPI booting: 
&quot;Graphics Mode&quot;=&quot;1280x1024x32&quot;

Or

Modify the following file:
/Library/Preferences/SystemConfiguration/com.apple.Boot.plist
&lt;key&gt;Graphics Mode&lt;/key&gt;
&lt;string&gt;1280x1024x32&lt;/string&gt;


http://www.sysprobs.com/mac-os-guest-virtualbox-326-snow-leopard-1064-windows-7-32-bit
http://blog.zhaojie.me/2010/09/how-to-install-mac-os-x-snow-leopard-on-virtualbox.html
</pre>
</div>
<div title="Hello Will" creator="YourName" modifier="Will" created="201110161003" modified="201111030303" server.page.revision="201110170302" server.type="file" server.host="" changecount="21">
<pre>This is a personal wiki page of WIll.

Most of the posts in this wiki are originally written by ''Will''. Some materials are copied from the internet thus the reliability of information cannot be guaranteed. The purpose of this wiki is for self-reference only.

Add a new Catagory: 
* [[MainMenu]] </pre>
</div>
<div title="How to add Computer Explorer to Windows 7 taskbar" creator="Will" modifier="Will" created="201110161320" modified="201202291858" server.page.revision="201110161320" server.type="file" server.host="" changecount="12">
<pre>! Recommand
1. (this step is optional) go to desktop =&gt; right click =&gt; personalise =&gt; (right-side bar)change desktop icons =&gt; uncheck Computer.

2. ''Create a shortcut: ''
&lt;nowiki&gt;%SystemRoot%\explorer.exe shell:MyComputerFolder &lt;/nowiki&gt;

3. ''Cange icon (optional)''
In property window, paste the following icon address
&lt;nowiki&gt;%SystemRoot%\System32\shell32.dll&lt;/nowiki&gt;
and select a beautiful Computer-look icon.

4. pin it.


! Another look
# Right click on the taskbar . Select Toolbars menu and click new toolbar
# Choose a folder window &#8211; select &#8220;Computer&#8221; as folder and click &#8220;Select Folder&#8221; .</pre>
</div>
<div title="How to add MediaWiki plugin to TiddlyWiki" creator="Will" modifier="Will" created="201110240632" modified="201110251902" server.type="file" server.host="" changecount="8">
<pre>! How to add MediaWiki plugin to TiddlyWiki

1. Open your wiki, click &quot;New Tiddler&quot;.
2. Title, put in a random name (is it really random?).
3. Content, paste the source code of the plugin.
4. Last but most important, add the tag &quot;systemConfig&quot; without quotation.
5. Finished. Now create a new tidier, tag it with MediaWikiFormat. You can start to write in MediaWiki now.
6. YOU HAVE TO RELAUNCH.
7. Done.

http://martinswiki.com/


! Problem
MediaWiki plug does not support anchors, thus it's very inconvenient to use. 
So dun use it.</pre>
</div>
<div title="How to change layout of Mail to Vertical display" creator="YourName" modifier="YourName" created="201110170651" modified="201110170652" server.page.revision="201110170652" server.type="file" server.host="">
<pre>Use the app called &quot;Letterbox&quot;

1. Download. Double-click the plugin: Letterbox.mail bundle
2. Install relaunch. 
3. Done.</pre>
</div>
<div title="How to change user name(home directory name) on Mac" creator="Will" modifier="Will" created="201111170601" modified="201111170612" server.type="file" server.host="" changecount="8">
<pre>(follow the instructions here http://support.apple.com/kb/ht1428)

#    ''Enable the root'' user.  [[How to enable/disable root user on Mac]]
#    Log off and log in, select &quot;other&quot; account. Name is &quot;root&quot; and password is root password.
#    Navigate to Finder main disk /Users.
#    Select the Home folder that you want change, and rename it. (must all lowercase with no spaces)
#    Go to System Preferences, Accounts and create a new user with the name just renamed to. (remember on the top select &quot;admin&quot; instead of standard)
#    &quot;A folder in the Users folder already has the name 'account name'.&quot; Click OK.
#    Log Out and log in the new account. 
#    Now delete the original user account.
#    ''Disable the root'' user.  [[How to enable/disable root user on Mac]]

* [Note] Dropbox got problem linking to the home directory folder after this action. </pre>
</div>
<div title="How to combine 2 pdf files" creator="YourName" modifier="YourName" created="201112281734" server.type="file" server.host="" changecount="1">
<pre>This cannot be achieve in Microsoft Word. 

Have to use Foxit PDF Editor.

A blank page can be copied and pasted. Simply insert the pages into the other PDF if there is not 200 pages. </pre>
</div>
<div title="How to configure Visual Studio to display line number" creator="YourName" modifier="YourName" created="201302191851" modified="201302191851" server.type="file" server.host="" changecount="2">
<pre>This is based on Visual Studio 2010 Pro
# Toos -&gt; Options
# Text Editor -&gt; C# -&gt; General
# select &quot;Line Number&quot;</pre>
</div>
<div title="How to display hidden files in Mac OS" creator="Will" modifier="Will" created="201110170903" modified="201110170904" server.type="file" server.host="" changecount="5">
<pre>&lt;html&gt;&lt;p&gt;
To set system to display hidden files:&lt;br&gt;
     $defaults write com.apple.finder AppleShowAllFiles true&lt;br&gt;
     $killall Finder&lt;/p&gt;
&lt;p&gt;
To hide all hidden files, just set to false. 
&lt;/p&gt;&lt;/html&gt;</pre>
</div>
<div title="How to download streaming video using Safari activity monitor" creator="YourName" modifier="YourName" created="201208301849" server.type="file" server.host="" changecount="1">
<pre>Very easy! 

Just press Command-Option-A</pre>
</div>
<div title="How to easily view source code in Firefox?" creator="Will" modifier="Will" created="201201151819" server.type="file" server.host="" changecount="1">
<pre>Command + U</pre>
</div>
<div title="How to enable/disable root user on Mac" creator="Will" modifier="Will" created="201111170611" modified="201111170611" server.type="file" server.host="" changecount="2">
<pre>! Enable
#    From the Apple menu choose System Preferences....
#    From the View menu choose Accounts.
#    Click on the lock and authenticate with an administrator account.
#    Click Login Options....
#    Click the &quot;Edit...&quot; or &quot;Join...&quot; button at the bottom right.
#    Click the &quot;Open Directory Utility...&quot; button.
#    Click the lock in the Directory Utility window.
#    Enter an administrator account name and password, then click OK.
#    Choose Enable Root User from the Edit menu.
#    Enter the root password you wish to use in both the Password and Verify fields, then click OK.

! Disable 
#    From the Apple menu choose System Preferences....
#    From the View menu choose Accounts.
#    Click on the lock and authenticate with an administrator account.
#    Click Login Options....
#    Click the &quot;Edit...&quot; or &quot;Join...&quot; button at the bottom right
#    Click the &quot;Open Directory Utility...&quot; button.
#    Click the lock in the Directory Utility window.
#    Enter an administrator account name and password, then click OK.
#    Choose Disable Root User from the Edit menu. 
</pre>
</div>
<div title="How to get Max OS X - Lion disc image" creator="Will" modifier="Will" created="201110250646" server.type="file" server.host="" changecount="1">
<pre>Go to Applications

Right-click the installer =&gt; Show Package Contents

Contents =&gt; Shared Support =&gt; InstallESD.dmg. This is the one. </pre>
</div>
<div title="How to get VM work Full Screen on External Display" creator="Will" modifier="Will" created="201111030554" modified="201111030751" server.type="file" server.host="" changecount="5">
<pre>Quite simple this one ==&gt;

#    Fullscreen (Host+F)
#    Hidden Menu (Host+Home. This only works in full screen)
#    View&gt;Virtual Screen 1&gt;Use Host Screen 2

For more on External Display, look at [[How to use iPad as an external display (both PC and Mac)]]</pre>
</div>
<div title="How to increase Dropbox size with VM" creator="Will" modifier="Will" created="201202191250" modified="201202191254" server.type="file" server.host="" changecount="5">
<pre># log in dropbox and invite friends by email (the email address do not necessarily be in your possession, but gotta be unique)
# without any reference link or anything, get another computer and go to dropbox.com to register, with the email just now invites by me. 
# after the registration, downloading dropbox is required. After one of the local disk have been connected to online dropbox, the dropbox size of me will increase by 250MB. 
# for the last 2 step, alternatively I can download dropbox first, and then register inside the software welcome page. As i mentioned, no reference link needed. 

! Very Important
*How dropbox identifies different computers is by the computer ID. So this is where VM comes into usage. 
*If one computer link to 2 different dropbox account, the second one will be non-eligible for increase storage size. But if we use same disk image file to create 2 different VM, with different names, the computer ID will be different. 
*So I copied one disk image 20 times. I built 20 VM with all different names. Then, each of them register a new account. After doing all these, the 20 VM can be just deleted - no pain at all. 
</pre>
</div>
<div title="How to install Guest Additions in Linux VM" creator="Will" modifier="Will" created="201111030600" server.type="file" server.host="" changecount="1">
<pre>! Installing Guest Additions on Ubuntu

Follow these steps to install the Guest Additions on your Ubuntu virtual machine:

    Login as ubuntu;
#    Click on Applications/System/Terminal (or on Applications/Terminal, if you are using the 6.06.1 Dapper Drake release);
#    Update your APT database with'' sudo apt-get update'', and typing your password, if requested;
#    Install the latest security updates with'' sudo apt-get upgrade'';
#    Install required packages with'' sudo apt-get install build-essential module-assistant'';
#    Configure your system for building kernel modules by running'' sudo m-a prepare'';
#    Click on Install Guest Additions&#8230; from the Devices menu, then choose to browse the content of the CD when requested.
#    Run ''&lt;nowiki&gt; sudo sh /media/cdrom/VBoxLinuxAdditions.run &lt;/nowiki&gt;''</pre>
</div>
<div title="How to install Parallel tools in Ubuntu" creator="Will" modifier="Will" created="201203111757" modified="201203111800" server.type="file" server.host="" changecount="8">
<pre>1. Open terminal and run the following
&lt;nowiki&gt;# sudo apt-get install linux-headers-$(uname -r) build-essential &lt;/nowiki&gt;

2. Click the menu &quot;Virtual Machine&quot; and choose &quot;Install Parallels Tools&quot;

3. Go to following directory
&lt;nowiki&gt;cd /media/Parallels\ Tools/ &lt;/nowiki&gt;

4. Run the following
&lt;nowiki&gt;./install &lt;/nowiki&gt;
maybe need to sudo first, or su.</pre>
</div>
<div title="How to make and run an executable" creator="Will" modifier="Will" created="201110270634" modified="201110270634" server.type="file" server.host="" changecount="3">
<pre>!to make an excutable:
1. make a executable file by the follow command:
$ chmod a+x somefilename
2. add magic line to first line of script:
&lt;nowiki&gt;#! /bin/sh

!to run an executable script: 
point to the entire directory cuz mostly likely your current directory is not in your $PATH.
$ Desktop/somefilename
</pre>
</div>
<div title="How to make charts in Excel" creator="Will" modifier="Will" created="201111291930" modified="201111291939" server.type="file" server.host="" changecount="5">
<pre>2 examples: 
!!! example 1
&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426495611/&quot; title=&quot;Screen shot 2011-11-30 at AM 03.26.31 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7163/6426495611_ec9dc54d42.jpg&quot; width=&quot;347&quot; height=&quot;206&quot; alt=&quot;Screen shot 2011-11-30 at AM 03.26.31&quot;&gt;&lt;/a&gt;
&lt;/html&gt;
!!! example 2
&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426495765/&quot; title=&quot;Screen shot 2011-11-30 at AM 03.26.37 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.staticflickr.com/6041/6426495765_0f0a823cbc.jpg&quot; width=&quot;356&quot; height=&quot;258&quot; alt=&quot;Screen shot 2011-11-30 at AM 03.26.37&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

!!! How to make a pie chart with percentage value shown

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426338035/&quot; title=&quot;1 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7027/6426338035_e3225fcc87_z.jpg&quot; width=&quot;640&quot; height=&quot;431&quot; alt=&quot;1&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426338277/&quot; title=&quot;2 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.staticflickr.com/6236/6426338277_30e2e63bf7.jpg&quot; width=&quot;460&quot; height=&quot;340&quot; alt=&quot;2&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426338787/&quot; title=&quot;3 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7005/6426338787_16b64fb7c9_z.jpg&quot; width=&quot;635&quot; height=&quot;640&quot; alt=&quot;3&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

!!! How to make a combined chart with Histogram and Scatter in same diagram

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426339251/&quot; title=&quot;2.1 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7172/6426339251_138543585f_z.jpg&quot; width=&quot;640&quot; height=&quot;265&quot; alt=&quot;2.1&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426546497/&quot; title=&quot;2.2 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7146/6426546497_185450e803.jpg&quot; width=&quot;397&quot; height=&quot;245&quot; alt=&quot;2.2&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426339527/&quot; title=&quot;2.3 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7033/6426339527_a55f9f34ed.jpg&quot; width=&quot;473&quot; height=&quot;454&quot; alt=&quot;2.3&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426340035/&quot; title=&quot;2.4 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7143/6426340035_dc8d658af8_z.jpg&quot; width=&quot;516&quot; height=&quot;600&quot; alt=&quot;2.4&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6426340487/&quot; title=&quot;2.5 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.staticflickr.com/6048/6426340487_cea3839bbf_z.jpg&quot; width=&quot;545&quot; height=&quot;640&quot; alt=&quot;2.5&quot;&gt;&lt;/a&gt;
&lt;/html&gt;</pre>
</div>
<div title="How to open current directory from Terminal in Mac" creator="Will" modifier="Will" created="201110170905" modified="201110170905" server.type="file" server.host="" changecount="2">
<pre>Open current directory in Finder:
    finder .
</pre>
</div>
<div title="How to open current directory from Ubuntu Terminal" creator="Will" modifier="Will" created="201110170902" server.type="file" server.host="" changecount="1">
<pre>    $nartilus .
</pre>
</div>
<div title="How to open up Marketplace Test Kit" creator="YourName" modifier="YourName" created="201206100910" modified="201206100910" server.type="file" server.host="" changecount="2">
<pre># In solution Explorer, select the project name. (There can be more than one project in a solution)
# Go to 'Project' menu, and choose the 'Open Marketplace Test Kit' option.</pre>
</div>
<div title="How to press Delete Key in Mac Wireless keyboard or Macbook Keyboard" creator="Will" modifier="Will" created="201111141716" server.type="file" server.host="" changecount="1">
<pre>Fn + delete</pre>
</div>
<div title="How to quickly go to User Home directory in Terminal" creator="Will" modifier="Will" created="201110260620" server.type="file" server.host="" changecount="1">
<pre>type: 
{{{
cd
}}}
</pre>
</div>
<div title="How to record Mac keyboard press" creator="Will" modifier="Will" created="201111040334" modified="201111040335" server.type="file" server.host="" changecount="2">
<pre>Use a software called ''//Keyboard And Mouse Recorder//''

Note: 

# the recording windows will always be shown while recording, even put on other window view.
# both mouse movement and keyboard press will be ''EXACTLY'' recorded.
# the password box is not recorded.</pre>
</div>
<div title="How to save a single page from a PDF document" creator="Will" modifier="YourName" created="201112090406" modified="201112281732" server.type="file" server.host="" changecount="2">
<pre>! On Mac

Click on a single page, hit apple-c for copy, then hit apple-n for new.

That's it.

! On Windows

Use Foxit PDF Editor to do it. Very easy.</pre>
</div>
<div title="How to set environment variables in XP" creator="Will" modifier="Will" created="201201141032" server.type="file" server.host="" changecount="1">
<pre>* right click My Computer
* Properties
* Tab &quot;Advanced&quot;
* Environment Variables at the bottom of the page.</pre>
</div>
<div title="How to set themes in TiddlyWiki" creator="Will" modifier="Will" created="201110190119" modified="201110190120" server.type="file" server.host="" changecount="4">
<pre>1. go to http://tiddlythemes.com
2. select one theme and click &quot;details&quot;
3. click &quot;installation&quot;
4. click &quot;this&quot; in line 2
5. copy and replace the following 2 tiddly to your own TiddlyWiki:
PageTemplate
StyleSheet
6. done</pre>
</div>
<div title="How to solve Disk Utility Partition Failed Error" creator="YourName" modifier="YourName" created="201207291257" modified="201207291258" server.type="file" server.host="" changecount="3">
<pre>Command + S during booting, enter Single User Mode

At Command prompt, type: /sbin/fsck -fy

When completed, type: reboot or exit

Done
</pre>
</div>
<div title="How to start a specific shell command" creator="Will" modifier="Will" created="201110270633" modified="201110270633" server.type="file" server.host="" changecount="3">
<pre>!to start an Interactive Shell:
$ /bin/bash
!to start an Non-interactive Shell:
$ /bin/bash somefilename
(somefilename is a script)
</pre>
</div>
<div title="How to uninstall Xcode 4?" creator="YourName" modifier="Will" created="201110160942" modified="201110161059" server.page.revision="201110161059" server.type="file" server.host="">
<pre>1. open Terminal

2. type:
&lt;html&gt;
&lt;p&gt;
sudo /Developer/Library/uninstall-devtools --mode=all

&lt;/p&gt;
&lt;/html&gt;
3. type in password and done.</pre>
</div>
<div title="How to use iPad as an external display (both PC and Mac)" creator="Will" modifier="Will" created="201111030308" modified="201111030752" server.type="file" server.host="" changecount="9">
<pre># download the app called //''&quot;Air Display&quot;''//
# download the Mac-side or Pc-side application
# connect 2 device thru the same wifi (if different, maybe can manually connect also)
# run both-end app

The display on Mac is great, but on Windows is a bit laggy. 
The resolution of Windows also changes. ''__Windows sucks!__''</pre>
</div>
<div title="Hp DV6773tx" creator="Will" modifier="Will" created="201110161017" modified="201110171123" server.page.revision="201110161323" server.type="file" server.host="" changecount="6">
<pre>HP Pavilion dv6773tx Entertainment Notebook PC

[[Hp DV6773tx CPU-Z Spec]]

[[HP DV6700 Series]]
[[suffix: tx]]
[[More about HP dv6773 battery]]


&lt;html&gt;
&lt;span class=&quot;heading&quot; id=&quot;N24&quot; tocid=&quot;&quot;&gt;Hardware&lt;/span&gt;&lt;div style=&quot;margin: 1em 0pt;&quot;&gt;
&lt;table summary=&quot;&quot; border=&quot;0&quot; cellpadding=&quot;4&quot; cellspacing=&quot;1&quot; width=&quot;570-$expandableCount*19&quot;&gt;
&lt;tbody&gt;&lt;tr class=&quot;theme&quot;&gt;&lt;th rowspan=&quot;1&quot;&gt;&lt;span class=&quot;themebody&quot;&gt;&lt;strong&gt;Product Name&lt;/strong&gt;&lt;/span&gt;&lt;/th&gt;&lt;th rowspan=&quot;1&quot;&gt;&lt;span class=&quot;themebody&quot;&gt;dv6773TX&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;tbody valign=&quot;top&quot;&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Product Number&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;KP182PA&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Microprocessor&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;2.40 GHz Intel Core 2 Duo processor T8300 featuring Intel Centrino Duo processor technology&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Microprocessor Cache&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;3 MB L2 Cache&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Memory&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;2048 MB (2 x 1024 MB)&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Memory Max&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Up to 4 GB (Up to 1 GB may not be available due to 32-bit operating system resource requirements)&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Video Graphics&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;NVIDIA GeForce 8400M GS&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Video  Memory&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Up to 1023 MB (256 MB dedicated)&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Hard Drive&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;250 GB (5400 rpm)&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Multimedia Drive&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Blu-Ray ROM with SuperMulti DVD&#177;R/RW Double Layer&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Display&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;15.4&#8221; WXGA High Definition BrightView Widescreen (1280 x 800)&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Fax/Modem&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;High speed 56K modem&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Network Card&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Ethernet 10/100BT integrated network interface&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Wireless Connectivity&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Intel PRO/Wireless 4965AGN Network Connection&lt;br&gt;&lt;br&gt;Bluetooth&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Sound&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Altec Lansing speakers&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Keyboard&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;101 key compatible&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Pointing Device&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;Touch Pad with On/Off button and dedicated vertical Scroll Up/Down pad, volume control, mute buttons, 2 Quick Launch Buttons&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;PC Card Slots&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;ul style=&quot;padding-left: 20px; margin-left: 0pt;&quot;&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;One ExpressCard/54 slot (also supports ExpressCard/34)&lt;/li&gt;&lt;/div&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;External Ports&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;ul style=&quot;padding-left: 20px; margin-left: 0pt;&quot;&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;5-in-1 integrated Digital Media Reader for Secure Digital cards, MultiMedia cards, Memory Stick, Memory Stick Pro, or xD Picture cards&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;3 USB 2.0&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;1 VGA port&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;1 HDMI&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;1 RJ11 modem connector&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;1 RJ45 ethernet connector&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;Expansion Port 3&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;S-video TV out&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;2 headphones-out&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;1 mic-in&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;1 IEEE 1394&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;Consumer IR&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;AC adapter&lt;/li&gt;&lt;/div&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Dimensions&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;35.70 cm (L) x 25.70 cm (W) x 2.54 cm (min H) / 4.30 cm (max H)&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Weight&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;2.78 kg&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;Power&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;ul style=&quot;padding-left: 20px; margin-left: 0pt;&quot;&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;90 W AC Power Adapter&lt;/li&gt;&lt;/div&gt;&lt;div style=&quot;margin: 1em 20px 1em 0px;&quot;&gt;&lt;li&gt;6-cell Lithium-Ion (Li-Ion) battery&lt;/li&gt;&lt;/div&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;&lt;strong&gt;What's In The Box&lt;/strong&gt;&lt;/td&gt;&lt;td rowspan=&quot;1&quot; align=&quot;left&quot; valign=&quot;top&quot;&gt;HP Pavilion WebCam with Integrated Microphones&lt;/td&gt;
&lt;/html&gt;


Software &amp; driver support @ Hp website
http://h10025.www1.hp.com/ewfrf/wc/softwareCategory?os=2093&amp;lc=en&amp;cc=us&amp;dlc=en&amp;sw_lang=&amp;product=3675109
</pre>
</div>
<div title="Hp DV6773tx CPU-Z Spec" creator="Will" modifier="Will" created="201110161040" modified="201110161040" server.page.revision="201110161040" server.type="file" server.host="">
<pre>[[Hp DV6773tx]]

&lt;html&gt;&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249490222/&quot; title=&quot;hp-dv6773tx-cpu-z by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6107/6249490222_3857a00d42.jpg&quot; width=&quot;414&quot; height=&quot;402&quot; alt=&quot;hp-dv6773tx-cpu-z&quot;&gt;&lt;/a&gt;&lt;/html&gt;</pre>
</div>
<div title="Interview" creator="Will" modifier="Will" created="201110251922" modified="201112060342" server.type="file" server.host="" changecount="5">
<pre>[[F&amp;B]]
[[&#38754;&#35797;&#39064; - &#23458;&#35266;&#39064;]]
[[&#38754;&#35797;&#39064; - &#20027;&#35266;&#39064;]]

! Online Test
[[JP Morgan Numerical Test Nov 2011]]
[[JP Morgan Verbal Test Nov 2011]]
[[UBS]]
[[Merrill Lynch]]
[[Barclays]]</pre>
</div>
<div title="JP Morgan Numerical Test Nov 2011" creator="Will" modifier="Will" created="201111170659" server.type="file" server.host="" changecount="1">
<pre>http://www.flickr.com/photos/68660968@N03/sets/72157628021215633/</pre>
</div>
<div title="JP Morgan Verbal Test Nov 2011" creator="Will" modifier="Will" created="201111170700" modified="201111170700" server.type="file" server.host="" changecount="2">
<pre>http://www.flickr.com/photos/68660968@N03/sets/72157628146275248/</pre>
</div>
<div title="Kernel" creator="Will" modifier="Will" created="201110180346" modified="201110180347" server.type="file" server.host="" changecount="2">
<pre>Kernel is a bridge between applications and the actual data processing done at the hardware level. It's the main component for most OS. 

Kernel's responsibilities include managing the system's resources (communication between hardware and software components). As a basic component of OS, a kernel can provide the lowest-level abstraction layer for the resources (especially processors and I/O devices).

Operating system tasks are done differently by different kernels, depending on their design and implementation. While [[monolithic kernels]] execute all the operating system code in the same address space to increase the performance of the system, [[microkernels]] run most of the operating system services in user space as servers, aiming to improve maintainability and modularity of the operating system. A range of possibilities exists between these two extremes.
</pre>
</div>
<div title="Linux File Permission" creator="Will" modifier="Will" created="201110170906" modified="201110180255" server.type="file" server.host="" changecount="2">
<pre>Cat command:


in /etc/ directory:
$(sudo) cat shadow
$(sudo) cat group
can see the group and something.....




File Permission
u - user
g - group
o - other
a - all


r - read
w - write
x - execution


to create a new file unless it already exist:
$touch myfile
to check the setting of file permission:
$umask
to change default umask:
$umask 220
to change file permission of a particular file:
$chmod gu+rw myfile -- group and user add read/write permission
$chmod a-r -- group, user and other minus read permission




Change group:
$chgrp abc myfile


Change ownership:
$chown root myfile




</pre>
</div>
<div title="MST1" creator="Will" modifier="Will" created="201110211348" server.type="file" server.host="" changecount="1">
<pre>&#27515;&#20102;3&#26465;(&#31532;&#20960;&#22825;&#26538;&#21709;&#23601;&#26377;&#20960;&#26465;)&#12290;
&#31616;&#21333;&#20998;&#26512;:&#20174;&#26377;&#19968;&#26465;&#19981;&#27491;&#24120;&#30340;&#29399;&#24320;&#22987;,&#26174;&#28982;&#31532;&#19968;&#22825;&#23558;&#20250;&#21548;&#21040;&#19968;&#22768; &#26538;&#21709;&#12290;&#36825;&#37324;&#30340;&#35201;&#28857;&#26159;&#20320;&#21482;&#38656;&#31449;&#22312;&#37027;&#26465;&#19981;&#27491;&#24120;&#29399;&#30340;&#20027;&#20154;&#30340;&#35282;&#24230;&#32771;&#34385;&#12290;
&#26377;&#20004;&#26465;&#30340;&#35805;&#24605;&#36335;&#32487;&#32493;,&#21482;&#32771;&#34385;&#26377;&#20004;&#26465;&#19981;&#27491;&#24120;&#29399;&#30340;&#20154;,&#20854;&#20313;&#20154;&#26080;&#38656; &#32771;&#34385;&#12290;&#36890;&#36807;&#31532;&#19968;&#22825;&#20182;&#20204;&#20102;&#35299;&#20102;&#23545;&#26041;&#30340;&#20449;&#24687;&#12290;&#31532;&#20108;&#22825;&#26432;&#27515;&#33258;&#24049;&#30340;&#29399;&#12290;&#25442; &#21477;&#35805;&#35828;&#27599;&#20010;&#20154;&#38656;&#35201;&#19968;&#22825;&#30340;&#26102;&#38388;&#35777;&#26126;&#33258;&#24049;&#30340;&#29399;&#26159;&#27491;&#24120;&#30340;&#12290;&#26377;&#19977;&#26465;&#30340;&#35805;, &#21516;&#26679;&#21482;&#32771;&#34385;&#37027;&#19977;&#20010;&#20154;,&#20854;&#20013;&#27599;&#19968;&#20010;&#20154;&#38656;&#35201;&#20004;&#22825;&#30340;&#26102;&#38388;&#35777;&#26126;&#33258;&#24049;&#30340;&#29399;&#26159; &#27491;&#24120;&#30340;&#29399;&#12290;</pre>
</div>
<div title="MST10" creator="Will" modifier="Will" created="201110231214" modified="201110231227" server.type="file" server.host="" changecount="3">
<pre>&#24179;&#38754;&#38236;&#25104;&#20687;&#21407;&#29702;(&#25110;&#32773;&#26159;&#8220;&#30524;&#30555;&#26159;&#24038;&#21491;&#38271;&#30340;&#8221;&#65289;

&#23454;&#38469;&#19978;&#65292;&#19978;&#19979;&#20063;&#21487;&#20197;&#21453;&#36807;&#26469;&#30340;&#65281;
&#25226;&#24179;&#38754;&#38236;&#24179;&#25918;&#22312;&#22320;&#38754;&#19978;&#65292;&#33509;&#20320;&#31449;&#22312;&#24179;&#38754;&#38236;&#19978;&#65292;&#20320;&#20250;&#21457;&#29616;&#20320;&#30340;&#19978;&#19979;&#39072;&#20498;&#20102;&#65281;&#23601;&#22914;&#20320;&#22312;&#28246;&#36793;&#30475;&#21040;&#30340;&#27700;&#20013;&#30340;&#20498;&#24433;&#19968;&#26679;&#65281; </pre>
</div>
<div title="MST11" creator="Will" modifier="Will" created="201110231220" modified="201110231221" server.type="file" server.host="" changecount="2">
<pre>(n+m)(m-n+1)/2=1000

&#21363;(n+m)(m-n+1&#65289;=2000&#65292;&#21363;&#25226;2000&#20998;&#35299;&#25104;&#20004;&#20010;&#25968;&#30340;&#20056;&#31215;&#65292;&#19988;&#36825;&#20004;&#20010;&#25968;&#20026;&#19968;&#22855;&#19968;&#20598;

2000=2^4.5^3,&#20110;&#26159;&#22855;&#25968;&#21487;&#33021;&#20026;5^0,5^1,5^2,5^3&#12290;

&#25152;&#20197;4&#32452;&#65306;
&#65288;40&#215;25    &#65289;28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52
&#65288;62.5&#215;16&#65289;55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70
&#65288;200&#215;5    &#65289;198 199 200 201    202
&#65288;1000&#215;1&#65289;1000

&#36824;&#26377;&#36127;&#25968;&#31639;&#36827;&#21435;&#30340;&#35805;&#65292;&#26377;8&#32452;&#65306;
-27&#65292;-26&#8230;&#8230;0&#65292;&#8230;&#8230;26&#65292;27&#65292;28&#65292;&#8230;&#8230;52
-54&#65292;&#8230;&#8230;54&#65292;55&#65292;&#8230;&#8230;70
-197&#65292;&#8230;&#8230;197&#65292;198&#65292;&#8230;&#8230;202
-999&#65292;&#8230;&#8230;999&#65292;1000
</pre>
</div>
<div title="MST2" creator="Will" modifier="Will" created="201110230945" server.type="file" server.host="" changecount="1">
<pre>97&#65292;0&#65292;1&#65292;2&#65292;0

&#39318;&#20808;&#20174;5&#21495;&#28023;&#30423;&#24320;&#22987;&#65292;&#22240;&#20026;&#20182;&#26159;&#26368;&#23433;&#20840;&#30340;&#65292;&#27809;&#26377;&#34987;&#25172;&#19979;&#22823;&#28023;&#30340;&#39118;&#38505;&#65292;&#22240;&#27492;&#20182;&#30340;&#31574;&#30053;&#20063;&#26368;&#20026;&#31616;&#21333;&#65292;&#21363;&#26368;&#22909;&#21069;&#38754;&#30340;&#20154;&#20840;&#37117;&#27515;&#20809;&#20809;&#65292;&#37027;&#20040;&#20182;&#23601;&#21487;&#20197;&#29420;&#24471;&#36825;100&#26522;&#23453;&#30707;&#20102;&#12290;  &#25509;&#19979;&#26469;&#30475;4&#21495;&#65292;&#20182;&#30340;&#29983;&#23384;&#26426;&#20250;&#23436;&#20840;&#21462;&#20915;&#20110;&#21069;&#38754;&#36824;&#26377;&#20154;&#23384;&#27963;&#30528;&#65292;&#22240;&#20026;&#22914;&#26524;1&#21495;&#21040;3&#21495;&#30340;&#28023;&#30423;&#20840;&#37117;&#21890;&#20102;&#40104;&#40060;&#65292;&#37027;&#20040;&#22312;&#21482;&#21097;4&#21495;&#19982;5&#21495;&#30340;&#24773;&#20917;&#19979;&#65292;&#19981;&#31649;4&#21495;&#25552;&#20986;&#24590;&#26679;&#30340;&#20998;&#37197;&#26041;&#26696;&#65292;5&#21495;&#19968;&#23450;&#37117;&#20250;&#25237;&#21453;&#23545;&#31080;&#26469;&#35753;4&#21495;&#21435;&#21890;&#40104;&#40060;&#65292;&#20197;&#29420;&#21534;&#20840;&#37096;&#30340;&#23453;&#30707;&#12290;&#21738;&#24597;4&#21495;&#20026;&#20102;&#20445;&#21629;&#32780;&#35752;&#22909;5&#21495;&#65292;&#25552;&#20986;&#65288;0&#65292;100&#65289;&#36825;&#26679;&#30340;&#26041;&#26696;&#35753;5&#21495;&#29420;&#21344;&#23453;&#30707;&#65292;&#20294;&#26159;5&#21495;&#36824;&#26377;&#21487;&#33021;&#35273;&#24471;&#30041;&#30528;4&#21495;&#26377;&#21361;&#38505;&#65292;&#32780;&#25237;&#31080;&#21453;&#23545;&#20197;&#35753;&#20854;&#21890;&#40104;&#40060;&#12290;&#22240;&#27492;&#29702;&#24615;&#30340;4&#21495;&#26159;&#19981;&#24212;&#35813;&#20882;&#36825;&#26679;&#30340;&#39118;&#38505;&#65292;&#25226;&#23384;&#27963;&#30340;&#24076;&#26395;&#23492;&#25176;&#22312;5&#21495;&#30340;&#38543;&#26426;&#36873;&#25321;&#19978;&#30340;&#65292;&#20182;&#24799;&#26377;&#25903;&#25345;3&#21495;&#25165;&#33021;&#32477;&#23545;&#20445;&#35777;&#33258;&#36523;&#30340;&#24615;&#21629;&#12290;  &#20877;&#26469;&#30475;3&#21495;&#65292;&#20182;&#32463;&#36807;&#19978;&#36848;&#30340;&#36923;&#36753;&#25512;&#29702;&#20043;&#21518;&#65292;&#23601;&#20250;&#25552;&#20986;&#65288;100&#65292;0&#65292;0&#65289;&#36825;&#26679;&#30340;&#20998;&#37197;&#26041;&#26696;&#65292;&#22240;&#20026;&#20182;&#30693;&#36947;4&#21495;&#21738;&#24597;&#19968;&#26080;&#25152;&#33719;&#65292;&#20063;&#36824;&#26159;&#20250;&#26080;&#26465;&#20214;&#30340;&#25903;&#25345;&#20182;&#32780;&#25237;&#36190;&#25104;&#31080;&#30340;&#65292;&#37027;&#20040;&#20877;&#21152;&#19978;&#33258;&#24049;&#30340;1&#31080;&#23601;&#21487;&#20197;&#20351;&#20182;&#31283;&#33719;&#36825;100&#23453;&#30707;&#20102;&#12290;  &#20294;&#26159;&#65292;2&#21495;&#20063;&#32463;&#36807;&#25512;&#29702;&#24471;&#30693;&#20102;3&#21495;&#30340;&#20998;&#37197;&#26041;&#26696;&#65292;&#37027;&#20040;&#20182;&#23601;&#20250;&#25552;&#20986;&#65288;98&#65292;0&#65292;1&#65292;1&#65289;&#30340;&#26041;&#26696;&#12290;&#22240;&#20026;&#36825;&#20010;&#26041;&#26696;&#30456;&#23545;&#20110;3&#21495;&#30340;&#20998;&#37197;&#26041;&#26696;&#65292;4&#21495;&#21644;5&#21495;&#33267;&#23569;&#21487;&#20197;&#33719;&#24471;1&#26522;&#23453;&#30707;&#65292;&#29702;&#24615;&#30340;4&#21495;&#21644;5&#21495;&#33258;&#28982;&#20250;&#35273;&#24471;&#27492;&#26041;&#26696;&#23545;&#20182;&#20204;&#26469;&#35828;&#26356;&#26377;&#21033;&#32780;&#25903;&#25345;2&#21495;&#65292;&#19981;&#24076;&#26395;2&#21495;&#20986;&#23616;&#32780;&#30001;3&#21495;&#26469;&#36827;&#34892;&#20998;&#37197;&#12290;&#36825;&#26679;&#65292;2&#21495;&#23601;&#21487;&#20197;&#25343;&#36208;98&#26522;&#23453;&#30707;&#20102;&#12290;  &#19981;&#24184;&#30340;&#26159;&#65292;1&#21495;&#28023;&#30423;&#26356;&#19981;&#26159;&#30465;&#27833;&#30340;&#28783;&#65292;&#32463;&#36807;&#19968;&#30058;&#25512;&#29702;&#20043;&#21518;&#20063;&#27934;&#24713;&#20102;2&#21495;&#30340;&#20998;&#37197;&#26041;&#26696;&#12290;&#20182;&#23558;&#37319;&#21462;&#30340;&#31574;&#30053;&#26159;&#25918;&#24323;2&#21495;&#65292;&#32780;&#32473;3&#21495;1&#26522;&#23453;&#30707;&#65292;&#21516;&#26102;&#32473;4&#21495;&#25110;5&#21495;2&#26522;&#23453;&#30707;&#65292;&#21363;&#25552;&#20986;&#65288;97&#65292;0&#65292;1&#65292;2&#65292;0&#65289;&#25110;&#65288;97&#65292;0&#65292;1&#65292;0&#65292;2&#65289;&#30340;&#20998;&#37197;&#26041;&#26696;&#12290;&#30001;&#20110;1&#21495;&#30340;&#20998;&#37197;&#26041;&#26696;&#23545;&#20110;3&#21495;&#19982;4&#21495;&#25110;5&#21495;&#26469;&#35828;&#65292;&#30456;&#27604;2&#21495;&#30340;&#26041;&#26696;&#21487;&#20197;&#33719;&#24471;&#26356;&#22810;&#30340;&#21033;&#30410;&#65292;&#37027;&#20040;&#20182;&#20204;&#23558;&#20250;&#25237;&#31080;&#25903;&#25345;1&#21495;&#65292;&#20877;&#21152;&#19978;1&#21495;&#33258;&#36523;&#30340;1&#31080;&#65292;97&#26522;&#23453;&#30707;&#23601;&#21487;&#36731;&#26494;&#33853;&#20837;1&#21495;&#30340;&#33136;&#21253;&#20102;  </pre>
</div>
<div title="MST3" creator="Will" modifier="Will" created="201110230946" server.type="file" server.host="" changecount="1">
<pre>divide into 1, 2, 4. </pre>
</div>
<div title="MST4" creator="Will" modifier="Will" created="201110231002" modified="201110231002" server.type="file" server.host="" changecount="3">
<pre>&#31532;&#20108;&#26465;&#30452;&#32447;&#35201;&#19982;&#31532;&#19968;&#26465;&#30452;&#32447;&#20132;1&#20010;&#28857;&#65292;&#31532;&#19977;&#26465;&#35201;&#19982;&#21069;&#20004;&#26465;&#20132;2&#20010;&#28857;&#65292;&#31532;1999&#26465;&#19982;&#21069;1998&#26465;&#20132;1998&#20010;&#28857;&#65292;&#65292;&#8230;&#8230;&#65292;&#31532;1999&#26465;&#30452;&#32447;&#22810;&#21010;&#20998;&#20986;1+1998=1999&#20010;&#37096;&#20998;&#12290;

  2+2+3+4+5+&#8230;+1998+1999
=1+(1+2+3+4+5+&#8230;+1998+1999)
=1+(1+1999)*1999/2
=1999001</pre>
</div>
<div title="MST5" creator="Will" modifier="Will" created="201110231034" server.type="file" server.host="" changecount="1">
<pre>1&#215;2&#215;3&#215;&#8230;&#8230;&#215;1000&#30340;&#20301;&#25968;=log+log2+log3+&#8230;&#8230;+log1000 
&#32467;&#26524;&#26159;2568&#20301;

&#19968;&#20010;&#33258;&#28982;&#25968;N&#65292;&#23427;&#30340;&#20301;&#25968;&#31561;&#20110;lgN+1&#12290;lg&#23601;&#26159;&#20197;10&#20026;&#24213;&#30340;&#23545;&#25968;&#12290;&#20363;&#22914;250 = 2.5*10^2,&#21017;lg250 = 2 + lg2.5&#65292;&#32780;lg2.5&#23567;&#20110;1&#65292;&#25152;&#20197;&#25968;250&#30340;&#20301;&#25968;&#32422;&#31561;&#20110;lg250+1&#65292;&#24573;&#30053;&#23567;&#25968;&#37096;&#20998;&#65292;&#23601;&#31561;&#20110;3&#12290;
&#25152;&#20197;1000!&#30340;&#20301;&#25968;&#32422;&#31561;&#20110;lg1000!+1
lg1000! = lg1+lg2+lg3+&#8230;&#8230;+lg1000

&#36825;&#20010;&#27714;&#21644;&#32422;&#31561;&#20110;lgx&#36825;&#26465;&#26354;&#32447;&#22312;&#21306;&#38388;[1,1000]&#19982;x&#36724;&#22260;&#25104;&#30340;&#38754;&#31215;&#65292;&#20063;&#23601;&#26159;&#31561;&#20110;lgx&#22312;&#21306;&#38388;[1,1000]&#30340;&#23450;&#31215;&#20998;&#12290;
&#36825;&#20010;&#23450;&#31215;&#20998;&#24456;&#22909;&#35745;&#31639;&#65292;&#31561;&#20110;(1000ln1000-1000+1)/ln10,ln&#26159;&#33258;&#28982;&#23545;&#25968;&#12290;
&#25152;&#20197;1000!&#30340;&#38454;&#20056;&#30340;&#20301;&#25968;&#26159;1+(1000ln1000-1000+1)/ln10 = 2567 (actually 2568)
</pre>
</div>
<div title="MST6" creator="Will" modifier="Will" created="201110231055" server.type="file" server.host="" changecount="1">
<pre>&#23558;&#23436;&#25972;&#30340;&#34507;&#31957;&#30340;&#20013;&#24515;&#19982;&#34987;&#20999;&#25481;&#30340;&#37027;&#22359;&#34507;&#31957;&#30340;&#20013;&#24515;&#36830;&#25104;&#19968;&#26465;&#32447;</pre>
</div>
<div title="MST7" creator="Will" modifier="Will" created="201110231102" server.type="file" server.host="" changecount="1">
<pre>&#20174;&#26631;&#30528;&#8220;&#28151;&#21512;&#8221;&#26631;&#31614;&#30340;&#31568;&#37324;&#25343;&#19968;&#21482;&#27700;&#26524;&#65292;&#23601;&#21487;&#20197;&#30693;&#36947;&#21478;&#22806;&#20004;&#31568;&#35013;&#30340;&#26159;&#20160;&#20040;&#27700;&#26524;&#20102;&#12290;

&#22240;&#20026;&#26631;&#30528;&#8220;&#28151;&#21512;&#8221;&#26631;&#31614;&#30340;&#31568;&#19968;&#23450;&#19981;&#26159;&#28151;&#21512;&#12290;</pre>
</div>
<div title="MST8" creator="Will" modifier="Will" created="201110231106" modified="201110231106" server.type="file" server.host="" changecount="2">
<pre>&#20174;1&#21495;&#29942;&#20013;&#21462;1&#20010;&#33647;&#20024;&#65292;2&#21495;&#29942;&#20013;&#21462;2&#20010;&#33647;&#20024;&#65292;3&#21495;&#29942;&#20013;&#21462;3&#20010;&#33647;&#20024;&#65292;4&#21495;&#29942;&#20013;&#21462;4&#20010;&#33647;&#20024;&#65292;5&#21495;&#29942;&#20013;&#21462;5&#20010;&#33647;&#20024;&#12290;

&#20840;&#37096;&#25918;&#22312;&#22825;&#24179;&#19978;&#31216;&#19968;&#19979;&#37325;&#37327;&#12290;</pre>
</div>
<div title="MST9" creator="Will" modifier="Will" created="201110231114" modified="201110231115" server.type="file" server.host="" changecount="2">
<pre>&#12288;&#12288;A&#65306;MF
&#12288;&#12288;IF(P)
&#12288;&#12288;GOTO B
&#12288;&#12288;GOTO A
&#12288;&#12288;B&#65306;MF
&#12288;&#12288;GOTO B

if found P, then go straight forward in Loop B.
if not found, keep searching in Loop A. Since &#27599;&#34892;&#32534;&#30721;&#37117;&#26377;&#19968;&#23450;&#30340;&#25191;&#34892;&#21629;&#20196;&#30340;&#26102;&#38388;, loop A takes longer.</pre>
</div>
<div title="Mac OS X" creator="Will" modifier="YourName" created="201110161112" modified="201208301847" server.page.revision="201110170650" server.type="file" server.host="" changecount="34">
<pre>! Intro

Mac OS X is a part of Mac OS familay. Max OS X is [[Unix]]-based. 

Max OS X is released in 2002. 

It is built on top of the [[XNU kernel]]. Apple released this family of of software as a free and open source operating system named [[Darwin]]. 

Based on Darwin, Apple layered a number of components, including the Aqua interface and Finder, to complete Mac OS X.

It is the most successful Unix-like desktop operating system on the web, estimated at over 5 times the usage of Linux (which has 1.5%). 

[[Mas OS X Preference]]

! How-to
[[How to display hidden files in Mac OS]]
[[How to open current directory from Terminal in Mac]]
[[How to quickly go to User Home directory in Terminal]]
[[Double Click to minimize window]]
[[how to set terminal to close upon exit]]
[[Mac Remote Sound play]]
[[How to get Max OS X - Lion disc image]]
[[How to show Mac OS file extension]]
[[How to record Mac keyboard press]]
[[How to press Delete Key in Mac Wireless keyboard or Macbook Keyboard]]
! More in-depth
[[How to change layout of Mail to Vertical display]]
[[How to change user name(home directory name) on Mac]]
[[How to save a single page from a PDF document]]
[[How to solve Disk Utility Partition Failed Error]]

[[How to download streaming video using Safari activity monitor]]

[[Mac troubleshooting]]</pre>
</div>
<div title="Mac Remote Sound play" creator="Will" modifier="Will" created="201110230202" modified="201111072024" server.type="file" server.host="" changecount="8">
<pre>There are many ways we can remote play sound between Windows, Mac, Android and iOS. 

! Play music only
* [[Make the iMac into a Media Server]] - Use DLNA technology. This way, music files only (youtube cannot). 

! Play anything
* [[Use iOS as the sound card of the Mac]] - Airfoil method, work on any network, but require $19.9.
* [[Use Android as sound card of Mac]] - free and open software called speakshare - have a delay of 3 seconds</pre>
</div>
<div title="Mac troubleshooting" creator="Will" modifier="Will" created="201110161109" server.page.revision="201110161109" server.type="file" server.host="">
<pre>[[single user mode]]
[[Gray screen appears during startup ]]</pre>
</div>
<div title="MainMenu" creator="Will" modifier="YourName" created="201110160517" modified="201206100908" server.page.revision="201110170654" server.type="file" server.host="" changecount="30">
<pre>Edit the [[MainMenu]]

About [[TiddlyWiki]]

Operating System&gt;&gt;&gt;
[[Windows]]
[[Ubuntu]]
[[Chrome OS]]
[[Mac OS X]]
[[iOS]]
[[Unix]]
[[Virtual Machine]]

Programming&gt;&gt;&gt;
[[Programming (General)]]
[[Xcode (obj-C)]]
[[Visual Studio (Windows Phone)]]
[[VBA]]
[[Applescript]]
[[Ruby on Rails]]
[[Database]]
[[Web]]

Other&gt;&gt;&gt;
[[Chromium Project]]
[[Microsoft Office]]

Hardware&gt;&gt;&gt;
[[Hackintosh]]
[[Hp DV6773tx]]
[[Accessories]]

other&gt;&gt;&gt;
[[Will's wordlist]]
[[Interview]]
[[Wireless@SG]]
[[Perfume]]</pre>
</div>
<div title="Make the iMac into a Media Server" creator="Will" modifier="Will" created="201110211605" server.type="file" server.host="" changecount="1">
<pre>Use DLNA technology (of course there's alternative I believe called [[UPnP]] but did not tried)

1. on Mac, install DLNS server software: TVMOBiLi
2. on iPad or Android, install client app: 
iPad: m-connect(TM)
Android: 2player
3. start Mac server and run cellphone client.

In this way, the phone is acting as a bluetooth headset. </pre>
</div>
<div title="Mas OS X Preference" creator="Will" modifier="Will" created="201110251845" server.type="file" server.host="" changecount="1">
<pre>os x keeps the settings in 2 places: 

1. inside the application
2. in the user's preferences

they are neatly split so that you don't die with registry corruption, like you do on windows!

An application is actually a folder with all the needed files inside it. The actual app is in a special place within that 'folder'.

Much cleaner than a Windows Registry!</pre>
</div>
<div title="MediaWiki" creator="Will" modifier="Will" created="201110240633" server.type="file" server.host="" changecount="1">
<pre>MediaWiki is a popular free web-based wiki software application. Developed by the Wikimedia Foundation, it is used to run all of its projects, including Wikipedia</pre>
</div>
<div title="MediaWikiFormatterPlugin" creator="Will" modifier="Will" created="201110200935" modified="201110240554" tags="systemConfig" server.type="file" server.host="" changecount="6">
<pre>// Ensure that the MediaWikiFormatter Plugin is only installed once.
if(!version.extensions.MediaWikiFormatterPlugin) {
version.extensions.MediaWikiFormatterPlugin = {installed:true};

if(version.major &lt; 2 || (version.major == 2 &amp;&amp; version.minor &lt; 1))
	{alertAndThrow(&quot;MediaWikiFormatterPlugin requires TiddlyWiki 2.1 or later.&quot;);}

if(config.options.chkDisplayInstrumentation == undefined)
	{config.options.chkDisplayInstrumentation = false;}

if(config.options.chkMediaWikiDisplayEmptyTemplateLinks == undefined)
	{config.options.chkMediaWikiDisplayEmptyTemplateLinks = false;}
if(config.options.chkMediaWikiDisplayEnableThumbZoom == undefined)
	{config.options.chkMediaWikiDisplayEnableThumbZoom = false;}
if(config.options.chkMediaWikiListReferences == undefined)
	{config.options.chkMediaWikiListReferences = false;}

MediaWikiFormatter = {}; // &quot;namespace&quot; for local functions

mwDebug = function(out,str)
{
	createTiddlyText(out,str.replace(/\n/mg,&quot;\\n&quot;).replace(/\r/mg,&quot;RR&quot;));
	createTiddlyElement(out,&quot;br&quot;);
};

wikify = function(source,output,highlightRegExp,tiddler)
{
	if(source &amp;&amp; source != &quot;&quot;) {
		var w = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		w.linkCount = 0;
		w.tableDepth = 0;
		w.output = tiddler==null ? output : createTiddlyElement(output,&quot;p&quot;);
		var time1,time0 = new Date();
		w.subWikifyUnterm(w.output);
		if(tiddler &amp;&amp; config.options.chkDisplayInstrumentation) {
			time1 = new Date();
			var t = tiddler ? tiddler.title : source.substr(0,10);
			displayMessage(&quot;Wikify '&quot;+t+&quot;' in &quot; + (time1-time0) + &quot; ms&quot;);
		}
	}
//#at point of usage can use:
//#var output = w.output.nodeType==1 &amp;&amp; w.output.nodeName==&quot;P&quot; ? w.output.parentNode : w.output;
};

MediaWikiFormatter.getTemplateParams = function(w)
{
//#{{test|a|b}}
//#{{test|n=a|m=b}}
	var params = {};

	var i = 1;
	var text = w.source + &quot;|&quot;;
	var pRegExp = /(?:([^\|]*)=)?([^\|]*)\|/mg;
	var match = pRegExp.exec(text);
	if(match) {
		// skip template name
		match = pRegExp.exec(text);
	}
	while(match) {
		//params[match[1] ? match[1] : i++] = match[2];
		if(match[1]) {
			params[match[1]] = match[2];
		} else {
			params[i] = match[2];
			i++;
		}
		match = pRegExp.exec(text);
	}
	return params;
};

MediaWikiFormatter.expandTemplate = function(w,tiddler,params)
// see http://meta.wikimedia.org/wiki/Help:Template
{
	var text = tiddler.text;
	text = text.replace(/&lt;noinclude&gt;((?:.|\n)*?)&lt;\/noinclude&gt;/mg,&quot;&quot;);// remove text between noinclude tags
	var ioRegExp = /&lt;includeonly&gt;((?:.|\n)*?)&lt;\/includeonly&gt;/mg;
	var t = &quot;&quot;;
	var match = ioRegExp.exec(text);
	while(match) {
		t += match[1];
		match = ioRegExp.exec(text);
	}
	text = t == &quot;&quot; ? text : t;

	var paramsRegExp = /\{\{\{(.*?)(?:\|(.*?))?\}\}\}/mg;
	t = &quot;&quot;;
	var pi = 0;
	match = paramsRegExp.exec(text);
	while(match) {
		var name = match[1];
		var def = match[2];
		var val = params[name];
		if(!val) {
			val = def;
		}
		if(!val) {
			val = match[0];
		}
		t += text.substring(pi,match.index) + val;
		pi = paramsRegExp.lastIndex;
		match = paramsRegExp.exec(text);
	}
	return t == &quot;&quot; ? text : t;
};

MediaWikiFormatter.endOfParams = function(w,text)
{
	var p = 0;
	var i = text.indexOf(&quot;|&quot;);
	if(i==-1) {return -1;}
	var n = text.indexOf(&quot;\n&quot;);
	if(n!=-1 &amp;&amp; n&lt;i) {return -1;}
	var b = text.indexOf(&quot;[[&quot;);
	if(b!=-1 &amp;&amp; b&lt;i) {return -1;}// can't have [[ in parameters
	
	b = text.indexOf(&quot;{{&quot;);
	while(b!=-1 &amp;&amp; b&lt;i) {
		// have {{ before |, so need to find first &quot;|&quot; after &quot;{{..}}&quot; pairs
		//cut off the ..{{, find the }} cut off and repeat
		p += b;
		text = text.substr(b);
		var c = text.indexOf(&quot;}}&quot;);
		p += c;
		text = text.substr(c);
		i = text.indexOf(&quot;|&quot;);
		if(i==-1) {return -1;}
		n = text.indexOf(&quot;\n&quot;);
		if(n!=-1 &amp;&amp; n&lt;i) {return -1;}
		b = text.indexOf(&quot;{{&quot;);
		i = -1;
	}
	return i;
};

MediaWikiFormatter.readToDelim = function(w)
//!!! this is a bit rubish, needs doing properly.
{
//#delimiter, startBracket terminatorBracket
	var dRegExp = /\|/mg;
	var sRegExp = /\[\[/mg;
	var tRegExp = /\]\]/mg;

	dRegExp.lastIndex = w.startMatch;
	var dMatch = dRegExp.exec(w.source);
	sRegExp.lastIndex = w.startMatch;
	var sMatch = sRegExp.exec(w.source);
	tRegExp.lastIndex = w.startMatch;
	var tMatch = tRegExp.exec(w.source);
	if(!tMatch) {
		//mwDebug(w.output,&quot;ERROR1&quot;);
		return false;
	}

	while(sMatch &amp;&amp; sMatch.index&lt;tMatch.index) {
		if(dMatch &amp;&amp; dMatch.index&lt;sMatch.index) {
			//# delim is before startBracket, so return it
//mwDebug(w.output,&quot;di:&quot;+dMatch.index+&quot; dl:&quot;+sRegExp.lastIndex);
			w.nextMatch = dRegExp.lastIndex;
			w.matchLength = dMatch.index - w.startMatch;
			return true;
		}
//mwDebug(w.output,&quot;si:&quot;+sMatch.index+&quot; sl:&quot;+sRegExp.lastIndex);
//mwDebug(w.output,&quot;ti:&quot;+tMatch.index+&quot; tl:&quot;+tRegExp.lastIndex);
		//# startBracket before termBracket, so skip over bracket pairs
		// found eg [[, so look for ]]
		tRegExp.lastIndex = sRegExp.lastIndex;
		tMatch = tRegExp.exec(w.source);
//mwDebug(w.output,&quot;xti:&quot;+tMatch.index+&quot; tl:&quot;+tRegExp.lastIndex);
		
		// and look for another [[
		w.nextMatch = tRegExp.lastIndex;
		dRegExp.lastIndex = w.nextMatch;
		dMatch = dRegExp.exec(w.source);
		sRegExp.lastIndex = w.nextMatch;
		sMatch = sRegExp.exec(w.source);
		tRegExp.lastIndex = w.nextMatch;
		tMatch = tRegExp.exec(w.source);
	}
		
	if(dMatch &amp;&amp; dMatch.index&lt;tMatch.index) {
		//# delim is before term, so return it
//mwDebug(w.output,&quot;2di:&quot;+dMatch.index+&quot; dl:&quot;+sRegExp.lastIndex);
		w.nextMatch = dRegExp.lastIndex;
		w.matchLength = dMatch.index - w.startMatch;
		return true;
	}
	if(tMatch) {
		//# delim is before term, so return it
//mwDebug(w.output,&quot;2ti:&quot;+tMatch.index+&quot; tl:&quot;+tRegExp.lastIndex);
		w.nextMatch = tRegExp.lastIndex;
		w.matchLength = tMatch.index - w.startMatch;
		return false;
	}
	//mwDebug(w.output,&quot;ERROR2&quot;);
	//# return term
	w.nextMatch = tRegExp.lastIndex;
	w.matchLength = -1;
	return false;
};

MediaWikiFormatter.getParams = function(w)
{
	var params = [];
	var i = 1;
	w.startMatch = w.nextMatch;
	var read = MediaWikiFormatter.readToDelim(w);
	if(w.matchLength!=-1) {
		params[i] = w.source.substr(w.startMatch,w.matchLength);
	}
	while(read) {
		i++;
		w.startMatch = w.nextMatch;
		read = MediaWikiFormatter.readToDelim(w);
		if(w.matchLength!=-1) {
			params[i] = w.source.substr(w.startMatch,w.matchLength);
		}
	}
	return params;
};

MediaWikiFormatter.setFromParams = function(w,p)
{
	var r = {};
	var re = /\s*(.*?)=(?:(?:&quot;(.*?)&quot;)|(?:'(.*?)')|((?:\w|%|#)*))/mg;
	var match = re.exec(p);
	while(match)
		{
		var s = match[1].unDash();
		if(match[2]) {
			r[s] = match[2];
		} else if(match[3]) {
			r[s] = match[3];
		} else {
			r[s] = match[4];
		}
		match = re.exec(p);
	}
	return r;
};

MediaWikiFormatter.setAttributesFromParams = function(e,p)
{
	var re = /\s*(.*?)=(?:(?:&quot;(.*?)&quot;)|(?:'(.*?)')|((?:\w|%|#)*))/mg;
	var match = re.exec(p);
	while(match) {
		var s = match[1].unDash();
		if(s == &quot;bgcolor&quot;) {
			s = &quot;backgroundColor&quot;;
		}
		try {
			if(match[2]) {
				e.setAttribute(s,match[2]);
			} else if(match[3]) {
				e.setAttribute(s,match[3]);
			} else {
				e.setAttribute(s,match[4]);
			}
		}
		catch(ex) {}
		match = re.exec(p);
	}
};

config.mediaWikiFormatters = [
{
	name: &quot;mediaWikiHeading&quot;,
	match: &quot;^={2,6}(?!=)\\n?&quot;,
	termRegExp: /(={2,6}\n?)/mg,
	handler: function(w)
	{
		var output = w.output.nodeType==1 &amp;&amp; w.output.nodeName==&quot;P&quot; ? w.output.parentNode : w.output;
		var e = createTiddlyElement(output,&quot;h&quot; + w.matchLength);
		var a = createTiddlyElement(e,&quot;a&quot;);// drop anchor
		var t = w.tiddler ? w.tiddler.title + &quot;:&quot; : &quot;&quot;;
		var len = w.source.substr(w.nextMatch).indexOf(&quot;=&quot;);
		a.setAttribute(&quot;name&quot;,t+w.source.substr(w.nextMatch,len));
		w.subWikifyTerm(e,this.termRegExp);
		w.output = createTiddlyElement(output,&quot;p&quot;);
	}
},

{
	name: &quot;mediaWikiTable&quot;,
	match: &quot;^\\{\\|&quot;, // ^{|
	tableTerm: &quot;\\n\\|\\}&quot;, // |}
	rowStart: &quot;\\n\\|\\-&quot;, // \n|-
	cellStart: &quot;\\n!|!!|\\|\\||\\n\\|&quot;, //\n! or !! or || or \n|
	caption: &quot;\\n\\|\\+&quot;,
	rowTerm: null,
	cellTerm: null,
	inCellTerm: null,
	tt: 0,
	debug: null,
	rowTermRegExp: null,
	handler: function(w)
	{
		if(!this.rowTermRegExp) {
			this.rowTerm = &quot;(&quot; + this.tableTerm +&quot;)|(&quot; + this.rowStart + &quot;)&quot;;
			this.cellTerm = this.rowTerm + &quot;|(&quot; + this.cellStart + &quot;)&quot;;
			this.inCellTerm = &quot;(&quot; + this.match + &quot;)|&quot; + this.rowTerm + &quot;|(&quot; + this.cellStart + &quot;)&quot;;
			this.caption = &quot;(&quot; + this.caption + &quot;)|&quot; + this.cellTerm;

			this.rowTermRegExp = new RegExp(this.rowTerm,&quot;mg&quot;);
			this.cellTermRegExp = new RegExp(this.cellTerm,&quot;mg&quot;);
			this.inCellTermRegExp = new RegExp(this.inCellTerm,&quot;mg&quot;);
			this.captionRegExp = new RegExp(this.caption,&quot;mg&quot;);
		}
//this.debug = createTiddlyElement(w.output,&quot;p&quot;);
//mwDebug(this.debug,&quot;start table&quot;);
		this.captionRegExp.lastIndex = w.nextMatch;
		var match = this.captionRegExp.exec(w.source);
		if(!match) {return;}
		//var inPara = w.output.nodeType==1 &amp;&amp; w.output.nodeName==&quot;P&quot; ? true : false;
		//var output = inPara ? w.output.parentNode : w.output;
		var output = w.output;
		var table = createTiddlyElement(output,&quot;table&quot;);
		var rowContainer = table;

		var i = w.source.indexOf(&quot;\n&quot;,w.nextMatch);
		if(i&gt;w.nextMatch) {
			MediaWikiFormatter.setAttributesFromParams(table,w.source.substring(w.nextMatch,i));
			w.nextMatch = i;
		}

		var rowCount = 0;
		var eot = false;
		if(match[1]) {
			// caption
			var caption = createTiddlyElement(table,&quot;caption&quot;);
			w.nextMatch = this.captionRegExp.lastIndex;
			var captionText = w.source.substring(w.nextMatch);
			var n = captionText.indexOf(&quot;\n&quot;);
			captionText = captionText.substr(0,n);
			i = MediaWikiFormatter.endOfParams(w,captionText);
			if(i!=-1) {
				captionText = w.source.substr(w.nextMatch,i);
				//captionText = captionText.replace(/^\+/mg,&quot;&quot;)//!!hack until I fix this properly
				//MediaWikiFormatter.setAttributesFromParams(caption,captionText);
				w.nextMatch += i+1;
			}
			if(caption != table.firstChild) {
				table.insertBefore(caption,table.firstChild);
			}
			w.subWikify(caption,this.cellTerm);
			w.nextMatch -= w.matchLength;// rewind to before the match
			this.cellTermRegExp.lastIndex = w.nextMatch;
			var match2 = this.cellTermRegExp.exec(w.source);
			if(match2) {
				if(match2[3]) {
					// no first row marker
					eot = this.rowHandler(w,createTiddlyElement(rowContainer,&quot;tr&quot;));
					rowCount++;
				}
			}
		} else if(match[3]) {
			// row
			w.nextMatch = this.captionRegExp.lastIndex-match[3].length;// rewind to before the match
		} else if(match[4]) {
			// cell, no first row marker in table
			w.nextMatch = this.captionRegExp.lastIndex-match[4].length;// rewind to before the match
			eot = this.rowHandler(w,createTiddlyElement(rowContainer,&quot;tr&quot;));
			rowCount++;
		}

		this.rowTermRegExp.lastIndex = w.nextMatch;
		match = this.rowTermRegExp.exec(w.source);
		while(match &amp;&amp; eot==false) {
			if(match[1]) {
				// end table
				w.nextMatch = this.rowTermRegExp.lastIndex;
				if(w.tableDepth==0) {
					return;
				}
			} else if(match[2]) {
				// row
				var rowElement = createTiddlyElement(rowContainer,&quot;tr&quot;);
				w.nextMatch += match[2].length;// skip over the match
				i = w.source.indexOf(&quot;\n&quot;,w.nextMatch);
				if(i&gt;w.nextMatch) {
					MediaWikiFormatter.setAttributesFromParams(rowElement,w.source.substring(w.nextMatch,i));
					w.nextMatch = i;
				}
				eot = this.rowHandler(w,rowElement);
			}
			rowCount++;
			this.rowTermRegExp.lastIndex = w.nextMatch;
			match = this.rowTermRegExp.exec(w.source);
		}//# end while
		if(w.tableDepth==0) {
			w.nextMatch +=3;// skip over tableterm, \n|}
		}
		//if(inPara)
		//	w.output = createTiddlyElement(output,&quot;p&quot;);
	},//# end handler

	rowHandler: function(w,e)
	{// assumes w.nextMatch points to first cell terminator, returns false if any improperly terminated element
		var cell;
		this.inCellTermRegExp.lastIndex = w.nextMatch;
		var match = this.inCellTermRegExp.exec(w.source);
		while(match) {
			if(match[1])
				{// nested table
				w.tableDepth++;
				w.subWikify(cell,this.tableTerm);
				w.nextMatch = this.tt;
				w.tableDepth--;
				return false;
			} else if(match[2]) {
				//# end table
				this.tt = this.inCellTermRegExp.lastIndex;
				return true;
			} else if(match[3]) {
				//# end row
				return false;
			} else if(match[4]) {
				//# cell
				var len = match[4].length;
				cell = createTiddlyElement(e,match[4].substr(len-1)==&quot;!&quot;?&quot;th&quot;:&quot;td&quot;);
				w.nextMatch += len;//skip over the match

				this.inCellTermRegExp.lastIndex = w.nextMatch;
				var lookahead = this.inCellTermRegExp.exec(w.source);
				if(!lookahead) {
					return false;// improperly terminated table
				}
				var cellText = w.source.substr(w.nextMatch,lookahead.index-w.nextMatch);
				var oldSource = w.source;
				var i = MediaWikiFormatter.endOfParams(w,cellText);//cellText.indexOf(&quot;|&quot;);
				if(i!=-1) {
					cellText = cellText.replace(/^\+/mg,&quot;&quot;);  //!!hack until I fix this properly
					MediaWikiFormatter.setAttributesFromParams(cell,cellText.substr(0,i-1));
					cellText = cellText.substring(i+1);
				}
				cellText = cellText.replace(/^\s*/mg,&quot;&quot;); //# remove leading spaces so not treated as preformatted
				w.source = cellText;
				w.nextMatch = 0;
				w.subWikifyUnterm(cell);
				w.source = oldSource;
				w.nextMatch = lookahead.index;
			}
			this.inCellTermRegExp.lastIndex = w.nextMatch;
			match = this.inCellTermRegExp.exec(w.source);
		}//# end while
		return false;
	}//# end rowHandler
},

{
	name: &quot;mediaWikiList&quot;,
	match: &quot;^[\\*#;:]+ &quot;,
	lookaheadRegExp: /^([\*#;:])+ /mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var output = w.output.parentNode;
		var stack = [output];
		var currLevel = 0, currType = null;
		var listType, itemType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.nextMatch) {
			switch(lookaheadMatch[1]) {
			case &quot;*&quot;:
				listType = &quot;ul&quot;;
				itemType = &quot;li&quot;;
				break;
			case &quot;#&quot;:
				listType = &quot;ol&quot;;
				itemType = &quot;li&quot;;
				break;
			case &quot;;&quot;:
				listType = &quot;dl&quot;;
				itemType = &quot;dt&quot;;
				break;
			case &quot;:&quot;:
				listType = &quot;dl&quot;;
				itemType = &quot;dd&quot;;
				break;
			default:
				break;
			}
			var listLevel = lookaheadMatch[0].length;
			w.nextMatch += listLevel;
			if(listLevel &gt; currLevel) {
				for(var i=currLevel; i&lt;listLevel; i++) {
					stack.push(createTiddlyElement(stack[stack.length-1],listType));
				}
			} else if(listLevel &lt; currLevel) {
				for(i=currLevel; i&gt;listLevel; i--) {
					stack.pop();
				}
			} else if(listLevel == currLevel &amp;&amp; listType != currType) {
				stack.pop();
				stack.push(createTiddlyElement(stack[stack.length-1],listType));
			}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(stack[stack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
		w.output = createTiddlyElement(output,&quot;p&quot;);
	}
},

{
	name: &quot;mediaWikiRule&quot;,
	match: &quot;^----+$\\n?&quot;,
	handler: function(w)
	{
		var output = w.output.parentNode;
		createTiddlyElement(output,&quot;hr&quot;);
		w.output = createTiddlyElement(output,&quot;p&quot;);
	}
},

{
	name: &quot;mediaWikiLeadingSpaces&quot;,
	match: &quot;^ &quot;,
	lookaheadRegExp: /^ /mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var e = createTiddlyElement(w.output,&quot;pre&quot;);
		while(true) {
			w.subWikifyTerm(e,this.termRegExp);
			createTiddlyElement(e,&quot;br&quot;);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.nextMatch) {
				w.nextMatch += lookaheadMatch[0].length;
			} else {
				break;
			}
		}
	}
},

/*
[[Image:Westminstpalace.jpg|frame|none|caption text]]
//http://en.wikipedia.org/wiki/Image:Westminstpalace.jpg
&lt;a href=&quot;/wiki/Image:Westminstpalace.jpg&quot; class=&quot;internal&quot; title=&quot;caption text&quot;&gt;
&lt;img src=&quot;http://upload.wikimedia.org/wikipedia/commons/3/39/Westminstpalace.jpg&quot;
 alt=&quot;caption text&quot; width=&quot;400&quot; height=&quot;300&quot; longdesc=&quot;/wiki/Image:Westminstpalace.jpg&quot; /&gt;
&lt;/a&gt;

[[image:Stockholm.jpg|right|350px|thumb|Stockholm panorama from the City Hall]]
&lt;div class=&quot;thumb tright&quot;&gt;
	&lt;div style=&quot;width:352px;&quot;&gt;
		&lt;a href=&quot;/wiki/Image:Stockholm.jpg&quot; class=&quot;internal&quot; title=&quot;Stockholm panorama from the City Hall&quot;&gt;
			&lt;img src=&quot;http://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Stockholm.jpg/350px-Stockholm.jpg&quot; alt=&quot;Stockholm panorama from the City Hall&quot; width=&quot;350&quot; height=&quot;84&quot; longdesc=&quot;/wiki/Image:Stockholm.jpg&quot; /&gt;
		&lt;/a&gt;
		&lt;div class=&quot;thumbcaption&quot;&gt;
			&lt;div class=&quot;magnify&quot; style=&quot;float:right&quot;&gt;
				&lt;a href=&quot;/wiki/Image:Stockholm.jpg&quot; class=&quot;internal&quot; title=&quot;Enlarge&quot;&gt;
				&lt;img src=&quot;/skins-1.5/common/images/magnify-clip.png&quot; width=&quot;15&quot; height=&quot;11&quot; alt=&quot;Enlarge&quot; /&gt;
				&lt;/a&gt;
			&lt;/div&gt;
			Stockholm panorama from the City Hall
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
*/

{
	name: &quot;mediaWikiImage&quot;,
	match: &quot;\\[\\[(?:[Ii]mage|Bild):&quot;,
	lookaheadRegExp: /\[\[(?:[Ii]mage|Bild):/mg,
	defaultPx: 180,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var params = MediaWikiFormatter.getParams(w);
			var src = params[1];
			src = src.trim().replace(/ /mg,&quot;_&quot;);
			src = src.substr(0,1).toUpperCase() + src.substring(1);
			var palign = null;
			var ptitle = null;
			var psrc = false;
			var px = null;
			var pthumb = false;
			var pframed = false;
			for(var i=2;i&lt;params.length;i++) {
				//# right, left, center, none, sizepx, thumbnail (thumb), frame, and alternate (caption) text.
				var p = params[i];
				if(p==&quot;right&quot;||p==&quot;left&quot;||p==&quot;center&quot;||p==&quot;none&quot;) {
					palign = p;
				} else if(p==&quot;thumbnail&quot;||p==&quot;thumb&quot;) {
					pthumb = true;
				} else if(p==&quot;framed&quot;) {
					pframed = true;
				} else if(/\d{1,4} ?px/.exec(p)) {
					px = p.substr(0,p.length-2).trim();
				} else {
					ptitle = p;
				}
			}//#end for
			if(pthumb) {
				var output = w.output.nodeType==1 &amp;&amp; w.output.nodeName==&quot;P&quot; ? w.output.parentNode : w.output;
				if(!palign) {
					palign = &quot;right&quot;;
				}
				if(!px) {
					px = 180;
				}
				psrc = px + &quot;px-&quot; + src;
				var t = createTiddlyElement(output,&quot;div&quot;,null,&quot;thumb&quot;+(palign?&quot; t&quot;+palign:&quot;&quot;));
				var s = createTiddlyElement(t,&quot;div&quot;);
				s.style[&quot;width&quot;] = Number(px) + 2 + &quot;px&quot;;
				var a = createTiddlyElement(s,&quot;a&quot;,null,&quot;internal&quot;);
				if(config.options.chkMediaWikiDisplayEnableThumbZoom) {
					a.href = src;
				}
				a.title = ptitle;
				var img = createTiddlyElement(a,&quot;img&quot;);
				img.src = psrc;
				img.width = px;
				img.longdesc = &quot;Image:&quot; + src;
				img.alt = ptitle;

				var tc = createTiddlyElement(s,&quot;div&quot;,null,&quot;thumbcaption&quot;);
				var oldSource = w.source; var oldMatch = w.nextMatch;
				w.source = ptitle; w.nextMatch = 0;
				w.subWikifyUnterm(tc);
				w.source = oldSource; w.nextMatch = oldMatch;

				if(config.options.chkMediaWikiDisplayEnableThumbZoom) {
					var tm = createTiddlyElement(tc,&quot;div&quot;,null,&quot;magnify&quot;);
					tm.style[&quot;float&quot;] = &quot;right&quot;;
					var ta = createTiddlyElement(tm,&quot;a&quot;,null,&quot;internal&quot;);
					ta.title = &quot;Enlarge&quot;;
					timg = createTiddlyElement(ta,&quot;img&quot;); timg.src = &quot;magnify-clip.png&quot;; timg.alt = &quot;Enlarge&quot;; timg.width = &quot;15&quot;; timg.height = &quot;11&quot;;
					ta.href = src;
				}
			} else {
				// not pthumb
				a = createTiddlyElement(w.output,&quot;a&quot;,null,&quot;image&quot;);
				a.title = ptitle;
				img = createTiddlyElement(a,&quot;img&quot;);
				if(palign) {img.align = palign;}
				img.src = px ? px + &quot;px-&quot; + src : src;
				if(px) {img.width = px;}
				img.longdesc = &quot;Image:&quot; + src;
				img.alt = ptitle;
			}
		}
	}//#end image handler
},

{
	name: &quot;mediaWikiExplicitLink&quot;,
	match: &quot;\\[\\[&quot;,
	lookaheadRegExp: /\[\[(?:([a-z]{2,3}:)?)(#?)([^\|\]]*?)(?:(\]\](\w)*)|(\|(.*?)\]\]))/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			if(!lookaheadMatch[1]) {
				// not (eg) [[en:...]]
				var e;
				var link = lookaheadMatch[3];
				var text = link;
				link = link.substr(0,1).toUpperCase() + link.substring(1);
				if(lookaheadMatch[4]) {
					// Simple bracketted link
					if(lookaheadMatch[2]) {
						var a = createTiddlyElement(e,&quot;a&quot;);// drop anchor
						a.setAttribute(&quot;name&quot;,link);
					} else {
						e = createTiddlyLink(w.output,link,false,null,w.isStatic);
						if(lookaheadMatch[5]) {
							text += lookaheadMatch[5];//add any non-space after the ]]
						}
						createTiddlyText(e,text);
					}
				} else if(lookaheadMatch[6]) {
					// Piped link
					if(config.formatterHelpers.isExternalLink(link)) {
						e = createExternalLink(w.output,link);
					} else {
						e = createTiddlyLink(w.output,link,false,null,w.isStatic);
					}
					var oldSource = w.source; var oldMatch = w.nextMatch;
					w.source = lookaheadMatch[7].trim(); w.nextMatch = 0;
					w.subWikifyUnterm(e);
					w.source = oldSource; w.nextMatch = oldMatch;
				}
			}
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

//#{{Audio|sv-Stockholm.ogg|Stockholm}}
//**tem//
{
	name: &quot;mediaWikiTemplate&quot;,
	match: &quot;\\{\\{[^\\{]&quot;,
	lookaheadRegExp: /\{\{((?:.|\n)*?)\}\}/mg,
	handler: function(w)
	{
//mwDebug(w.output,&quot;wt:&quot;+w.matchText+&quot; ws:&quot;+w.matchStart+&quot; wn:&quot;+w.nextMatch+&quot; wl:&quot;+w.matchLength);
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
//mwDebug(w.output,&quot;lm:&quot;+lookaheadMatch);
//mwDebug(w.output,&quot;lmi:&quot;+lookaheadMatch.index+&quot; lI:&quot;+this.lookaheadRegExp.lastIndex);
//mwDebug(w.output,&quot;lm1:&quot;+lookaheadMatch[1]);
//mwDebug(w.output,&quot;lm2:&quot;+lookaheadMatch[2]);
			var lastIndex = this.lookaheadRegExp.lastIndex;
			var contents = lookaheadMatch[1];
			// see http://meta.wikimedia.org/wiki/Help:Variable
			if(contents==&quot;PAGENAME&quot;) {
				createTiddlyText(w.output,w.tiddler.title);
				w.nextMatch = lastIndex;
				return;
			}
			var i = contents.indexOf(&quot;|&quot;);
			var title = i==-1 ? contents : contents.substr(0,i);
			title = title.trim().replace(/_/mg,&quot; &quot;);// Underscore in template name is equivalent to space
			title = &quot;Template:&quot; + title.substr(0,1).toUpperCase() + title.substring(1);
			var tiddler = store.fetchTiddler(title);
			var oldSource = w.source;
			if(tiddler) {
				params = {};
				w.source = lookaheadMatch[1];
				if(i!=-1) {
					w.nextMatch = 0;
					params = MediaWikiFormatter.getTemplateParams(w);
				}
				w.source = MediaWikiFormatter.expandTemplate(w,tiddler,params);
				w.nextMatch = 0;
				w.subWikifyUnterm(w.output);
			} else {
				if(config.options.chkMediaWikiDisplayEmptyTemplateLinks) {
					// for conveniece, output the name of the template so can click on it and create tiddler
					w.source = &quot;[[&quot;+title+&quot;]]&quot;;
					w.nextMatch = 0;
					w.subWikifyUnterm(w.output);
				}
			}
			w.source = oldSource;
			w.nextMatch = lastIndex;
		}
	}
},

{
	name: &quot;mediaWikiParagraph&quot;,
	match: &quot;\\n{2,}&quot;,
	handler: function(w)
	{
		var output = w.output.nodeType==1 &amp;&amp; w.output.nodeName==&quot;P&quot; ? w.output.parentNode : w.output;
		w.output = createTiddlyElement(output,&quot;p&quot;);
	}
},

{
	name: &quot;mediaWikiExplicitLineBreak&quot;,
	match: &quot;&lt;br ?/?&gt;&quot;,
	handler: function(w)
	{
		createTiddlyElement(w.output,&quot;br&quot;);
	}
},

{
	name: &quot;mediaWikiExplicitLineBreakWithParams&quot;,
	match: &quot;&lt;br(?:\\s*(?:(?:.*?)=[\&quot;']?(?:.*?)[\&quot;']?))*?\\s*/?&gt;&quot;,
	lookaheadRegExp: /&lt;br((?:\s+(?:.*?)=[&quot;']?(?:.*?)[&quot;']?)*?)?\s*\/?&gt;/mg,
	handler: function(w)
	{
		//# copes with erroneous &lt;br clear=&quot;right&quot;&gt;
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var e =createTiddlyElement(w.output,&quot;br&quot;);
			if(lookaheadMatch[1]) {
				MediaWikiFormatter.setAttributesFromParams(e,lookaheadMatch[1]);
			}
			w.nextMatch = this.lookaheadRegExp.lastIndex;// empty tag
		}
	}
},

{
	name: &quot;mediaWikiTitledUrlLink&quot;,
	match: &quot;\\[&quot; + config.textPrimitives.urlPattern + &quot;(?:\\s+[^\\]]+)?&quot; + &quot;\\]&quot;,
	//# eg [http://www.nupedia.com] or [http://www.nupedia.com Nupedia]
	//# &lt;sup id=&quot;_ref-1&quot; class=&quot;reference&quot;&gt;&lt;a href=&quot;#_note-1&quot; title=&quot;&quot;&gt;[2]&lt;/a&gt;
	handler: function(w)
	{
		var lookaheadRegExp = new RegExp(&quot;\\[(&quot; + config.textPrimitives.urlPattern + &quot;)(?:\\s+([^\[]+))?&quot; + &quot;\\]&quot;,&quot;mg&quot;);
		lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index==w.matchStart) {
			var link = lookaheadMatch[1];
			var s = createTiddlyElement(w.output,&quot;sup&quot;);
			var e = createExternalLink(s,link);
			if(lookaheadMatch[2]) {
				var oldSource = w.source; var oldMatch = w.nextMatch;
				w.source = lookaheadMatch[2].trim(); w.nextMatch = 0;
				w.subWikifyUnterm(e);
				w.source = oldSource; w.nextMatch = oldMatch;
			} else {
				w.linkCount++;
				createTiddlyText(e,&quot;[&quot;+w.linkCount+&quot;]&quot;);
			}
			w.nextMatch = lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: &quot;mediaWikiUrlLink&quot;,
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: &quot;mediaWikiBold&quot;,
	match: &quot;'''&quot;,
	termRegExp: /('''|\n)/mg,
	element: &quot;strong&quot;,
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: &quot;mediaWikiItalic&quot;,
	match: &quot;''(?!')&quot;,
	termRegExp: /(''(?!')|\n)/mg,
	element: &quot;em&quot;,
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: &quot;mediaWikiUnderline&quot;,
	match: &quot;&lt;u&gt;&quot;,
	termRegExp: /(&lt;\/u&gt;|\n)/mg,
	element: &quot;u&quot;,
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: &quot;mediaWikiStrike&quot;,
	match: &quot;&lt;s&gt;&quot;,
	termRegExp: /(&lt;\/s&gt;|\n)/mg,
	element: &quot;strike&quot;,
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: &quot;mediaWikiBoldTag&quot;,
	match: &quot;&lt;b&gt;&quot;,
	termRegExp: /(&lt;\/b&gt;|\n)/mg,
	element: &quot;b&quot;,
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: &quot;mediaWikiTemplateParam&quot;,// note, this only gets invoked when viewing the template
	match: &quot;\\{\\{\\{&quot;,
	lookaheadRegExp: /(\{\{\{(?:.|\n)*?\}\}\})/mg,
	element: &quot;span&quot;,
	handler: config.formatterHelpers.enclosedTextHelper
},

//# See http://en.wikipedia.org/wiki/Wikipedia:Footnotes
//# for an explanation of how to generate footnotes using the &lt;ref(erences/)&gt; tags
{
	name: &quot;mediaWikiInsertReference&quot;,
	match: &quot;&lt;ref[^/]*&gt;&quot;,
	lookaheadRegExp: /&lt;ref(\s+(?:.*?)=[&quot;']?(?:.*?)[&quot;']?)?&gt;([^&lt;]*?)&lt;\/ref&gt;/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var x = {id:&quot;&quot;,value:&quot;&quot;};
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			if(!w.referenceCount) {
				w.referenceCount = 0;
				w.references = {};
			}
			var s = createTiddlyElement(w.output,&quot;sup&quot;,null,&quot;reference&quot;);
			var a = createTiddlyElement(s,&quot;a&quot;);
			var prefix = w.tiddler ? w.tiddler.title + &quot;:&quot; : &quot;&quot;;
			if(lookaheadMatch[1]) {
				var r = {};
				r = MediaWikiFormatter.setFromParams(w,lookaheadMatch[1]);
				var name = r.name ? r.name.trim() : &quot;&quot;;
				name = name.replace(/ /g,&quot;_&quot;);
				s.id = prefix + &quot;_ref-&quot; + name;// + &quot;_&quot; + nameCount;(w.referenceCount+1);
				if(!w.references[name]) {
					w.references[name] = x;
					w.references[name].id = w.referenceCount;
					w.references[name].value = lookaheadMatch[2].trim();
				}
			} else {
				w.references[w.referenceCount] = x;
				w.references[w.referenceCount].id = w.referenceCount;
				w.references[w.referenceCount].value = lookaheadMatch[2].trim();
				name = w.referenceCount;
				s.id = prefix + &quot;_ref-&quot; + w.referenceCount;
			}
			w.referenceCount++;
			a.title = lookaheadMatch[2].trim();//mb, extra to wikipedia
			a.href = &quot;#&quot; + prefix + &quot;_note-&quot; + name;
			a.innerHTML = &quot;[&quot;+w.referenceCount+&quot;]&quot;;
//#&lt;sup id=&quot;_ref-0&quot; class=&quot;reference&quot;&gt;&lt;a href=&quot;#_note-0&quot; title=&quot;&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;
//#&lt;sup id=&quot;_ref-foreign_ministry_0&quot; class=&quot;reference&quot;&gt;&lt;a href=&quot;#_note-foreign_ministry&quot; title=&quot;&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;
		}
	}
},

{
	name: &quot;mediaWikiListReferences&quot;,
	match: &quot;&lt;references ?/&gt;&quot;,
	lookaheadRegExp: /&lt;references ?\/&gt;/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(config.options.chkMediaWikiListReferences &amp;&amp; w.referenceCount) {
			var ol = createTiddlyElement(w.output,&quot;ol&quot;,null,&quot;references&quot;);
			var oldSource = w.source;
			if(w.referenceCount&gt;0) {
				for(var i in w.references) {
					var li = createTiddlyElement(ol,&quot;li&quot;);
					var prefix = w.tiddler ? w.tiddler.title + &quot;:&quot; : &quot;&quot;;
					var b = createTiddlyElement(li,&quot;b&quot;);
					var a = createTiddlyElement(b,&quot;a&quot;);
					li.id = prefix + &quot;_note-&quot; + i;
					a.href = &quot;#&quot; + prefix + &quot;_ref-&quot; + i;
					a.innerHTML = &quot;^&quot;;
					w.source = w.references[i].value;
					w.nextMatch = 0;
					w.subWikifyUnterm(li);
				}
			}
			w.source = oldSource;
		}
		w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: &quot;mediaWikiRepeatReference&quot;,
	match: &quot;&lt;ref[^/]*/&gt;&quot;,
	lookaheadRegExp: /&lt;ref(\s+(?:.*?)=&quot;(?:.*?)&quot;)?\s*\/&gt;/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var x = {id:&quot;&quot;,value:&quot;&quot;};
			w.nextMatch = this.lookaheadRegExp.lastIndex;
//#&lt;ref name=&quot;foreign ministry&quot;&gt;
//#&lt;sup id=&quot;_ref-foreign_ministry_1&quot; class=&quot;reference&quot;&gt;&lt;a href=&quot;#_note-foreign_ministry&quot; title=&quot;&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;
			var s = createTiddlyElement(w.output,&quot;sup&quot;,null,&quot;reference&quot;);
			var a = createTiddlyElement(s,&quot;a&quot;);
			var prefix = w.tiddler ? w.tiddler.title : &quot;&quot;;
			if(lookaheadMatch[1]) {
				var r = {};
				r = MediaWikiFormatter.setFromParams(w,lookaheadMatch[1]);
				var name = r.name ? r.name.trim() : &quot;&quot;;
				name = name.replace(/ /g,&quot;_&quot;);
				s.id = prefix + &quot;_ref-&quot; + name +&quot;_&quot; + (w.referenceCount+1);
				var count = w.references &amp;&amp; w.references[name] ? (w.references[name].id+1) : &quot;?&quot;;
			}
			a.href = &quot;#&quot; + prefix + &quot;_note-&quot; + name;
			a.innerHTML = &quot;[&quot;+count+&quot;]&quot;;
			a.title = name;
		}
	}//# end handler
},

{
	name: &quot;mediaWikiHtmlEntitiesEncoding&quot;,
	match: &quot;&amp;#?[a-zA-Z0-9]{2,8};&quot;,
	handler: function(w)
	{
		createTiddlyElement(w.output,&quot;span&quot;).innerHTML = w.matchText;
	}
},

{
	name: &quot;mediaWikiComment&quot;,
	match: &quot;&lt;!\\-\\-&quot;,
	lookaheadRegExp: /&lt;!\-\-((?:.|\n)*?)\-\-&gt;/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: &quot;mediaWikiIncludeOnly&quot;,
	match: &quot;&lt;includeonly&gt;&quot;,
	lookaheadRegExp: /&lt;includeonly&gt;((?:.|\n)*?)&lt;\/includeonly&gt;/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: &quot;mediaWikiNoWiki&quot;,
	match: &quot;&lt;nowiki&gt;&quot;,
	lookaheadRegExp: /&lt;nowiki&gt;((?:.|\n)*?)&lt;\/nowiki&gt;/mg,
	element: &quot;span&quot;,
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: &quot;mediaWikiPreNoWiki&quot;,
	match: &quot;&lt;pre&gt;\s*&lt;nowiki&gt;&quot;,
	lookaheadRegExp: /&lt;pre&gt;\s*&lt;nowiki&gt;((?:.|\n)*?)&lt;\/nowiki&gt;\s*&lt;\/pre&gt;/mg,
	element: &quot;pre&quot;,
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: &quot;mediaWikiPre&quot;,
	match: &quot;&lt;pre&gt;&quot;,
	lookaheadRegExp: /&lt;pre&gt;((?:.|\n)*?)&lt;\/pre&gt;/mg,
	element: &quot;pre&quot;,
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: &quot;mediaWikiGallery&quot;,
	match: &quot;&lt;gallery&gt;&quot;,
	lookaheadRegExp: /[Ii]mage:(.*?)\n/mg,
	handler: function(w)
	{
//#basic syntax is:
//#&lt;gallery&gt;
//#Image:Wiki.png
//#Image:Wiki.png|Captioned
//#Image:Wiki.png|[[Help:Contents/Links|Links]] can be put in captions.
//#Image:Wiki.png|Full [[MediaWiki]]&lt;br /&gt;[[syntax]] may now be used&#8230;
//#&lt;/gallery&gt;
//#&lt;table class=&quot;gallery&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
//#&lt;tr&gt;
//#...
//#&lt;/tr&gt;
//#&lt;/table&gt;
		var table = createTiddlyElement(w.output,&quot;table&quot;,null,&quot;gallery&quot;);
		table.cellspacing = &quot;0&quot;;
		table.cellpadding = &quot;0&quot;;
		var rowElem = createTiddlyElement(table,&quot;tr&quot;);
		var col = 0;
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var nM = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		var oldSource = w.source;
		while(lookaheadMatch) {
			nM += lookaheadMatch[1].length;
			w.source = lookaheadMatch[1] +&quot;]]&quot;;//!! ]] is hack until getParams is working
			w.nextMatch = 0;
			var params = MediaWikiFormatter.getParams(w);
			var src = params[1];
			src = src.trim().replace(/ /mg,&quot;_&quot;);
			src = src.substr(0,1).toUpperCase() + src.substring(1);
			var palign = &quot;right&quot;; 
			var psrc = &quot;120px-&quot;+src;
			var px = 120;
			var pframed = false;
			ptitle = null;
			for(var i=2;i&lt;params.length;i++) {
				//right, left, center, none, sizepx, thumbnail (thumb), frame, and alternate (caption) text.
				var p = params[i];
				if(p==&quot;right&quot;||p==&quot;left&quot;||p==&quot;center&quot;||p==&quot;none&quot;) {
					palign = p;
				} else if(p==&quot;framed&quot;) {
					pframed = true;
				} else if(/\d{1,4}px/.exec(p)) {
					px = p.substr(0,p.length-2).trim();
					psrc = px + &quot;px-&quot; + src;
				} else {
					ptitle = p;
				}
			}//#end for
//#&lt;td&gt;
//#&lt;div class=&quot;gallerybox&quot;&gt;
//#	&lt;div class=&quot;thumb&quot; style=&quot;padding: 26px 0;&quot;&gt;
//#		&lt;a href=&quot;/wiki/Image:Paul_C%C3%A9zanne_184.jpg&quot; title=&quot;Image:Paul C&#233;zanne 184.jpg&quot;&gt;
//#		&lt;img src=&quot;http://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Paul_C%C3%A9zanne_184.jpg/120px-Paul_C%C3%A9zanne_184.jpg&quot; width=&quot;120&quot; height=&quot;94&quot; alt=&quot;&quot; /&gt;
//#		&lt;/a&gt;
//#	&lt;/div&gt;
//#	&lt;div class=&quot;gallerytext&quot;&gt;
//#		&lt;p&gt;&lt;i&gt;La Pain et les Oeufs&lt;/i&gt; (Bread and Eggs), thought to present austerity, 1865. Signed and dated. Possibly in Spanish style.&lt;/p&gt;
//#	&lt;/div&gt;
//#&lt;/div&gt;
//#&lt;/td&gt;
			var td = createTiddlyElement(rowElem,&quot;td&quot;);
			var gb = createTiddlyElement(td,&quot;div&quot;,null,&quot;gallerybox&quot;);
			var t = createTiddlyElement(gb,&quot;div&quot;,null,&quot;thumb&quot;);
			t.style[&quot;padding&quot;] = &quot;26px 0&quot;;

			var a = createTiddlyElement(t,&quot;a&quot;);
			if(config.options.chkMediaWikiDisplayEnableThumbZoom) {
				a.href = src;
			}
			a.title = ptitle;
			var img = createTiddlyElement(a,&quot;img&quot;);
			img.src = psrc;
			img.width = px;
			img.alt = &quot;&quot;;//ptitle;

			var gt = createTiddlyElement(gb,&quot;div&quot;,null,&quot;gallerytext&quot;);
			p = createTiddlyElement(gt,&quot;p&quot;);
			var oldSource2 = w.source; var oldMatch = w.nextMatch;
			w.source = ptitle; w.nextMatch = 0;
			w.subWikifyUnterm(p);
			w.source = oldSource2; w.nextMatch = oldMatch;

			col++;
			if(col&gt;3) {
				rowElem = createTiddlyElement(table,&quot;tr&quot;);
				col = 0;
			}
			w.source = oldSource;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
		w.nextMatch = nM + &quot;&lt;gallery&gt;&quot;.length*2+1+&quot;Image:&quot;.length;//!! hack
	}
},

{
	name: &quot;mediaWikiHtmlTag&quot;,
	match: &quot;&lt;[a-zA-Z]{2,}(?:\\s*(?:(?:.*?)=[\&quot;']?(?:.*?)[\&quot;']?))*?&gt;&quot;,
	lookaheadRegExp: /&lt;([a-zA-Z]{2,})((?:\s+(?:.*?)=[&quot;']?(?:.*?)[&quot;']?)*?)?\s*(\/)?&gt;/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {
			var e =createTiddlyElement(w.output,lookaheadMatch[1]);
			if(lookaheadMatch[2]) {
				MediaWikiFormatter.setAttributesFromParams(e,lookaheadMatch[2]);
			}
			if(lookaheadMatch[3]) {
				w.nextMatch = this.lookaheadRegExp.lastIndex;// empty tag
			} else {
				w.subWikify(e,&quot;&lt;/&quot;+lookaheadMatch[1]+&quot;&gt;&quot;);
			}
		}
	}
}
];

config.parsers.mediaWikiFormatter = new Formatter(config.mediaWikiFormatters);
config.parsers.mediaWikiFormatter.formatTag = &quot;MediaWikiFormat&quot;;
} // end of &quot;install only once&quot;</pre>
</div>
<div title="Microsoft Office" creator="Will" modifier="Will" created="201111291929" server.type="file" server.host="" changecount="1">
<pre>[[How to make charts in Excel]]</pre>
</div>
<div title="More about HP dv6773 battery" creator="Will" modifier="Will" created="201110161324" modified="201110270135" server.page.revision="201110161328" server.type="file" server.host="" changecount="1">
<pre>HP DV6700 battery specs: 

&lt;html&gt;
&lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
                              &lt;tbody&gt;&lt;tr bgcolor=&quot;#CCCCCC&quot;&gt;
                                &lt;td&gt;Brand:&lt;/td&gt;

                                &lt;td&gt;Level 8 Technology&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                &lt;td&gt;Model:&lt;/td&gt;
                                &lt;td&gt;HP05&lt;/td&gt;
                              &lt;/tr&gt;
							     &lt;tr bgcolor=&quot;#CCCCCC&quot;&gt;

                                &lt;td&gt;Battery Condition:&lt;/td&gt;
                                &lt;td&gt;Brand New OEM Equivalent &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                &lt;td&gt;Battery Type:&lt;/td&gt;
                                &lt;td&gt;6-Cell Li-ion (&lt;a href=&quot;http://www.level8technology.com/hp-ev089aa-battery-hp-ev089aa-laptop-battery-1123&quot;&gt;12-Cell also available&lt;/a&gt;) &lt;/td&gt;

                              &lt;/tr&gt;
                              &lt;tr bgcolor=&quot;#CCCCCC&quot;&gt;
                                &lt;td&gt;Cell Origin:&lt;/td&gt;
                                &lt;td&gt;Panasonic (Japan) &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                &lt;td&gt;Battery Voltage:&lt;/td&gt;

                                &lt;td&gt;10.8V&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr bgcolor=&quot;#CCCCCC&quot;&gt;
                                &lt;td&gt;Battery Capacity:&lt;/td&gt;
                                &lt;td&gt;48WHR 4400mAh&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;

                                &lt;td&gt;Battery Weight:&lt;/td&gt;
                                &lt;td&gt;11.68 oz&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr bgcolor=&quot;#CCCCCC&quot;&gt;
                                &lt;td&gt;Battery Color:&lt;/td&gt;
                                &lt;td&gt;Black&lt;/td&gt;
                              &lt;/tr&gt;

                              &lt;tr&gt;
                                &lt;td&gt;Warranty:&lt;/td&gt;
                                &lt;td&gt;1 Year Warranty &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr bgcolor=&quot;#CCCCCC&quot;&gt;
                                &lt;td&gt;MFR Country:&lt;/td&gt;
                                &lt;td&gt;Assembled in China &lt;/td&gt;

                              &lt;/tr&gt;
                              &lt;tr&gt;
                                &lt;td&gt;Dimensions:&lt;/td&gt;
                                &lt;td&gt;8.1&quot; x 2.3&quot; x 0.8&quot;&lt;/td&gt;
                              &lt;/tr&gt;
                            &lt;/tbody&gt;&lt;/table&gt;
							&lt;p align=&quot;justify&quot;&gt;Level 8 Technology's NEW HP Pavilion dv6700 Battery rated at 10.8V, 48WHR, 4400mAh, 6-Cell Li-ion. Replacement battery is guaranteed to meet or exceed original HP Pavilion dv6700 battery specifications. Compatible with HP Pavilion dv6700 Notebook series including dv6700 CTO, dv6700t CTO, dv6700z CTO, dv6701ca, dv6701tx, dv6701us, dv6702tx, dv6702vx, dv6703tx, dv6703vx, dv6704ca, dv6704nr, dv6704tx, dv6705ca, dv6705tx, dv6707us, dv6708tx, dv6710tx, dv6713ca, dv6714ca, dv6714tx, dv6715tx, dv6716ca, dv6718ca, dv6719tx, dv6720tx, dv6722tx, dv6724ca, dv6725ca, dv6725tx, dv6725us, dv6726tx, dv6727ca, dv6727tx, dv6728ca, dv6728tx, dv6729ca, dv6729tx, dv6729us, dv6730tx, dv6731tx, dv6732tx, dv6733tx, dv6734tx, dv6735tx, dv6736nr, dv6736tx, dv6739tx, dv6741tx, dv6742tx, dv6743tx, dv6744ca, dv6744tx, dv6745tx, dv6745us, dv6746ca, dv6746tx, dv6747cl, dv6747nr, dv6747tx, dv6748ca, dv6748tx, dv6748us, dv6749tx, dv6750tx, dv6751tx, dv6751us, dv6752tx, dv6753ca, dv6753cl, dv6753tx, dv6754tx, dv6755ca, dv6755tx, dv6755us, dv6756tx, dv6756us, dv6757ca, dv6757tx, dv6758us, dv6760tx, dv6762tx, dv6768se, dv6770se, dv6771tx, dv6772nr, dv6773tx, dv6775tx, dv6775us, dv6777tx, dv6779tx, dv6780ca, dv6780se, dv6781tx, dv6783tx, dv6785ca, dv6785se, dv6785tx, dv6787tx, dv6789tx, dv6791tx, dv6793tx, dv6795tx, dv6796tx. These are quality made Level 8 Technology laptop batteries manufactured with premium lithium cells. Li-ion batteries do not suffer from the memory effect. communicate with the laptop to monitor battery performance, output voltage and temperature.&lt;/p&gt;

											&lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;
                  &lt;tbody&gt;&lt;tr&gt;
                  
                    &lt;td&gt;&lt;img src=&quot;/images/NeoSet2/hicap_logo.gif&quot; alt=&quot;Hi-Capacity Battery also available&quot; border=&quot;0&quot;&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;font size=&quot;3&quot;&gt;&lt;strong&gt;&lt;a href=&quot;http://www.level8technology.com/hp-ev089aa-battery-hp-ev089aa-laptop-battery-1123&quot;&gt;12-Cell 8800mAH Battery also available. &lt;/a&gt;&lt;/strong&gt;&lt;/font&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/tbody&gt;&lt;/table&gt;
&lt;/html&gt;


Variation: 

Mainly 6-Cell Li-ion (12-Cell also available)


reference: http://www.level8technology.com/hp-pavilion-dv6700-battery-hp-pavilion-dv6700-laptop-battery-1700
 

HP Pavilion DV2000 DV2100 DV2200 DV2300 DV2400 DV2500 DV2600 DV2700 DV2800 DV2900 Series
HP Pavilion DV6000 DV6100 DV6200 DV6300 DV6400 DV6500 DV6600 DV6700 DV6800 DV6900 Series
COMPAQ Presario V3000 V3100 V3200 V3300 V3400 V3500 V3600 V3700 V3800 V3900 Series
COMPAQ Presario V6000 V6100 V6200 V6300 V6400 V6500 V6600 V6700 V6800 V6900 Series

http://list.gmarket.com.sg/item/10400MAH-LAPTOP-BATTERY-FOR-HP/404472118?search_keyword=hp+dv6000+battery</pre>
</div>
<div title="Multi-beast" creator="Will" modifier="Will" created="201110161305" modified="201110161307" server.page.revision="201110161307" server.type="file" server.host="">
<pre>Multi-beast

have 2 functions: 

1. add hardware support (cuz Mac OS dun recognize my HP laptop)

2. add Boot-loader (so that I dun have to insert EmpireEFI every time) 

Instruction (it's a tryout, may not be correct one)

Firstly I installed &quot;Easy Beast Install&quot; and &quot;System Utility&quot;. Then, screen resolution works, but keyboard and mousepad stop working. 

Then I installed Drives =&gt; Kexts =&gt; Miscellaneous =&gt; Voodoo Controller and Trackpad. Then, keyboard and mouse start working again. 

Then I installed Drives =&gt; Kexts =&gt; Audio =&gt; Universal =&gt; VoodooHDA 0.2.72, and audio working now. 

</pre>
</div>
<div title="P/E ratio" creator="Will" modifier="Will" created="201110310221" modified="201110310432" server.type="file" server.host="" changecount="15">
<pre>(also called ''&quot;Price-earnings Ratio&quot;'' or ''&quot;price multiple&quot;'' or ''&quot;earning multiple&quot;'')
* A valuation ratio of a company's ''current share price'' compared to its ''per-share earnings''.
* alternatively be calculated by dividing the company's [[market capitalization]] by its total annual earnings. //See [[An example of P/E ratio and market capitalization]]//
&gt; For example, if a company is currently trading at $43 a share and earnings over the last 12 months were $1.95 per share, the P/E ratio for the stock would be 22.05 ($43/$1.95).

!!!! Investopedia explains Price-earnings Ratio - P/E Ratio
* In general, a ''high P/E'' suggests that investors are expecting ''higher earnings growth'' in the future, compared to companies with a lower P/E. 
* However, it's only useful to compare P/E ''inside the same industry'' as each industry has much different growth prospects.
* The P/E is sometimes referred to as the &quot;multiple&quot;, because it shows ''how much investors are willing to pay per dollar of earnings''. If a company have P/E=20, the interpretation is that an investor is willing to pay $20 for $1 of current earnings.

Ref: http://www.investopedia.com/terms/p/price-earningsratio.asp</pre>
</div>
<div title="PageTemplate" creator="Will" modifier="Will" created="201110170710" modified="201110240527" changecount="6">
<pre>&lt;!--{{{--&gt;
&lt;div id='header'&gt;
&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='titleLine'&gt;&lt;/div&gt;
&lt;span id='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;- &lt;span id='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;!--}}}--&gt;</pre>
</div>
<div title="Perfume" creator="YourName" modifier="YourName" created="201112040805" modified="201112040806" server.type="file" server.host="" changecount="2">
<pre>''Perfume'', also called extract or extrait perfume, can include 15-40% perfume concentrates. This is the purest form of scented product and is the most expensive as a result.

''Eau de parfum'' contains about 7-15% perfume concentrates. This is the most popular and common form of perfume. It provides a long-lasting fragrance and generally doesn't cost as much as extract perfume.

''Eau de toilette'' has around 1-6% perfume concentrates. This makes for a light scent that doesn't linger as long as the more intense versions. It was originally intended to be a refreshing body splash to help people wake up in the morning.

''Eau de cologne'' is sometimes used interchangeably with the term eau de toilette. However, the concoction began as the name of a light, fresh fragrance mixed with citrus oils and was made popular by Napoleon. Some perfumers today have a version of this called eau fraiche. </pre>
</div>
<div title="Programming (General)" creator="YourName" modifier="YourName" created="201110170324" modified="201203302122" server.page.revision="201110170324" server.type="file" server.host="" changecount="2">
<pre>[[C Format specifiers]]

[[TortoiseSVN ]]</pre>
</div>
<div title="Ruby on Rails" creator="Will" modifier="Will" created="201110170907" server.type="file" server.host="" changecount="1">
<pre>[[The Master instruction of Ruby on Rails]]</pre>
</div>
<div title="Run Windows (or any other OS) on iPad" creator="Will" modifier="Will" created="201111030750" modified="201111030751" server.type="file" server.host="" changecount="5">
<pre>This include 2 software: 

# Virtualbox - to virtualize a Windows VM
# Air Display - display the VM onto iPad, which uses iPad as an external display.

Go to the following post for instruction. very easy ==&gt;
[[How to use iPad as an external display (both PC and Mac)]]
[[How to get VM work Full Screen on External Display]]</pre>
</div>
<div title="Shared folder in Virtual Box" creator="YourName" modifier="Will" created="201110170322" modified="201110311702" server.page.revision="201110170322" server.type="file" server.host="" changecount="1">
<pre>For Windows to access Mac OS host: 

Senario: I am using Mac OS to virtual Windows XP. I shared a folder called &quot;Dropbox&quot; from my mac. 

solution from 
http://forums.virtualbox.org/viewtopic.php?t=6625


After you set up the folder in the settings menu, you can easily connect to it from within windows because it is treated as a virtual network share.

So you just have to open a command window: Start-&gt;Run... and type &quot;cmd&quot;
into the box.
In the opened terminal window you enter the following command:

''net use x: \\vboxsvr\Dropbox''

Mind the backslashes and the space between &quot;x:&quot; and the path.

Of course you have to replace &quot;sharename&quot; with the name of the folder you set up in VirtualBox for sharing.

If you don't get any error message everything went fine and you can access the network drive &quot;x:&quot; using the Explorer.
</pre>
</div>
<div title="Shell" creator="Will" modifier="Will" created="201110240124" modified="201110270628" server.type="file" server.host="" changecount="7">
<pre>[[Shell]] acts as the glue between you and the big, hairy beast that hides in the deepest, darkest recesses of your computer -- [[kernel]]

This beast, known as the [[kernel]], happens to be at the top of your computer's food chain; it governs resources. 

The first shell (sh), dubbed the [[Bourne Shell]] in honour of its creator [[Stephen Bourne]], was developed at AT&amp;T Bell Labs to accompany the first release of the Unix operating system. 

Bourne Shell serves as the foundation for all shells ever created since day 1. 

Bourne Again Shell ([[Bash]]), is fully compatible with the Bourne Shell and includes extra features such as job control, command-line editing, and increased scripting support. [[Bash]] is considered to be Bourne Shell's official replacement. </pre>
</div>
<div title="SiteSubtitle" creator="Will" modifier="Will" created="201110160515" modified="201110170813" server.page.revision="201110160515" server.type="file" server.host="" changecount="1">
<pre>Two bicycle makers, from Ohio, one day decided to fly.</pre>
</div>
<div title="SiteTitle" creator="Will" modifier="Will" created="201110160513" modified="201110160514" server.page.revision="201110160514" server.type="file" server.host="">
<pre>Will's Wiki Page</pre>
</div>
<div title="SleepEnabler" creator="Will" modifier="Will" created="201110171848" modified="201110181207" server.page.revision="201110171848" server.type="file" server.host="" changecount="1">
<pre>SleepEnabler.kext will break down the system. 

If you did so that and cannot boot. At iBoot page, type: 

''Wake=N0 pmVersion=0''

the problem should be solved.</pre>
</div>
<div title="Solaris on VM" creator="Will" modifier="Will" created="201110251703" modified="201110251709" server.type="file" server.host="" changecount="3">
<pre>Download Solaris10_8-11_VM file. 

VirtualBox =&gt; File =&gt; Import Appliance =&gt; Use existing disk image (which is the one we downloaded)

Note: the default name is root, default password is blank. 
</pre>
</div>
<div title="StyleSheet" creator="Will" modifier="Will" created="201110170710" modified="201110240526" changecount="5">
<pre>/***
http://tiddlystyles.com/#theme:TiddlyPedia
***/

/*{{{*/
body{
 background: #f9f9f9 url(headbg.jpg) no-repeat top left;
}

#titleLine{
 display: block;
 background: transparent url(wiki.png) no-repeat 18px -7px;
 _background: transparent;
 height: 120px;
 _height: 135px;
 width: 150px;
 color: #000;
 border: 1px;
 padding: 0;
 margin: 0;
}

* html #titleLine{
 filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='wiki.png',sizingMethod='scale');
}

#contentWrapper #siteTitle a{
 display: inline;
 font-weight: bold;
 color: #000;
 font-size: 13px;
}

#siteSubtitle{
 padding: 0;
}

#siteTitle, #mainMenu{
 position: static;
}

#contentWrapper #sidebar{
 top: 0;
 left: 0;
}

#displayArea {
 margin: 0 0 0 15em;
}

#messageArea{
 position: fixed;
 top: 0;
 right: 0;
 font-size: 10px;
 border: 1px solid #aaa;
 background: #fff;
 z-index: 25;
}

#messageArea a:link{
 color: #002bb8;
 text-decoration: none;
}

#messageArea a:hover{
 text-decoration: underline;
}

.viewer{
 background: #fff;
 border: 1px solid #aaa;
 padding: 1em;
margin: 0;
}

.body{
 padding: 1px;
}

.title{
 background: #fff;
 border: 1px solid #aaa;
 display: inline;
 margin-left: .5em;
 padding: 2px .5em;
 border-bottom: 0;
 font-weight: bold;
 color: #000;
 font-size: 1.2em;
}

.toolbar{
 visibility: visible;
 display: inline;
 padding: 0;
 font-family: sans-serif;
}

.toolbar a.button:link,.toolbar a.button:visited{
 background: #fff;
 border: 1px solid #aaa;
 color:#002bb8;
 font-size: 11px;
 padding-bottom: 0;
 margin-right: .25em;
}

/* TiddlyPedia was Created by Clinton Checketts based on the Monobook skin of Wikipedia */

#contentWrapper .toolbar .button:hover{
 border-bottom: 1px solid #fff;
 background: #fff;
 color:#002bb8;
}

.toolbar a.button:hover{
 border-bottom: 1px solid #fff;
 background: #fff;
 color:#000;
}

#displayArea .viewer a,a.button:link,a.button:visited,
a.tiddlyLink:link,a.tiddlyLink:visited,
#sidebarOptions .sliderPanel a{
 color:#002bb8;
 background: transparent;
 border: 0;
}

.viewer a:hover,a.button:hover,a.button:active,
a.tiddlyLink:hover,a.tiddlyLink:active,
.viewer a.button:hover,
#sidebarOptions .sliderPanel a:hover{
 color:#002bb8;
 background: transparent;
 text-decoration: underline;
}

#mainMenu{
 font-family: sans-serif;
 text-align: left;
 font-size: x-small;
 width: 100%;
 margin: 0;
 padding: 0;
}

#mainMenu h1{
 font-size: 11px;
 font-weight: normal;
 padding: 0;
 margin: 0;
 background: transparent;
}

#mainMenu ul{
 font-size: 11px;
 border: 1px solid #aaa;
 padding: .25em 0;
 margin: 0;
 list-style-type: square;
 list-style-image: url(bullet.gif);
 background: #fff;
 width: 100%;
}

#mainMenu li{
 margin: 0 0 0 2em;
 padding: 0;
}

#contentWrapper #mainMenu a:link,#contentWrapper #mainMenu a:visited{
 color:#002bb8;
 padding: 0;
 margin: 0;
 background: transparent;
}

#mainMenu .externalLink {
 text-decoration: none;
}

#mainMenu .externalLink:hover {
 text-decoration: underline;
}

#sidebar{
 padding: .5em;
 font-family: sans-serif;
}

#sidebarOptions{
 border: 1px solid #aaa;
 background: #fff;
 margin-top: .5em;
 width: 100%;
}

#sidebar .sliderPanel{
 margin: 0;
}

#contentWrapper #sidebarOptions .button,#contentWrapper #sidebarOptions .button:hover{
 color:#002bb8;
 padding: .1em 0 .1em 2em;
 background: transparent url(bullet.gif) 10px -2px no-repeat;
}

#sidebarOptions input{
 width: 80%;
 margin: 0 .5em;
}

#sidebarTabs{
 background: #fff;
 margin-top: .5em;
 width: 100%;
}

#sidebarTabs .tabContents,#sidebarTabs .tabContents .tabContents{
 border: 1px solid #aaa;
 background: #fff;
}

#sidebarTabs .tabSelected,#sidebarTabs .tabcontents .tabSelected {
 background: #fff;
 border: 1px solid #aaa;
 border-bottom: 0;
 cursor: default;
 padding-bottom: 3px;
 color: #000;
}

#sidebarTabs .tabUnselected,#sidebarTabs .tabContents .tabUnselected{
 background: #aaa;
 padding-bottom: 0;
 color: #000; 
}

#contentWrapper #sidebarTabs .tiddlyLink,#contentWrapper #sidebarTabs .button,
#contentWrapper #sidebarTabs a.tiddlyLink:hover,#contentWrapper #sidebarTabs a.button:hover{
 background: transparent;
 color: #002bb8;
}

.footer{
 margin: -1em 0 1em 0; 
}

.footer .button:hover,.editorFooter .button:hover{
background: transparent;
 color: #002bb8;
 border-bottom: 1px solid #002bb8;
}

#popup{
 background: #e9e9e9;
 color: #000;
}

#popup hr{
 border-color: #aaa;
 background-color: #aaa;
}

#popup a{
 color: #000;
}

#popup a:hover,#contentWrapper #sidebarTabs #popup a:hover{
 background: #666;
 color: #fff;
 text-decoration: none;
}

#displayArea .tiddler a.tiddlyLinkNonExisting{
 color: #ba0000;
}

#displayArea .tiddler a.externalLink{
 text-decoration: none;
 color:#002bb8;
 padding-right: 1em;
 background: transparent url(external.png) 100% 50% no-repeat;
}

#displayArea .tiddler a.externalLink:hover{
 text-decoration: underline;
}

.viewer pre{
 background: #e9e9e9;
 border: 1px solid #666;
}

.viewer h1, .viewer h2, .viewer h3, .viewer h4, .viewer h5, .viewer h6{
 background: transparent;
 border-bottom: .2em solid #aaa;
}

#sidebar .sliderPanel{
 background: #e9e9e9;
}

#sidebar .sliderPanel input{width: auto;}

.tagged, .tagging, .listTitle{
 float: none;
 display: inline;
}

.tagged li, .tagging li,
.tagged ul, .tagging ul{
 display: inline;
}

/*}}}*/</pre>
</div>
<div title="The Master instruction of Ruby on Rails" creator="Will" modifier="Will" created="201110170907" modified="201110170908" server.type="file" server.host="" changecount="2">
<pre>Hi Ran,

Sorry for the late reply!!! :) Here are a list of our installation directions. This hopefully will give you a general idea of what we will be using to program our applications. If you're still keen on working on this project, lets meet up next week to talk about what we can achieve together? 

Cheers
Kel 

Note: We're using Mac/Linux platforms for development, because of previous conflicts using Windows. 
Install ubuntu if you're using PC!

Installation

Roadhop is currently running on the following platforms/dependencies:

Server side:
 1. ruby 1.9.2
 2. ruby on rails (3.0.7)
 2. mysql

Deployment:
 1. heroku, http://heroku.com

Version control:
 1. git, http://git-scm.com/documentation, http://progit.org/book/ch1-0.html

Client side:
 1. jquery, jquery ui, http://jqueryui.com/
 2. blueprint.css, http://www.blueprintcss.org (just a css framework
that allows easy building of grids on webpages)


Before starting on Monday, it would be useful for you to get the
necessary stuff installed and familiarize yourself with a little bit
of rails.

If you have time follow this tutorial till chapter 2:
 http://ruby.railstutorial.org/ruby-on-rails-tutorial-book

This would run you through installation of everything necessary and go
through setting up a demo app.
If you don't have time, try making sure you have these installed:

 1. RVM - Ruby Version Manager
   https://rvm.beginrescueend.com/, with ruby 1.9.2 and ruby 1.8.7.

   If rvm gives you problems just run ruby -v on your command line to
check you have at least 1.8.7 installed.
   I can help with the troubleshooting of rvm later.

 2. Rails (if ruby is installed correctly gem install rails in your
command line should work. Do not run with sudo.)
 3. Git (should come pre-installed).

Another resource: http://guides.rubyonrails.org/

More to read (if you have no previous experience with facebook apps):
 1. A good overview on facebook apps:
http://devcenter.heroku.com/articles/facebook

</pre>
</div>
<div title="TiddlyWiki" creator="Will" modifier="Will" created="201110160516" modified="201111250129" server.page.revision="201110170655" server.type="file" server.host="" changecount="52">
<pre>TiddlyWiki is a reusable non-linear personal web notebook. It's a unique wiki that people around the world love using to keep ideas and information organised.

! How-to
WikiWords in TiddlyWiki are turned into links automatically.
[[How to set themes in TiddlyWiki]]
[[MediaWikiFormatterPlugin]]
[[How to add MediaWiki plugin to TiddlyWiki]]
[[What if I accidentally closed BackstageArea (means the top-bar)]]


!Wiki Markup

[[tiddlywiki testing]]

Basic Markup: [[Basic TiddlyWiki Markup]]
For in-depth: [[TiddlyWiki Markup]]




-------------
TiddlyWiki Reference and FAQs: 

TiddlyWiki for the rest of us http://www.giffmex.org/twfortherestofus.html
Tiddler Toddler http://tiddlertoddler.tiddlyspot.com/
Themes &amp; Plugins http://checkettsweb.com/styles/themes.htm
</pre>
</div>
<div title="TiddlyWiki Markup" creator="Will" modifier="Will" created="201110190708" modified="201111250130" server.page.revision="201110190717" server.type="file" server.host="" changecount="16">
<pre>! Inline Formatting

| ''To Format Text As...'' | ''Use This Mark-Up'' |
| ''Bold'' | {{{''Bold''}}} Two single-quotes, not a double-quote. |
| //Italics// | {{{//Italics//}}} |
| ''//Bold Italics//'' | {{{''//Bold Italics//''}}} |
| __Underline__ | {{{__Underline__}}} |
| --Strikethrough-- | {{{--Strikethrough--}}} |
| Super^^script^^ | {{{Super^^script^^}}} |
| Sub~~script~~ | {{{Sub~~script~~}}} |
| @@Highlight@@ |  {{{@@Highlight@@}}} |
| &lt;nowiki&gt;PlainText No ''Formatting''&lt;/nowiki&gt; | {{{ &lt;nowiki&gt;PlainText No ''Formatting''&lt;/nowiki&gt; }}} |

! Block Elements

!! Headings

!&lt;nowiki&gt;!&lt;/nowiki&gt;Heading Level 1
!!&lt;nowiki&gt;!!&lt;/nowiki&gt;Heading Level 2
!!!&lt;nowiki&gt;!!!&lt;/nowiki&gt;Heading Level 3
!!!!&lt;nowiki&gt;!!!!&lt;/nowiki&gt;Heading Level 4
!!!!!&lt;nowiki&gt;!!!!!&lt;/nowiki&gt;Heading Level 5
!!!!!!&lt;nowiki&gt;!!!!!!&lt;/nowiki&gt;Heading Level 6

!! Unordered Lists
!!! Example
* Unordered List, Level 1
** Unordered List, Level 2
*** Unordered List, Level 3

!!!Mark-Up Used
{{{
* Unordered List, Level 1
** Unordered List, Level 2
*** Unordered List, Level 3
}}}

!! Ordered Lists
!!! Example
# Ordered List, Level 1A
# Ordered List, Level 1B
## Ordered List, Level 2A
### Ordered List, Level 3A

!!! Mark-Up Used
{{{
# Ordered List, Level 1A
# Ordered List, Level 1B
## Ordered List, Level 2A
### Ordered List, Level 3A
}}}

!! Definition Lists
!!! Example
; term
: description

!!! Mark-Up Used
{{{
; term
: description
}}}

!! Blockquotes
!!! Example
&gt; blockquote, level 1
&gt;&gt; blockquote, level 2
&gt;&gt;&gt; blockquote, level 3

!!! Mark-Up Used
{{{
&gt; blockquote, level 1
&gt;&gt; blockquote, level 2
&gt;&gt;&gt; blockquote, level 3
}}}

!!! Block Example
&lt;&lt;&lt;
blockquote
&lt;&lt;&lt;

!!! Mark-Up Used
{{{
&lt;&lt;&lt;
blockquote
&lt;&lt;&lt;
}}}

!! Preformatted
!!! Example
{{{
preformatted (e.g. code)
}}}

!!! Markup Used
&lt;nowiki&gt;{{{&lt;/nowiki&gt;
&lt;nowiki&gt;preformatted (e.g. code)&lt;/nowiki&gt;
&lt;nowiki&gt;}}}&lt;/nowiki&gt;

!! Tables

{{annotation{There is also an in-depth article on [[Tables]].}}}

Columns are delimited by a single pipe character ({{{|}}}); a new line creates a new row.

!!!Example

|CssClass|k
|!heading column 1|!heading column 2|h
|row 1, column 1|row 1, column 2|
|row 2, column 1|row 2, column 2|
|&gt;|COLSPAN|
|ROWSPAN| &amp;hellip; |
|~| &amp;hellip; |
|CssProperty:value;&amp;hellip;| &amp;hellip; |
|caption|c

!!!Markup
{{{
 |CssClass|k
 |!heading column 1|!heading column 2|h
 |row 1, column 1|row 1, column 2|
 |row 2, column 1|row 2, column 2|
 |&gt;|COLSPAN|
 |ROWSPAN| &amp;hellip; |
 |~| &amp;hellip; |
 |CssProperty:value;&amp;hellip;| &amp;hellip; |
 |caption|c
}}}

Notes:
* The {{{&gt;}}} marker creates a &quot;colspan&quot;, causing the current cell to merge with the one to the right.
* The {{{~}}} marker creates a &quot;rowspan&quot;, causing the current cell to merge with the one above.

!! Images

See [[tiddlywiki.com|http://www.tiddlywiki.com/#EmbeddedImages]]

! Links

* [[WikiWord|WikiWords]] are automatically transformed to hyperlinks to the respective tiddler
** the automatic transformation can be suppressed by preceding the respective WikiWord with a tilde ({{{~}}}): {{{~WikiWord}}}
* [[PrettyLinks]] are enclosed in double square brackets and contain the desired tiddler name: {{{[[tiddler name]]}}}
** optionally, a custom title or description can be added, separated by a pipe character ({{{|}}}): {{{[[title|target]]}}} ''N.B.:'' The target can also be any website (i.e. URL), folder or file. 

!! Examples

* a simple website (URL) requires no markup: {{{http://domain.tld}}}
* website (URL) : {{{[[label|http://domain.tld]]}}}
* Unix-style folder: {{{[[label|file:///folder/file]]}}}
* Windows drive-mapped folder {{{[[label|file:///c:/folder/file]]}}}
* Windows network share: {{{[[label|file://///server/folder/file]]}}}
* File in a local subfolder of the TiddlyWiki location: {{{[[label|folder/file]]}}}

! Custom Styling

* inline styles: {{{@@CssProperty:value;CssProperty:value;...@@}}} ''N.B.:''' CSS color definitions should use lowercase letters to prevent the inadvertent creation of WikiWords.
* class wrapper: &lt;nowiki&gt;{{customClass{...}}}&lt;/nowiki&gt;

!! Example

{{indent{
lorem ''ipsum'' dolor '''sit''' amet
}}}

(The &lt;code&gt;indent&lt;/code&gt; is provided by the TiddlyWiki core in [[StyleSheetLayout]].)

! Inserting HTML

raw HTML can be inserted by enclosing the respective code in HTML tags ({{{&lt;html&gt;...&lt;/html&gt;}}}).

! Avoiding Wikificitation ==

To prevent wiki markup from taking effect for a particular section (e.g. special characters), that section can be enclosed in three double quotes: e.g. {{{&quot;&quot;&quot;WikiWord&quot;&quot;&quot;}}} (cf. [[Escaping]]).

! Special Markers

* {{{&lt;br&gt;}}} forces a manual line break
* {{{----}}} and {{{&lt;hr&gt;}}} create a horizontal rule
* [[HTML entities|http://www.tiddlywiki.com/#HtmlEntities]]
* {{{&gt;}}} calls the respective [[Macros|macro]]
* To hide text within a tiddler so that it is not displayed, it can be wrapped in {{{/%}}} and {{{%/}}}. This can be a useful trick for hiding drafts or annotating complex markup.

! See Also

* [[Wiki Markup]]
* [[Multi-Line Contents]]
* [[Tiddler format]] (TiddlyWiki markup version / Cheat Sheet)
* [[Macros]]
* [[Customization]]
</pre>
</div>
<div title="TortoiseSVN" creator="YourName" modifier="YourName" created="201203302121" modified="201203302137" server.type="file" server.host="" changecount="11">
<pre>! From Wikipedia

TortoiseSVN is a Subversion client, implemented as a Microsoft Windows shell extension. It is free software released under the GNU General Public License.

TortoiseSVN won the Sourceforge.net 2007 Community Choice Award for Best Tool or Utility for Developers.[1] The TortoiseMerge utility comes with the TortoiseSVN distribution to visually compare differences between two files.[2] It is available from the Tigris.org website.

TortoiseSVN can be integrated into Microsoft Visual Studio by using a third-party plugin such as VisualSVN,[3] VsTortoise, and AnkhSVN. A third-party repository monitoring application using TortoiseSVN was named SVN-Monitor, and then evolved into Vercue in 2011.[4] 

! How-to
# [[TortoiseSVN on server]]
# [[TortoiseSVN on local repository]]</pre>
</div>
<div title="TortoiseSVN on local repository" creator="YourName" modifier="YourName" created="201203302134" modified="201203302139" server.type="file" server.host="" changecount="5">
<pre>When using TortoiseSVN in CPE207 lab, the server repository is set up by the lab sup. However, for local repository, I need to set up repository myself on my local disk. 

It is very simple:

# create a new folder, empty. 
# right click ==&gt; create repository here.
# then choose structure of storage. For simplicity reasons, choose to launch repo-browser.
# now an empty repository is created.
# drag and drop project folder into repo-browser.
# server creation done! 
# Now, can check up anywhere and get the code from local repository. 

More on:
http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-repository.html</pre>
</div>
<div title="TortoiseSVN on server" creator="YourName" modifier="YourName" created="201203302130" modified="201203302132" server.type="file" server.host="" changecount="2">
<pre>I have wrote some docs on TortoiseSVN, as shown below.

https://docs.google.com/presentation/d/1ChkekV_6ijOoMlCMpDtFtyHnGcXWcviZ33huFAvK_6w/edit#slide=id.p13
http://www.youtube.com/watch?v=zWUnf7tsCoM&amp;context=C42768c8ADvjVQa1PpcFMeRleXmu751nwUvwVcYwuaRvR6qw-KQnM=

Official:
http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-qs-guide.html</pre>
</div>
<div title="Ubuntu" creator="Will" modifier="Will" created="201110161321" modified="201110251915" server.page.revision="201110170311" server.type="file" server.host="" changecount="4">
<pre>! Intro
[[Ubuntu Shortcut Key]]
[[Ubuntu Install - 32 bit Vs 64 bit]]

! How-to
[[How to open current directory from Ubuntu Terminal]]

! In-depth
[[Linux File Permission]]
[[Ubuntu Troubleshooting]]</pre>
</div>
<div title="Ubuntu Install - 32 bit Vs 64 bit" creator="Will" modifier="Will" created="201110161321" modified="201110161321" server.page.revision="201110161321" server.type="file" server.host="">
<pre>32-bit and 64-bit refer to the size (or width) of a chunk of memory or more accurately, the memory registers in a computer's CPU - this defines how much data the processor can handle in a single operation.

List of processors with 64-bit support:

   * AMD
      * Athlon64, Athlon FX, Athlon X2, Phenom, Semprons that use AM2/AM2+/AM3 socket, Turion64
   * Intel
      * F and 5x1 series Pentium 4 using the &quot;Prescott&quot; core
      * Pentium D
      * Core 2 (Solo, Duo &amp; Quad)

      * Core i5 (all)
      * Core i7 (all)
   * VIA
   * 
      * Isiah
A 32-bit computer has a word size of 32 bits, this limits the memory theoretically to 4GB.
A 64-bit computer will be able to address up to 16.8 million TB (16 exabytes) although constraints are in place that limit this to around 1TB.


How to check 32 bit or 64 bit: 

The PC: in Windows, go to System Infomation, look for &quot;System Type&quot; (eg. X86-based PC)
The CPU: open CPU-Z, look for &quot;Instructions&quot;. If you see EM64T (if its Intel) or AMD64 (if its AMD) then your processor is 64-bit capable. Mine is (MMX, SSE, EM64T, VT-x).
</pre>
</div>
<div title="Ubuntu Shortcut Key" creator="YourName" modifier="YourName" created="201110170311" modified="201110170312" server.page.revision="201110170312" server.type="file" server.host="">
<pre>For those shortcut key lovers out there, here is a long list of keyboard shortcuts for Ubuntu Hardy. Most of them should work in the previous version of Ubuntu as well. Enjoy the list.
 
General keyboard shortcutsCtrl + A = Select all
Ctrl + C = Copy the highlighted content to clipboard
Ctrl + V = Paste the clipboard content
Ctrl + N = New (Create a new document, not in terminal)
Ctrl + O = Open a document
Ctrl + S = Save the current document
Ctrl + P = Print the current document
Ctrl + W = Close the close document
Ctrl + Q = Quit the current application
Keyboard shortcuts for GNOME desktopCtrl + Alt + F1 = Switch to the first virtual terminal
Ctrl + Alt + F2(F3)(F4)(F5)(F6) = Select the different virtual terminals
Ctrl + Alt + F7 = Restore back to the current terminal session with X
Ctrl + Alt + Backspace = Restart GNOME
Alt + Tab = Switch between open programs
Ctrl + Alt + L = Lock the screen.
Alt + F1 = opens the Applications menu
Alt + F2 = opens the Run Application dialog box.
Alt + F3 = opens the Deskbar Applet
Alt + F4 = closes the current window.
Alt + F5 = unmaximizes the current window.
Alt + F7 = move the current window
Alt + F8 = resizes the current window.
Alt + F9 = minimizes the current window.
Alt + F10 =  maximizes the current window.
Alt + Space = opens the window menu.
Ctrl + Alt + + = Switch to next X resolution
Ctrl + Alt + - = Switch to previous X resolution
Ctrl + Alt + Left/Right = move to the next/previous workspace
Keyboard shortcuts for TerminalCtrl + A = Move cursor to beginning of line
Ctrl + E = Move cursor to end of line
Ctrl + C = kills the current process.
Ctrl + Z = sends the current process to the background.
Ctrl + D = logs you out.
Ctrl + R = finds the last command matching the entered letters.
Enter a letter, followed by Tab + Tab = lists the available commands beginning with those letters.
Ctrl + U = deletes the current line.
Ctrl + K = deletes the command from the cursor right.
Ctrl + W = deletes the word before the cursor.
Ctrl + L = clears the terminal output
Shift + Ctrl + C = copy the highlighted command to the clipboard.
Shift + Ctrl + V (or Shift + Insert) = pastes the contents of the clipboard.
Alt + F = moves forward one word.
Alt + B = moves backward one word.
Arrow Up/Down = browse command history
Shift + PageUp / PageDown = Scroll terminal output
Keyboard shortcuts for CompizAlt + Tab = switch between open windows
Win + Tab = switch between open windows with Shift Switcher or Ring Switcher effect
Win + E = Expo, show all workspace
Ctrl + Alt + Down = Film Effect
Ctrl + Alt + Left mouse button = Rotate Desktop Cube
Alt + Shift + Up = Scale Windows
Ctrl + Alt + D = Show DesktopWin + Left mouse button = take screenshot on selected area
Win + Mousewheel = Zoom In/Out
Alt + Mousewheel = Transparent Window
Alt + F8 = Resize Window
Alt + F7 = Move Window
Win + P = Add Helper
F9 = show widget layer
Shift + F9 = show water effects
Win + Shift + Left mouse button = Fire Effects
Win + Shift + C = Clear Fire Effects
Win + Left mouse button = Annotate: Draw
Win + 1 = Start annotation
Win + 3 = End annotation
Win + S = selects windows for grouping
Win + T = Group Windows together
Win + U = Ungroup Windows
Win + Left/Right = Flip Windows
Keyboard shortcut for NautilusShift + Ctrl + N = Create New Folder
Ctrl + T = Delete selected file(s) to trash
Alt + ENTER = Show File/Folder Properties
Ctrl + 1 = Toggle View As Icons
Ctrl + 2 = Toggle View As List
Shift + Right = Open Directory (Only in List View)
Shift + Left = Close Directory (Only in List View)
Ctrl + S = Select Pattern
F2 = Rename File
Ctrl + A = Select all files and folders
Ctrl + W = Close Window
Ctrl + Shift + W = Close All Nautilus Windows
Ctrl + R = Reload Nautilus Window
Alt + Up = Open parent directory
Alt + Left = Back
Alt + Right = Forward
Alt + Home = go to Home folder
Ctrl + L = go to location bar
F9 = Show sidepane
Ctrl + H = Show Hidden Files
Ctrl + + = Zoom In
Ctrl + - = Zoom Out
Ctrl + 0 = Normal Size

(For those who want to configure your own keyboard shortcuts, you can do it at System-&gt;Preferences-&gt;Keyboard Shortcuts.)

Which one is your favorite keyboard shortcuts? Is there anymore shortcut that I have left out? Let me know in the comment and I will add it in.
</pre>
</div>
<div title="Ubuntu Troubleshooting" creator="Will" modifier="Will" created="201110170900" modified="201110170901" server.type="file" server.host="" changecount="4">
<pre>&lt;html&gt;&lt;p&gt;
Compiz destroyed desktop UI, no response from user command solution:
&lt;/p&gt;
&lt;p&gt;
     Ctrl + Alt + F1 (enter Single Terminal Mode)&lt;br&gt;
     $unity --reset&lt;br&gt;
     Ctrl + Alt + F7 switch back to desktop GUI
&lt;/p&gt;&lt;/html&gt;</pre>
</div>
<div title="Unix" creator="Will" modifier="Will" created="201110240047" modified="201110270702" server.type="file" server.host="" changecount="32">
<pre>! Intro
[[kernel]] is used to control hardware for utility to use. 
utility is command. 
[[Shell]] is the interface between kernel and user. 

; [[Unix hidden file]] 
: is one whose first character is a dot or period.

; ''directory tree'' structure. 
: Unix is directory tree structure. This is different from ''multi-root hierarchical'' structure used in Windows and Mac OS (means all devices incld CDROM, HDD etc. are located at the same top-most level). 

! How-to
[[How to start a specific shell command]]
[[How to make and run an executable]]

[[Unix Commands]]
[[Unix Directories]]
[[Unix Output]]
[[Unix Input]]
[[Unix general I/O]]
[[Unix Files]]

! Deployment
[[Solaris on VM]]</pre>
</div>
<div title="Unix Commands" creator="Will" modifier="Will" created="201110260216" modified="201110260637" server.type="file" server.host="" changecount="16">
<pre>[[Unix]]

!ls

list files with type: 
$ ls -F

list files as a vertical list
&amp; ls -1
(this is a number one)

list hidden file
$ ls -a

It it possible to group options for a command: 
$ ls -aF1

display only the name of directory
$ ls -d

!cat

view the contents of a file. 

can view multiple files:
$ cat -b fruit usr

view w/ line number:
$ cat -n filename

view w/ line number (skip blank lines):
$ cat -b filename1 


!wc 

Word Count ( the number of words and lines in a file.)
$ wc -l filename1 filename2

available options: -l -w -m -c
(for more info, $ man wc )

! cp
copy files

''Interactive Mode ''- means confirm overwrite: 
$ cp -i filename1 filename2 destination
overwrite fruits.sav? (y/n)

!mv
rename file
$ mv fruits fruiiiiits

confirmation:
$ mv -i filename destination

!rm 
remove files
$ rm fruits users Documents/
error: cuz directory is unable to remove. ''But the other 2 files are removed.''

</pre>
</div>
<div title="Unix Directories" creator="Will" modifier="Will" created="201110260554" modified="201110260740" server.type="file" server.host="" changecount="14">
<pre>In Unix:
*two dots (..) represent parent tree
*single dot (.) represent current directory.
eg. 
{{{
$ ls ./myfoldername
}}}
and
{{{
$ ls myfoldername
}}}
is same thing. 

!mkdir
create a directory
&gt;$ mkdir /somedirectory/directoryname

create a directory no matter the parent exitst or not. 
&gt;$ mkdir /somedirectory1/somedirectory2/somedirectory3/directoryname
after this, somedirectory1/somedirectory2/somedirectory3 will be created. 

! cp -r 
copy a directory

! mv
move a directory

!rmdir and rm -r
rmdir is &quot;safe&quot; remove a empty directory
rm -r is &quot;unsafe&quot; cuz it removes all contents

</pre>
</div>
<div title="Unix Files" creator="Will" modifier="Will" created="201110270702" modified="201110301751" server.type="file" server.host="" changecount="16">
<pre>! File Types
!!!Determine File Type
&lt;&lt;&lt;
{{{
$ ls -l
}}}
for directory:
{{{
&gt;$ ls -ld
}}}
you may get something like this:
{{{
-rwxr-xr-x	1 ranga	users	2368 Jul 11 15:57 .profile*
drwxr-xr-x 	27 ranga	users	2048 Jul 23 23:49 /home/ranga/
}}}
&lt;&lt;&lt;
|First Character|c
|Character|File Type|h
|-|regular file|
|l|symbolic link|
|c|character special|
|b|block special|
|p|named pipe|
|d|directory|
More:
[[File Type: Links]]
[[File Type: Device files]]
</pre>
</div>
<div title="Unix Input" creator="Will" modifier="Will" created="201110261053" modified="201110261127" server.type="file" server.host="" changecount="10">
<pre>[[Unix Output]]

! Input Redirection 
!!! use file
read a file to be command input.
eg. 
$ Mail ranga@soda.berkeley.edu &lt; Final_exam_answers

!!! use here document
An additional use of input redirection
{{{
cmd &lt;&lt; delimiter 
document 
delimiter
}}}

//The delimiter must be a single word that does not contain spaces or tabs.//

eg. 
{{{
$ cat &gt; urls &lt;&lt; MYURLS 
&gt; http://www.csua.berkeley.edu/~ranga/ 
&gt; http://www.cisco.com/ 
&gt; http://www.marathon.org/story/ http://www.gnu.org/
MYURLS
}}}
The input comes from here document, and output is stored in the file urls. 

!Read Input from User: 
eg. 
for Mac OS X
{{{
$ echo -n &quot;whats your name?&quot; 
read NAME
}}}
for other
{{{
$ echo &quot;whats your name? \c&quot; 
read NAME
}}}
Then user's input is stored in variable NAME.

! Pipelines
Using one program to manipulate the output of another.
format: 
{{{
cmd1 | cmd2 | ... | cmdN
}}}
eg. 
$ tail -f /var/adm/messages | more
means the output of ''tail'' is piped into the input of ''more''. 
the result is output is viewed on screen. 

! File Descriptors
|three files opened for each command|c
|abbre|file|descriptor|h
|STDIN|Standard Input|0|
|STDOUT|Standard Output|1|
|STDERR|Standard Error|2|

You can associate any file with file descriptors using the exec command.
{{{
exec n&gt;file 
exec n&gt;&gt;file
}}}
the first one is overwrite, second one is append. 

eg. 
&gt; $ exec 4&gt;fd4.out
means associate fd4.out with file descriptor 4.
&gt; $ exec n&lt;file
means open a file for reading
</pre>
</div>
<div title="Unix Output" creator="Will" modifier="Will" created="201110260747" modified="201110261120" server.type="file" server.host="" changecount="48">
<pre>[[Unix Input]]

When a command produces output, it's written to 
* ''STDOUT'' - standard output
When it's error message, it's written to 
* ''STDERR'' - standard error

!Display a output (means on screen): 
!!!echo
mostly used for simple formatting. 

Escape Sequences for the echo
\n - new line
\t - a tab
\c - generate user prompts

!!!printf
can use Format specifiers
|Unix Format Specifiers|c
|Letter|description|h
|s|string|
|c|Character |
|d|Decimal (integer) number|
|x|Hexadecimal number|
|o|Octal number |
|e|Exponential floating-point number|
|f|Fixed floating-point number |
|g|Compact floating-point number|
eg. 
right aligned:
&gt;printf &#8220;%16s\t%16s\n&#8221; &#8220;Name&#8221; &#8220;User Name&#8221;
left aligned:
&gt;printf &#8220;%-16s\t%-16s\n&#8221; &#8220;Name&#8221; &#8220;User Name&#8221;

! Output Redirection (means save to file) 
!!! &gt; write output to file
eg. date &gt; now.txt

A group of outputs: 
$ { date; uptime; who ; } &gt; mylog
{{{
note the space near &quot;{ &quot; and &quot; }&quot;
}}}

!!! &gt;&gt; append output to file
eg. 
$ { date; uptime; who ; } &gt;&gt; mylog

! Both display and write to file
!!! tee
eg.
$ { date; uptime; } | tee now


</pre>
</div>
<div title="Unix general I/O" creator="Will" modifier="Will" created="201110261132" modified="201110270623" server.type="file" server.host="" changecount="15">
<pre>[[Unix Output]]
[[Unix Input]]

! Unix General Input/Output Redirection
{{{
cmd 1&gt; file
}}}
Here the 1 explicitly states that STDOUT is being redirected into the given file.
{{{
cmd 0&lt;file
}}}
0 means STDIN. This is standard input redirection.

! Redirecting STDOUT and STDERR to separate files:
{{{
cmd 1&gt; file1 2&gt; file2
}}}
we can omit the number 1 and use append. 
{{{
cmd &gt;&gt; file1 2&gt;&gt; file2
}}}
eg.
&gt; ln &#8211;s ch05.doc ./docs &gt;&gt; /tmp/ln.log 2&gt; /dev/null

!!! /dev/null
&lt;&lt;&lt;
The file ''/dev/null'' is a special file available on all UNIX systems used to discard output. It is sometimes referred to as the bit bucket. If you redirect the output of a command into ''/dev/null'', it is discarded. 

For example, the command
$ rm file &gt; /dev/null 
discards the output of the rm command.
&lt;&lt;&lt;
! Redirecting STDOUT and STDERR to same files:
{{{
cmd &gt; file 2&gt;&amp;1
cmd &gt;&gt; file 2&gt;&amp;1
}}}
eg. 
{{{
rm &#8211;rf /tmp/tmp_dir &gt; /dev/null 2&gt;&amp;1 ; mkdir /tmp/tmp_dir
}}}
This command removes the directory, and its output, or any error message it prints, is redirected to /dev/null (means thrown away). 
eg. 
{{{
rdate &#8211;s ntp.nasa.gov &gt;&gt; /var/log/rdate.log 2&gt;&amp;1
}}}
Use rdate command to synchronize time and keep a log of all the messages.

!!! print message to STDOUT
{{{
echo str 1&gt;&amp;2 
printf format args 1&gt;&amp;2
}}}

! Redirecting 2 File Descriptors
!!! output:
{{{
exec n&gt;&amp;m
}}}

!!! input:
{{{
exec n&lt;&amp;m
}}}

n is a new file descriptor and m is an open output file descriptor. 

eg. 
&lt;&lt;&lt;
$ exec 4&gt;out.txt
$ exec 5&gt;&amp;4
$ date 1&gt;&amp;5
&lt;&lt;&lt;
end up in the file out.txt

eg.
&lt;&lt;&lt;
$ exec 6&lt;&amp;0
&lt;&lt;&lt;
file descriptor 6 becomes a duplicate of STDIN. </pre>
</div>
<div title="Unix hidden file" creator="Will" modifier="Will" created="201110260226" modified="201110260558" server.type="file" server.host="" changecount="8">
<pre>In [[Unix]], an Unix hidden file is one whose first character is a dot or period.

Many programs, including the shell, use such files to store configuration information. Some examples:

*.profile, the Bourne shell (sh) initialization script
*.kshrc, the Korn Shell (ksh) initialization script
*.cshrc, the C Shell (csh) initialization script
*.rhosts, the remote shell configuration file

All files that do not start with the . character are considered ''visible''.
</pre>
</div>
<div title="Use Android as sound card of Mac" creator="Will" modifier="Will" created="201110230308" modified="201110231250" server.type="file" server.host="" changecount="2">
<pre>Use SpeakShare

http://code.google.com/p/speakershare/

1. install Soundflower
2. Set &quot;Soundflower (2ch)&quot; as your default output device from System Preferences Sound pane.  

3. install SpeakShare Mac dmg file.
4. Select &quot;Soundflower (2ch)&quot; as client sound mixer from the SpeakShare preference. 

5. intall SpeakShare android app.
6. open it.
7. Now the phone is the server. Dun set anything on Phone. On Mac, type in server address and connect. 
8. Done! 


Feedback: sound quality drop after 10 minutes of watching iTunes video. MP3 playback is quite OK although there is 2-seconds lag.</pre>
</div>
<div title="Use iOS as the sound card of the Mac" creator="Will" modifier="Will" created="201110230206" server.type="file" server.host="" changecount="1">
<pre>Use software called Airfoil

Mac as server, and iOS as client. </pre>
</div>
<div title="VBA" creator="YourName" modifier="YourName" created="201110170304" modified="201110170304" server.page.revision="201110170304" server.type="file" server.host="">
<pre>[[VBA code reference]]</pre>
</div>
<div title="VBA code reference" creator="YourName" modifier="YourName" created="201110170304" server.page.revision="201110170304" server.type="file" server.host="">
<pre>Set value:

Range(&quot;BA4&quot;).FormulaR1C1 = &quot;adg&quot;


How to filter data: 
Sub CTO_PO()

    'filter PO column AJ - only blank
    ActiveSheet.Range(&quot;$A$1:$BQ$2117&quot;).AutoFilter Field:=36, Criteria1:=&quot;=&quot;
   
    'filter credit status column U  &lt;&gt; &quot;B&quot;
    ActiveSheet.Range(&quot;$A$1:$BQ$2117&quot;).AutoFilter Field:=21, Criteria1:=&quot;&lt;&gt;B &quot;, Operator:=xlFilterValues
   
End Sub



How to un-filter data:

Sub ClearFilters()
   
    ActiveSheet.Range(&quot;$A$1:$BQ$2117&quot;).AutoFilter Field:=36
    ActiveSheet.Range(&quot;$A$1:$BQ$2117&quot;).AutoFilter Field:=21
    ActiveSheet.Range(&quot;$A$1:$BQ$2117&quot;).AutoFilter Field:=20
    ActiveSheet.Range(&quot;$A$1:$BQ$2117&quot;).AutoFilter Field:=51

End Sub



Set/unset auto-filter arrow

Sub test()

  If Not ActiveSheet.AutoFilterMode Then
    ActiveSheet.Range(&quot;A1&quot;).AutoFilter
  End If
  'Worksheets(&quot;Sheet1&quot;).AutoFilterMode = False
 
End Sub



Auto-filter
    ActiveSheet.Range(&quot;$A$1:$BQ$2110&quot;).AutoFilter Field:=57, _
                Criteria1:=&quot;&gt;=1/10/2011&quot;, Operator:=xlAnd, Criteria2:=&quot;&lt;=11/10/2011&quot;


Format a date (but does not work on Mac Excel I guess)

Format(Date,&quot;ddd, d-mmmm-yyyy&quot;)

http://www.classanytime.com/mis333k/sjdatetime.html



</pre>
</div>
<div title="Virtual Machine" creator="YourName" modifier="Will" created="201110170314" modified="201203111755" server.page.revision="201110170457" server.type="file" server.host="" changecount="14">
<pre>! General
[[VirtualBox disk images]]
[[VirtualBox seamless mode]]
[[How to get VM work Full Screen on External Display]]

! Windows host
[[Hackintosh on VM]]

! Mac OS host
[[Chrome OS on VM]]
[[Solaris on VM]]
[[Shared folder in Virtual Box]]

! Linux VM
[[How to install Guest Additions in Linux VM]]
[[How to install Parallel tools in Ubuntu]]

! Cool feature
[[Run Windows (or any other OS) on iPad]]
[[How to increase Dropbox size with VM]]</pre>
</div>
<div title="VirtualBox disk images" creator="Will" modifier="Will" created="201111030315" modified="201111030317" server.type="file" server.host="" changecount="5">
<pre>The common format is .vdi

Although other format like .vmdk is also possible.

This is a just-download-and-use operating system. 

It's so-far the easiest way of implementing a new operating system. </pre>
</div>
<div title="VirtualBox seamless mode" creator="Will" modifier="Will" created="201111030313" server.type="file" server.host="" changecount="1">
<pre>This is just great! 

Can run 2 OS simultaneously without any laggy thingy.</pre>
</div>
<div title="Visual Studio (Windows Phone)" creator="YourName" modifier="YourName" created="201206100909" modified="201302191850" server.type="file" server.host="" changecount="2">
<pre>[[How to open up Marketplace Test Kit]]
[[How to configure Visual Studio to display line number]]</pre>
</div>
<div title="WIll" creator="YourName" modifier="Will" created="201110161004" modified="201110251907" server.page.revision="201110161009" server.type="file" server.host="" changecount="1">
<pre>Will is a IT guy.
</pre>
</div>
<div title="Web" creator="Will" modifier="Will" created="201201151818" server.type="file" server.host="" changecount="1">
<pre>[[HTML]]</pre>
</div>
<div title="What if I accidentally closed BackstageArea (means the top-bar)" creator="Will" modifier="Will" created="201111030330" modified="201111030330" server.type="file" server.host="" changecount="2">
<pre>point your mouse to the top-right corner of the page, you will see a hidden button appear saying &quot;backstage&quot;. Click it. 

BackstageArea is back!</pre>
</div>
<div title="Where is the iOS Simulator local data stored on Mac?" creator="Will" modifier="Will" created="201111231923" modified="201111231923" server.type="file" server.host="" changecount="2">
<pre>/Users/willran168/Library/Application Support/iPhone Simulator/5.0/Applications</pre>
</div>
<div title="Wifi solution for Hackintosh (PdaNet)" creator="Will" modifier="Will" created="201110161046" modified="201110161048" server.page.revision="201110161048" server.type="file" server.host="">
<pre>The solution is to use a Android Phone's wifi by connecting the USB cable. The computer share the mobile phone's internet. 

Software to use: 

PdaNet (android)
PdaNet (Mac OS) for Method 1 only


2 Methods: 

1. thru USB cable (faster)
2. thru bluetooth (slower but convenient) 

Method 1: USB

I will take Mac OS as an example. 

1. install PdaNet Mac application. 
2. start PdaNet app on android phone
3. enable USB debugging
4. set up finish, connect USB cable and use.

Method 2: 

This method does not require any desktop client installed. I will take Mac OS as an example. 

1. open system preferences.
2. go to network
3. Add a bluetooth DUN ( means Dail-Up Network)
4. Model: Generic Dailup
5. TelePhone Number: 777 (not 123 as in many cases)
6. connect
7. Now use. 

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6248975669/&quot; title=&quot;PdaNet-connection by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6042/6248975669_d79cd40db9.jpg&quot; width=&quot;500&quot; height=&quot;448&quot; alt=&quot;PdaNet-connection&quot;&gt;&lt;/a&gt;
&lt;/html&gt;

Speed

USB is much faster during web-browsing. A tough test of downloading a Ubuntu file is done. Result shows that USB download speed is around 150 - 200 KB/s while Bluetooth connection is only 30KB/s. 

&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6248975795/&quot; title=&quot;PdaNet-download2 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6157/6248975795_272c7f6641.jpg&quot; width=&quot;397&quot; height=&quot;90&quot; alt=&quot;PdaNet-download2&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6249504274/&quot; title=&quot;PdaNet-download1 by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6157/6249504274_d938f71a11.jpg&quot; width=&quot;398&quot; height=&quot;96&quot; alt=&quot;PdaNet-download1&quot;&gt;&lt;/a&gt;
&lt;/html&gt;


reference: http://softbanksucks.blogspot.com/2011/05/pdanet-bluetooth-dun-setup-for.html
</pre>
</div>
<div title="Will's Wordlist 0-18/10/2011" creator="Will" modifier="Will" created="201110180840" modified="201110230229" server.type="file" server.host="" changecount="4">
<pre>&lt;html&gt;
&lt;table&gt;
&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2011-10-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;workaround&quot;)'&gt;workaround&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;&#24037;&#20316;&#21306;,  adj. &#26242;&#26102;&#36991;&#24320;, n. &#24037;&#20316;&#21306;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2011-10-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;ingenious&quot;)'&gt;ingenious&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#26426;&#28789;&#30340;, &#31934;&#21046;&#30340;, &#26377;&#29420;&#21019;&#24615;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2011-10-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;cognac&quot;)'&gt;cognac&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#30333;&#20848;&#22320;&#37202;&#30340;&#19968;&#31181; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2011-10-15&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;essence&quot;)'&gt;essence&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#31934;&#39635;, &#26412;&#36136;, &#35201;&#32032;, &#39321;&#31934; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;2011-10-13&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;titbit&quot;)'&gt;titbit&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#29645;&#21697;,&#37327;&#23569;&#21619;&#32654;&#30340;&#39135;&#21697;, &#36259;&#38395;, &#23569;&#37327;&#21560;&#24341;&#20154;&#30340;&#19996;&#35199; ; =tidbit&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;2011-10-12&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;consolidation&quot;)'&gt;consolidation&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#24041;&#22266;, &#21152;&#24378;, &#32479;&#19968;, &#21512;&#24182;, &#32852;&#21512; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;comma-delimited&quot;)'&gt;comma-delimited&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#29992;&#36887;&#21495;&#20998;&#38548;&#30340;&#25991;&#20214;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;delimit&quot;)'&gt;delimit&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#23450;&#30028;&#38480;, &#21010;&#30028; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;enthusiasm&quot;)'&gt;enthusiasm&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#28909;&#24773;, &#28909;&#24515;, &#28909;&#34935;&#30340;&#20107;&#29289; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;hustle&quot;)'&gt;hustle&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;v.&#20652;&#20419;, &#36214;&#32039;&#20570;, &#25512;&#25633;, &amp;lt;&#20442;&amp;gt;(&#19981;&#27491;&#24403;)&#20080;&#21334;,&#27450;&#35784; ; n.&#24537;&#20081;, &#25512;&#25633;,&amp;lt;&#20442;&amp;gt;&#27450;&#35784;&#34892;&#20026;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;11&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;grind&quot;)'&gt;grind&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;v.&#30952;, &#21387;&#36843;, &#30910;&#30862;, &#30952;&#24471;&#21553;&#21553;&#21709;, &#36880;&#28176;&#20572;&#39039; ; n.&#33510;&#20107;, &#30952;, &#30910; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;12&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;cordless&quot;)'&gt;cordless&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#26080;&#32447;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;13&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;turbulent&quot;)'&gt;turbulent&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj. &#29378;&#26292;&#30340;, &#39578;&#21160;&#30340;, &#21160;&#33633;&#30340;,  &#27769;&#28044;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;14&lt;/td&gt;&lt;td&gt;2011-10-10&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;disclosure&quot;)'&gt;disclosure&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#25581;&#21457;, &#20844;&#24320;, &#36879;&#38706; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;2011-10-08&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;demolish&quot;)'&gt;demolish&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;v.&#25286;&#27585;, &#30772;&#22351;, &#39539;&#20498;, &amp;lt;&#21475;&amp;gt;&#21507;&#20809;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;2011-10-07&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;exaggerate&quot;)'&gt;exaggerate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#22840;&#24352;, &#22840;&#22823;, &#23545;...&#35328;&#36807;&#20854;&#23454; ; vi.&#22840;&#24352;, &#22840;&#22823;&#20854;&#35789; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;17&lt;/td&gt;&lt;td&gt;2011-10-04&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;wasabi&quot;)'&gt;wasabi&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#26085;&#26412;&#33445;&#26411; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;2011-10-01&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;smile&quot;)'&gt;smile&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#24494;&#31505;, &#31505;&#23481; ; v.&#24494;&#31505;, &#38706;&#20986;&#31505;&#23481; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;19&lt;/td&gt;&lt;td&gt;2011-10-01&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;frown&quot;)'&gt;frown&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#30385;&#30473;, &#19981;&#24742; ; v.&#19981;&#21516;&#24847;, &#30385;&#30473;&#22836; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;2011-10-01&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;therapy&quot;)'&gt;therapy&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#30103;&#27861;, &#27835;&#30103; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;21&lt;/td&gt;&lt;td&gt;2011-10-01&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;prevalent&quot;)'&gt;prevalent&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#27969;&#34892;&#30340;, &#26222;&#36941;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;22&lt;/td&gt;&lt;td&gt;2011-09-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;subversion&quot;)'&gt;subversion&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#39072;&#35206;, &#30772;&#22351; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;23&lt;/td&gt;&lt;td&gt;2011-09-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;deliberate&quot;)'&gt;deliberate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#28145;&#24605;&#29087;&#34385;&#30340;, &#25925;&#24847;&#30340;, &#20174;&#23481;&#19981;&#36843;&#30340; ; v.&#20180;&#32454;&#32771;&#34385;, &#30740;&#35752; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;24&lt;/td&gt;&lt;td&gt;2011-09-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;auxiliary&quot;)'&gt;auxiliary&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#21161;&#21160;&#35789;, &#36741;&#21161;&#29289;, &#24110;&#21161;&#32773;; adj.&#36741;&#21161;&#30340;, &#38468;&#21152;&#30340;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;2011-09-07&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;realm&quot;)'&gt;realm&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#39046;&#22495;, &#29579;&#22269; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;26&lt;/td&gt;&lt;td&gt;2011-09-07&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;chunk&quot;)'&gt;chunk&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#30702;&#32982;&#30340;&#20154;&#25110;&#29289;, &#21402;&#22359;&#65288;&#29255;&#65289;,  &#30456;&#24403;&#22823;&#30340;&#37327; ; vt.&#65288;&#39640;&#23572;&#22827;&#29699;&#65289;&#27809;&#20987;&#20013;; vi.&#21457;&#20986;&#29467;&#20914;&#30340;&#22768;&#38899; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;27&lt;/td&gt;&lt;td&gt;2011-09-05&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;retain&quot;)'&gt;retain&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#20445;&#25345;, &#20445;&#30041;, &#35760;&#20303;, &#32856;&#35831; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;28&lt;/td&gt;&lt;td&gt;2011-09-05&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;designated&quot;)'&gt;designated&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj. &#25351;&#23450;&#30340;,  &#29305;&#25351;&#30340;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;2011-09-04&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;enumeration&quot;)'&gt;enumeration&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#35745;&#31639;,  &#21015;&#20030;,  &#32454;&#30446;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;2011-09-04&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;mutable&quot;)'&gt;mutable&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#21487;&#21464;&#30340;, &#26131;&#21464;&#30340;, &#21453;&#22797;&#26080;&#24120;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;31&lt;/td&gt;&lt;td&gt;2011-09-04&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;immutable&quot;)'&gt;immutable&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj. &#19981;&#21487;&#21464;&#30340;,  &#19981;&#21464;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;32&lt;/td&gt;&lt;td&gt;2011-09-04&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;avenge&quot;)'&gt;avenge&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt. &#20026; ... &#25253;&#22797;,  &#25253;&#20167; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;33&lt;/td&gt;&lt;td&gt;2011-09-01&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;deceptive&quot;)'&gt;deceptive&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#39575;&#20154;&#30340;, &#34394;&#20266;&#30340;,&#35784;&#27450;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;34&lt;/td&gt;&lt;td&gt;2011-08-31&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;funky&quot;)'&gt;funky&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#26032;&#24335;&#30340;, &#26102;&#39654;&#30340; ; adj.&#24778;&#24656;&#30340;, &#38665;&#33261;&#30340;, &#65288;&#20442;&#65289;&#31232;&#22855;&#21476;&#24618;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;35&lt;/td&gt;&lt;td&gt;2011-08-31&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;agony&quot;)'&gt;agony&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#26497;&#24230;&#30340;&#30171;&#33510;, &#25379;&#25166; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;36&lt;/td&gt;&lt;td&gt;2011-08-31&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;Colon&quot;)'&gt;Colon&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20882;&#21495;, &#32467;&#32928;, &#31185;&#26391;(&#21733;&#26031;&#36798;&#40654;&#21152;&#21644;&#33832;&#23572;&#29926;&#22810;&#30340;&#36135;&#24065;&#21333;&#20301;); (Colon)&#31185;&#38534;(&#24052;&#25343;&#39532;&#28207;&#24066;) &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;37&lt;/td&gt;&lt;td&gt;2011-08-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;ambient&quot;)'&gt;ambient&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#21608;&#22260;&#30340;, &#27675;&#22260;&#30340; ; n.&#29615;&#22659; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;38&lt;/td&gt;&lt;td&gt;2011-08-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;genome&quot;)'&gt;genome&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#22522;&#22240;&#32452;,  &#26579;&#33394;&#20307;&#32452; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;2011-08-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;overstate&quot;)'&gt;overstate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;v. &#22840;&#22823;&#30340;&#21465;&#36848;, &#22840;&#24352; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;2011-08-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;synthesis&quot;)'&gt;synthesis&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#21512;&#25104;, &#32508;&#21512;, &#32508;&#21512;&#20998;&#26512; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;2011-08-30&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;intimidating&quot;)'&gt;intimidating&lt;/td&gt;&lt;td&gt;(2)&#36739;&#29983;&lt;/td&gt;&lt;td&gt;adj. &#23041;&#32961;&#30340;,  &#21636;&#21636;&#36924;&#20154;&#30340; ; &#21160;&#35789;intimitate&#30340;&#29616;&#22312;&#20998;&#35789;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;2011-08-29&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;aluminum&quot;)'&gt;aluminum&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#38109;; =aluminium&#65288;&#33521;&#65289;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;urban&quot;)'&gt;urban&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#22478;&#24066;&#30340;, &#37117;&#24066;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;44&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;lounge&quot;)'&gt;lounge&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20241;&#24687;&#23460;, &#20505;&#26426;&#23460;, &#36215;&#23621;&#23460; ; v.&#38386;&#33633;, &#25042;&#25955;&#22320;&#26012;&#38752; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;banquet&quot;)'&gt;banquet&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#23476;&#20250; ; vi.&#21442;&#21152;&#23476;&#20250; ; vt.&#23476;&#35831;, &#35774;&#23476; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;46&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;masquerade&quot;)'&gt;masquerade&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#21270;&#22918;&#33310;&#20250;, &#20266;&#35013; ; v.&#20266;&#35013; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;47&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;brickbat&quot;)'&gt;brickbat&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#30862;&#30742;,&#19981;&#21033;&#30340;&#35780;&#35770;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;paranoic&quot;)'&gt;paranoic&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;&#22916;&#24819;&#29378;&#30340;; &#22916;&#24819;&#30151;&#32773;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;hibernate&quot;)'&gt;hibernate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vi.&#20908;&#30496;, &#34544;&#20239;, &#36807;&#20908; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;prone&quot;)'&gt;prone&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#26131;&#20110; ... &#30340;, &#26377; ... &#20542;&#21521;&#30340;, &#20463;&#21351;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;trivial&quot;)'&gt;trivial&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#19981;&#37325;&#35201;&#30340;, &#29712;&#30862;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;52&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;avert&quot;)'&gt;avert&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#36716;&#24320;, &#36991;&#20813;, &#38450;&#27490; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;aversion&quot;)'&gt;aversion&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#23244;&#24694;,  &#24974;&#24680;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;guilt&quot;)'&gt;guilt&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#32618;&#34892;, &#20869;&#30106; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;lavish&quot;)'&gt;lavish&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#22823;&#26041;&#30340;, &#20016;&#23500;&#30340;, &#28010;&#36153;&#30340; ; vt.&#28010;&#36153;, &#24951;&#24936;&#32473;&#20104; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;2011-08-28&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;sandals&quot;)'&gt;sandals&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#20937;&#38795;,  &#20241;&#38386;&#38795;, &#27973;&#21475;&#38795;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;57&lt;/td&gt;&lt;td&gt;2011-08-24&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;asterisk&quot;)'&gt;asterisk&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n. &#26143;&#21495;(*)&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;58&lt;/td&gt;&lt;td&gt;2011-08-23&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;premise&quot;)'&gt;premise&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#21069;&#25552; ; vt.&#39044;&#36848;, &#25552;&#35770;,&#20551;&#35774; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;2011-08-23&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;delegate&quot;)'&gt;delegate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20195;&#34920; ; v.&#27966; ... &#20026;&#20195;&#34920;, &#22996;&#27966;, &#25480;&#26435;, &#22996;&#25176; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;60&lt;/td&gt;&lt;td&gt;2011-08-23&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;assertive&quot;)'&gt;assertive&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#26029;&#23450;&#30340;, &#33258;&#20449;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;2011-08-23&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;initiative&quot;)'&gt;initiative&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#21019;&#22987;&#30340;, &#21021;&#27493;&#30340;, &#33258;&#21457;&#30340; ; n.&#39318;&#21019;&#31934;&#31070;, &#20027;&#21160;&#26435;, &#31532;&#19968;&#27493; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;2011-08-23&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;leverage&quot;)'&gt;leverage&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#26464;&#26438;, &#26464;&#26438;&#20316;&#29992;, &#20030;&#20538;&#32463;&#33829; ; v.&#20030;&#20538;&#32463;&#33829;, &#34917;&#20805;(&#37329;&#38065;&#31561;) &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;2011-08-22&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;compensation&quot;)'&gt;compensation&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#34917;&#20607;, &#36180;&#20607;, &#36180;&#20607;&#37329; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;2011-08-22&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;commission&quot;)'&gt;commission&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20323;&#37329;, &#22996;&#21592;&#20250;, &#22996;&#25176;, &#22996;&#20219;, &#29359;&#32618; ; vt.&#25480;&#20104;, &#20351;&#26381;&#24441;, &#22996;&#25176; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;2011-08-22&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;in lieu of&quot;)'&gt;in lieu of&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;&#20195;&#26367; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;66&lt;/td&gt;&lt;td&gt;2011-08-22&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;soak&quot;)'&gt;soak&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#20351;&#28024;&#36879;, &#21560;&#20837;, &#28024;&#27927;, &amp;lt;&#20442;&amp;gt;&#20351;&#21917;&#37257;,&#25970;&#31481;&#26464; ; vi.&#28024;&#27873;, &#28183;&#36879;, &#28183;&#20837;, &amp;lt;&#20442;&amp;gt;&#37207;&#37202;; n.&#28024;, &#28287;&#36879;,&amp;lt;&#20442;&amp;gt;&#37202;&#39740;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;2011-08-20&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;cursor&quot;)'&gt;cursor&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20809;&#26631; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;2011-08-19&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;parenthesis&quot;)'&gt;parenthesis&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#22278;&#25324;&#21495;, &#25554;&#20837;&#35821; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;69&lt;/td&gt;&lt;td&gt;2011-08-18&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;compensate&quot;)'&gt;compensate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;v.&#34917;&#20607;, &#36180;&#20607;, &#20184;&#25253;&#37228;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;70&lt;/td&gt;&lt;td&gt;2011-08-18&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;tempting&quot;)'&gt;tempting&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj. &#35825;&#24785;&#20154;&#30340; ; &#21160;&#35789;tempt&#30340;&#29616;&#22312;&#20998;&#35789;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;2011-08-18&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;dumping&quot;)'&gt;dumping&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20542;&#38144; ; &#21160;&#35789;dump&#30340;&#29616;&#22312;&#20998;&#35789;&#24418;&#24335;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;2011-08-18&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;associate&quot;)'&gt;associate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#32852;&#24819;, &#32852;&#21512; ; n.&#20249;&#20276;, &#21516;&#20107;, &#21516;&#20276; ; adj.&#21103;&#30340;, &#20849;&#20107;&#30340;, &#26377;&#32852;&#31995;&#30340; ; n.&#20934;&#23398;&#22763;&#23398;&#20301;&#33719;&#24471;&#32773;; vi.&#20132;&#24448; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;73&lt;/td&gt;&lt;td&gt;2011-08-18&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;analyst&quot;)'&gt;analyst&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20998;&#26512;&#23478; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;2011-08-18&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;suppress&quot;)'&gt;suppress&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#38215;&#21387;, &#38544;&#30610;, &#21387;&#21046;, &#27490;&#20303;, &#31105;&#27490; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;75&lt;/td&gt;&lt;td&gt;2011-08-14&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;clutter&quot;)'&gt;clutter&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt.&#24324;&#20081;, &#28151;&#20081; ; n.&#26434;&#20081; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;76&lt;/td&gt;&lt;td&gt;2011-08-14&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;penultimate&quot;)'&gt;penultimate&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#20498;&#25968;&#31532;&#20108;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;77&lt;/td&gt;&lt;td&gt;2011-08-14&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;sympathy&quot;)'&gt;sympathy&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#21516;&#24773;, &#21516;&#24773;&#24515;, &#21516;&#24863;, &#36190;&#21516;, &#24944;&#38382; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;78&lt;/td&gt;&lt;td&gt;2011-08-14&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;underwhelm&quot;)'&gt;underwhelm&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;vt. &#26410;&#30041;&#19979;&#28145;&#21051;&#21360;&#35937;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;2011-08-14&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;semantic&quot;)'&gt;semantic&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#35821;&#20041;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;80&lt;/td&gt;&lt;td&gt;2010-03-22&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;feasibility&quot;)'&gt;feasibility&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#21487;&#34892;&#24615; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;81&lt;/td&gt;&lt;td&gt;2010-03-19&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;dashed&quot;)'&gt;dashed&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#34394;&#32447;&#30340; ; &#21160;&#35789;dash&#30340;&#36807;&#21435;&#24335;&#21644;&#36807;&#21435;&#20998;&#35789;&#24418;&#24335;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;82&lt;/td&gt;&lt;td&gt;2010-03-19&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;proportional&quot;)'&gt;proportional&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#25104;&#27604;&#20363;&#30340;, &#30456;&#31216;&#30340; ; n.[&#25968;]&#27604;&#20363;&#39033;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;83&lt;/td&gt;&lt;td&gt;2010-03-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;comprehensive&quot;)'&gt;comprehensive&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#20840;&#38754;&#30340;, &#24191;&#27867;&#30340;, &#32508;&#21512;&#30340;, &#29702;&#35299;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;2010-03-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;recursive&quot;)'&gt;recursive&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj. &#36882;&#24402;&#30340;,  &#24490;&#29615;&#30340;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;2010-03-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;sibling&quot;)'&gt;sibling&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20804;&#24351;&#22992;&#22969; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;86&lt;/td&gt;&lt;td&gt;2010-03-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;perpetual&quot;)'&gt;perpetual&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#27704;&#20037;&#30340;, &#27704;&#24658;&#30340;, &#19968;&#20877;&#24448;&#22797;&#30340; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;87&lt;/td&gt;&lt;td&gt;2010-03-17&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;amendment&quot;)'&gt;amendment&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#20462;&#27491;, &#20462;&#27491;&#26696;, &#25913;&#36827; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;88&lt;/td&gt;&lt;td&gt;2010-02-25&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;norm&quot;)'&gt;norm&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#35268;&#33539;, &#26631;&#20934; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;2010-02-25&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;nutshell&quot;)'&gt;nutshell&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;n.&#22362;&#26524;&#22771;, &#23567;&#23481;&#22120;,&#31616;&#26126;&#25212;&#35201; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;90&lt;/td&gt;&lt;td&gt;2010-02-25&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;peripheral&quot;)'&gt;peripheral&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;adj.&#22806;&#22260;&#30340;, &#19981;&#37325;&#35201;&#30340; ; n.&#22806;&#22260;&#35774;&#22791; &lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;91&lt;/td&gt;&lt;td&gt;2010-02-25&lt;/td&gt;&lt;td class=&quot;hlink&quot; onclick='javascript:dictShow(&quot;in a nutshell&quot;)'&gt;in a nutshell&lt;/td&gt;&lt;td&gt;(1)&#24456;&#29983;&lt;/td&gt;&lt;td&gt;&#26497;&#20854;&#31616;&#25324;&#22320;, &#31616;&#21333;&#22320;&#35828; &lt;/td&gt;
&lt;/table&gt;
&lt;/html&gt;

IMO - in my opinion
IMHO - im my honest opinion
YVW - You're Very Welcome
CSR - corperate social responsibility
</pre>
</div>
<div title="Will's Wordlist 19/10-24/10/2011" creator="Will" modifier="Will" created="201110240232" modified="201110241218" server.type="file" server.host="" changecount="3">
<pre>1	pregnant	&#24456;&#29983;	adj.&#24576;&#23381;&#30340;, &#20805;&#28385;&#30340;, &#24847;&#21619;&#28145;&#38271;&#30340;
2	peculiarity	&#19968;&#33324;	n. &#29305;&#36136;, &#29305;&#24615;, &#24618;&#30294;, &#21476;&#24618;
3	prestige	&#19968;&#33324;	n.&#23041;&#26395;, &#22768;&#26395;
4	synergize	&#19968;&#33324;	vi. &#36215;&#22686;&#25928;&#21058;&#20316;&#29992;; vt. &#21327;&#21516;&#21152;&#24378; ... &#30340;&#27963;&#21160;
5	superficial	&#19968;&#33324;	adj.&#34920;&#38754;&#30340;, &#32932;&#27973;&#30340;
6	quotation	&#24456;&#29983;	n.&#35821;&#24405;, &#24341;&#29992;, &#34892;&#24773;, &#24341;&#35821;, &#25253;&#20215;
7	intimidating	&#24456;&#29983;	adj. &#23041;&#32961;&#30340;, &#21636;&#21636;&#36924;&#20154;&#30340; ; &#21160;&#35789;intimitate&#30340;&#29616;&#22312;&#20998;&#35789;
8	prestigious	&#24456;&#29983;	adj.&#20139;&#26377;&#22768;&#26395;&#30340;, &#22768;&#26395;&#24456;&#39640;&#30340;
9	computer	&#19968;&#33324;	n.&#30005;&#33041;, &#35745;&#31639;&#26426;
10	your	&#19968;&#33324;	pron.&#20320;&#30340;, &#20320;&#20204;&#30340;
11	liberate	&#19968;&#33324;	v.&#35299;&#25918;, &#20351;&#33719;&#24471;&#33258;&#30001;, &#37322;&#20986;, &#25918;&#20986;
12	seamlessly connect	&#19968;&#33324;	&#26080;&#32541;&#36830;&#25509;
13	seamless	&#19968;&#33324;	adj.&#25345;&#32493;&#30340;, &#26080;&#32541;&#30340;
14	revamp	&#19968;&#33324;	vt.&#25913;&#36896;, &#20462;&#34917;; n.&#25913;&#32452;, &#25913;&#24314;
15	shatter	&#24456;&#29983;	vt.&#31881;&#30862;, &#27585;&#22351;, &lt;&#21475;&gt;&#20351;&#38663;&#39559;,&#20351;&#31934;&#30130;&#21147;&#23613; ; vi.&#31881;&#30862; ; n.&#30862;&#29255;
16	marrow	&#24456;&#29983;	n. &#39592;&#39635;, &#31934;&#21326;, &#27963;&#21147; ; n. &#35199;&#33899;&#33446;
17	dodge	&#24456;&#29983;	v.&#36991;&#24320;, &#36530;&#36991; ; n.&#36530;&#36991;, &#35809;&#35745;
18	cunning	&#24456;&#29983;	adj.&#29409;&#29502;&#30340;, &#26377;&#30524;&#20809;&#30340;, &#31934;&#24039;&#30340;, &#21487;&#29233;&#30340; ; n.&#12304;C&#12305;&#29409;&#35784;, &#28789;&#24039;
19	stumble	&#24456;&#29983;	v.&#32458;&#20498;, &#36434;&#36314;, &#29359;&#38169;&#35823;, &#26080;&#24847;&#20013;&#21457;&#29616; ; n.&#32458;&#20498;, &#38169;&#35823;
20	collusion	&#24456;&#29983;	n. &#20849;&#35851;, &#21246;&#32467;
21	regnant	&#24456;&#29983;	adj. &lt;&#27491;&#24335;&#25991;&gt;&#32479;&#27835;&#30340;, &#25191;&#25919;&#30340;; adj. &#21344;&#25903;&#37197;&#22320;&#20301;&#30340;, &#27969;&#34892;&#30340;
22	appliance	&#35013;&#32622;
23	appliance computer	&#20010;&#20154;&#35745;&#31639;&#26426;
24	evolve		&#28436;&#21270;
25	mighty		&#24378;&#26377;&#21147;&#30340;&#65292;&#38750;&#24120;
26	catering	&#21253;&#21150;&#37202;&#24109;&#65292;&#25552;&#20379;&#39184;&#39278;
27	catering basiness	&#39278;&#39135;&#19994;
28	diminish	&#20943;&#23567;
29	cardio-		&#24515;&#33039;
30	cardio		&#26377;&#27687;&#36816;&#21160;
31	aerobics	&#26377;&#27687;&#36816;&#21160;
32	stylus		&#23574;&#31508;
33	sanity		&#31070;&#24535;&#27491;&#24120;&#65292;&#29702;&#26234; (op. insanity)
34	stunning		&#26497;&#22909;&#30340;
35	legitimate		&#21512;&#24773;&#21512;&#29702;&#30340;&#65292;&#21512;&#27861;&#30340;
36	obsolete		&#24223;&#24323;&#30340;
37	compound	&#28151;&#21512;&#65292;&#22797;&#21512;&#29289;&#65307;&#22949;&#21327;&#65292;&#21644;&#35299;
38	indent	&#32553;&#36827;
39	elapse	&#65288;&#26102;&#38388;&#65289;&#28040;&#36893;
40	Prague	&#24067;&#25289;&#26684;
41	Finnish	&#33452;&#20848;&#30340;
42	fictitious	&#34394;&#26500;&#30340;
43	flummox		&#29436;&#29384;&#30340;&#65292;&#22833;&#36133;
44	vilify		&#35837;&#35876;&#65292;&#36140;&#20302;
45	glorify		&#23815;&#25308;&#65292;&#36190;&#32654;
46	peg		&#25346;&#38057;
47	misfit		&#19981;&#21512;&#36866;&#30340;&#20154;
48	tribute		&#36129;&#21697;&#65292;&#39042;&#35789;
49	leverage	&#26464;&#26438;&#65292;&#20419;&#36827;&#65288;sth.&#30340;&#25913;&#21464;&#65289;

</pre>
</div>
<div title="Will's Wordlist 25/10-28/10/2011" creator="Will" modifier="Will" created="201110280123" modified="201110280149" server.type="file" server.host="" changecount="4">
<pre>1	2011-10-28	ad hoc	for a specific or particular purpose only.
2	2011-10-28	mortgage	n.&#25353;&#25581;, &#25269;&#25276;, &#25269;&#25276;&#36151;&#27454; ; vt.&#25269;&#25276;
3	2011-10-28	lease	n.&#31199;&#32422;, &#31199;&#22865;, &#31199;&#26399; ; vt.&#20986;&#31199;, &#31199;&#24471;
4	2011-10-28	appreciate	vt.&#27427;&#36175;, &#36175;&#35782;, &#24863;&#28608;, &#39046;&#20250;, &#24847;&#35782;&#21040; ; vi.&#22686;&#20540;
5	2011-10-28	depreciate	v. &#36140;&#20540;, &#38477;&#20215;, &#36731;&#35270;
6	2011-10-28	nominate	vt.&#25552;&#21517;, &#25351;&#27966;, &#30331;&#35760;&#36187;&#39532;&#21442;&#21152;&#27604;&#36187;
7	2011-10-28	denominate	v.&#21629;&#21517;, &#31216;&#8230;&#20026;
8	2011-10-28	repatriation	n. &#36963;&#36865;&#22238;&#22269;, &#24402;&#22269;
9	2011-10-28	expropriate	v.&#24449;&#29992;,&#27809;&#25910;,&#21093;&#22842;,&#20405;&#21344;&#65288;&#20182;&#20154;&#36130;&#20135;&#65289;
10	2011-10-28	infer	vt.&#25512;&#26029;, &#29468;&#27979;, &#26263;&#31034; ; vi.&#20316;&#20986;&#25512;&#35770;
11	2011-10-28	hypothetical	adj.&#20551;&#35774;&#30340;, &#20551;&#23450;&#30340;
12	2011-10-28	treasury	n.&#23453;&#24211;, &#22269;&#24211;, &#37329;&#24211; ; Treasury; n.&#36130;&#25919;&#37096;, &#22269;&#20538;
13	2011-10-27	clement	adj. &#20161;&#24904;&#30340;, &#28201;&#21644;&#30340;
14	2011-10-27	Mocha	n.&#31302;&#21704;&#21654;&#21857;,&#25705;&#21345;&#21654;&#21857; ; Mocha; n.&#31302;&#21704;(&#20063;&#38376;&#19968;&#28207;&#21475;)
15	2011-10-27	latte	n. &#25343;&#38081;&#21654;&#21857;
16	2011-10-27	annotation	n. &#27880;&#35299;, &#35780;&#27880;
17	2011-10-26	squat	v.&#36466;&#19979;, &#36466;&#22352;, &#25797;&#33258;&#21344;&#22320; ; adj.&#36466;&#30528;&#30340;, &#30702;&#32982;&#32982;&#30340; ; n.&#36466;, &#25797;&#33258;&#21344;&#29992;&#30340;&#22303;&#22320;
18	2011-10-26	manifest	vt.&#26174;&#31034;, &#35777;&#23454;, &#34920;&#38706; ; adj.&#26126;&#30333;&#30340;, &#26174;&#28982;&#30340; ; n.&#26053;&#23458;&#21517;&#21333;,&#36733;&#36135;&#21333;
19	2011-10-26	prominent	adj.&#26174;&#33879;&#30340;, &#26480;&#20986;&#30340;, &#31361;&#20986;&#30340;
20	2011-10-26	flourish	v.&#33538;&#30427;, &#32321;&#33635;, &#25381;&#33310;, &#27963;&#36291; ; n.&#25381;&#33310;, &#33457;&#26679;, &#28843;&#32768;, &#21326;&#20029;&#35789;&#34299;
21	2011-10-26	pervasive	adj.&#26222;&#36941;&#30340;, &#28183;&#36879;&#30340;, &#36941;&#24067;&#30340;
22	2011-10-26	mockup	n. &#23454;&#20307;&#27169;&#22411;, &#21360;&#21047;&#21697;&#30340;&#38472;&#21015;
23	2011-10-26	bust	n.&#21322;&#36523;&#20687;, &#33016;&#37096;, &#25628;&#26597;, &#22833;&#36133; ; v.&#25171;&#30862;, &#25628;&#25429;, &#38477;&#32423;, &#32456;&#27490; ; adj.&#30772;&#20135;&#30340;, &#25171;&#30862;&#30340;
24	2011-10-26	queue	n.&#38271;&#38431;, &#34892;&#21015;, &#36779;&#23376; ; v.&#25490;&#38431;
25	2011-10-26	first responder	&#31532;&#19968;&#20986;&#21160;&#20154;&#21592;&lt;&#21457;&#29983;&#21361;&#38505;&#21697;&#20107;&#25925;&#26102;&#39318;&#20808;&#21040;&#36798;&#29616;&#22330;&#30340;&#20154;&#21592;
26	2011-10-25	boulevard	n. &#26519;&#33643;&#22823;&#36947; 
27	2011-10-28	shack up with	v. &#19982; ... &#21516;&#23621;
28	2011-10-28	outclass	vt. &#27604; ... &#26356;&#39640;&#32423;, &#36828;&#39640;&#20110;, &#36828;&#32988;&#20110;
29	2011-10-28	authentic	adj.&#30495;&#27491;&#30340;, &#30495;&#23454;&#30340;, &#21487;&#20449;&#30340;, &#21487;&#38752;&#30340;
31	2011-10-28	infrared	adj.&#32418;&#22806;&#32447;&#30340; ; n.&#32418;&#22806;&#32447;
32	2011-10-28	sappy	adj. &#22810;&#27713;&#28082;&#30340;, &#22810;&#24833;&#21892;&#24863;&#30340;, &#24858;&#34850;&#30340;
33	2011-10-28	godsend	n.&#22825;&#36176;&#20043;&#29289;, &#24847;&#22806;&#33719;&#24471;&#30340;&#24184;&#36816;
34	2011-10-28	reap	vt.&#25910;&#21106;, &#25910;&#33719;, &#33719;&#24471; ; vi.&#25910;&#21106;
35	2011-10-28	reap the benefits of	&#33719;&#24471;&#30410;&#22788;, &#24471;&#21040;&#22909;&#22788;

parser - &#35821;&#27861;&#21078;&#26512;&#31243;&#24335;



</pre>
</div>
<div title="Will's Wordlist 29/10-14/11/2011" creator="Will" modifier="Will" created="201111140222" modified="201111141519" server.type="file" server.host="" changecount="8">
<pre>|english|chinese|h
|layman|n.&#20439;&#20154;(&#23545;&#20711;&#20387;&#32780;&#35328;),&#38376;&#22806;&#27721;|
|brokerage|&#32463;&#32426;&#20154;|
|compound|&#21270;&#21512;&#29289;|
|perpetuity|&#27704;&#24658;|
|caffeine|&#21654;&#21857;&#22240;|
|superb|&#21331;&#36234;&#30340;&#65292;&#26497;&#22909;&#30340;|
|amortization|&#20998;&#26399;&#20607;&#36824;|
|annuities|&#20859;&#32769;&#37329;|
|choke point|&#29942;&#39048;|
|strait|&#28023;&#23777;(strait of malacca)|
|dispense|&#20998;&#37197;|
|indispensable|&#24517;&#19981;&#21487;&#23569;&#30340;&#65292;&#24517;&#39035;&#30340;|
|fort|&#22478;&#22561;|
|correlated|&#30456;&#20114;&#26377;&#20851;&#30340;|
|pagination|&#39029;&#30721;|
|decelerate|&#20943;&#36895;|
|remedy|&#33647;&#21697;&#65292;&#34917;&#25937;&#21150;&#27861;|
|momentary|&#26242;&#26102;&#30340;&#65292;&#30701;&#26242;&#30340;|
|symposium|&#35752;&#35770;&#20250;|
|opium|&#40486;&#29255;|
|mockup|&#23454;&#29289;&#27169;&#22411;|
|bi-molecular|&#21452;&#20998;&#23376;&#30340;|
|embargo|&#31105;&#20196;&#65292;&#38480;&#21046;&#36152;&#26131;|
|clutter|&#20940;&#20081;|
|perceptual|&#30693;&#35273;&#30340;|
|compound|&#22797;&#21512;&#30340;|
|indent|&#32553;&#36827;|
|elapse|&#26102;&#38388;&#36893;&#21435;|
|Prague|&#24067;&#25289;&#26684;|
|Finnish|&#33452;&#20848;&#30340;|
|fictitious|&#20551;&#30340;&#65292;&#34394;&#26500;&#30340;|
|gyroscope|&#38464;&#34746;&#20202;|
|accelerometer|&#21152;&#36895;&#35745;|
|populate|&#23621;&#20303;&#20110;|
|flummox|&#29436;&#29384;&#30340;|
|vilify|&#35837;&#35876;|
|glorify|&#36190;&#32654;&#65292;&#32654;&#21270;|
|peg|&#25346;&#38057;|
|misfit|&#19981;&#21512;&#32676;&#30340;&#20154;|
|tribute|&#36129;&#21697;&#65292;&#39042;&#35789;|
|leverage|&#26464;&#26438;&#20316;&#29992;|
|legitimate|&#21512;&#24773;&#21512;&#29702;&#30340;|
|obsolete|&#32769;&#24072;&#30340;&#65292;&#24223;&#24323;&#65292;&#28120;&#27760;|
|segue|&#32487;&#32493;|allow one song to segue into the next|</pre>
</div>
<div title="Will's wordlist" creator="Will" modifier="Will" created="201110180707" modified="201111140212" server.type="file" server.host="" changecount="4">
<pre>[[Will's Wordlist 0-18/10/2011]]
[[Will's Wordlist 19/10-24/10/2011]]
[[Will's Wordlist 25/10-28/10/2011]]
[[Will's Wordlist 29/10-14/11/2011]]</pre>
</div>
<div title="Windows" creator="Will" modifier="Will" created="201110161311" modified="201201141030" server.page.revision="201110161322" server.type="file" server.host="" changecount="15">
<pre>! Intro
[[Windows Registry]] is different from [[Mas OS X Preference]]

! How-to
[[Auto-Sync Time and Date in Windows 7]]
[[How to add Computer Explorer to Windows 7 taskbar]]
[[Windows 7 Backup Recovery Restore]]
[[How to combine 2 pdf files]]
[[How to set environment variables in XP]]</pre>
</div>
<div title="Windows 7 Backup Recovery Restore" creator="Will" modifier="Will" created="201110161322" modified="201202200536" server.page.revision="201110161322" server.type="file" server.host="" changecount="7">
<pre>Well, this time was using ''windows default backup and recovery tools'', not some kind of China's &#19968;&#38190;&#24674;&#22797;&#31934;&#28789; or something(it was good though). 


Now there's ''3 terminology'':

Restore - to go back to a early point in time, whether you installed a new software of update. It is to undo system changes without affecting your personal files. I am not going to use this. 

Backup - well, it's to create a disk image of current partition. We will use that. 

Recovery (Image Recovery) - a complete one, recovery everything. 


!How-to: 

[Very Important] - Start -&gt; &quot;backup &amp; restore&quot; from control panel. now ''DO NOT SET UP BACKUP! ''

Instead, go to left hand side and click on ''&quot;Create System Image&quot;''

Now you know what to do. 

For Windows 7 Professional/Ultimate user, can backup to a Network location. this is kind of cool which can try out next time.

! Some updates

# Symantec Ghost technology cannot be used to back up my disk - it does not recgonize 2 seperate disk. Instead they consider the 2 disks as one, having 120GB storage - the result of this is I have nowhere valid to back up the ghost. 
# Solution to this: to use Windows build-in backup, which is shown above. 
# I tried to back up to my Bill Gates Disk on my Seagate HDD, also cannot - because the disk is not NTFS. The format of Bill Gates only support files up to 4GB but the back up file is 26GB. So what I did was - save it into Steve P Job Disk. When I need to use it later, I should have a headache I believe. 
</pre>
</div>
<div title="Windows Registry" creator="Will" modifier="Will" created="201110251842" modified="201110251846" server.type="file" server.host="" changecount="4">
<pre>Windows Registry is like a huge manifest of every setting in your computer; if it becomes corrupted, your machine can have a lot of problems and often times you'll need to re-install Windows. ==&gt; Something many of us who run Windows hate.

Mac OS keeps each setting in an individual file called a &quot;preference&quot; which is sort of like the old &quot;.ini&quot; files from the Windows. However, preferences are much different in that the program(s) will rebuild them if the preference file is deleted.

More about [[Mas OS X Preference]]</pre>
</div>
<div title="Wireless@SG" creator="Will" modifier="Will" created="201110301535" modified="201110301613" server.type="file" server.host="" changecount="22">
<pre>There are 2 kinds: Wireless@SG and &lt;nowiki&gt;Wireless@SGx. &lt;/nowiki&gt;

The 1st is direct-connect and log in. the 2nd is auto-login. 

! The most important of All
For iPad, not matter Wireless@SG or &lt;nowiki&gt;Wireless@SGx&lt;/nowiki&gt;, need to go into wireless detail page and ''&quot;Renew Lease&quot;''. 

After this action, the correct IP address will be displayed. 

@@''If this this step is omitted, the wireless connection WILL NOT WORK on iPad (and maybe android also). ''@@

! Wireless@SG
This is network is very not-stable. Need to log in each time. Remember renew lease. 

Not recommended. 

! &lt;nowiki&gt;Wireless@SGx &lt;/nowiki&gt;

Follow the guide on m1 site: 
http://www.m1net.com.sg/Wireless%2DSG/ssa/downloads.html

!!!option 1 - manually configure (recommended) 
Follow the instructions will do. 

One thing about Windows configuration is that, the computer may not have ''go daddy'', so we need to download an install by ourselves. (Go daddy Certificate here: https://certs.godaddy.com/anonymous/repository.seam )

!!!option 2 - use app
Well there are app for all platform. Easy to use. But did not tried. </pre>
</div>
<div title="Working with Excel in Applescript" creator="Will" modifier="Will" created="201111010326" server.type="file" server.host="" changecount="1">
<pre>Ref: http://www.mactech.com/articles/mactech/Vol.23/23.02/2302AppleScript/index.html

&lt;html&gt;
&lt;h1&gt;Introduction to Scripting Microsoft Excel&lt;/h1&gt;


&lt;p&gt; &lt;i&gt;by Benjamin S. Waldie&lt;/i&gt; &lt;/p&gt;

&lt;p&gt;With Office 2008 on the horizon, Microsoft has recently begun to push AppleScript as an alternative automation technology to Visual Basic macros in the Office applications.  Moving forward, Visual Basic macros will not be supported in the release of Office 2008.  Current AppleScript users are ahead of the curve.  The Office applications have been AppleScriptable for quite some time, and AppleScript actually provides several advantages over Visual Basic.  For one, AppleScripts can interact with multiple applications, including non-Microsoft applications, allowing even complex multi-application workflows to be automated.&lt;/p&gt;

&lt;p&gt;Last month, we began discussing how to get started with scripting Microsoft Word.  We explored various techniques for interacting with Word documents, as well as the content within those documents, all using AppleScript.  This month, we're going to begin discussing another Office application, Microsoft Excel.  Like Word, Excel contains a quite extensive AppleScript dictionary, allowing almost any task that can be performed manually to be automated using AppleScript.&lt;/p&gt;

&lt;p&gt;Please note, all example code within this month's column was written and tested with Excel 2004 (version 11.x).  If you are using another version of Excel, please be aware that the terminology may need to be adjusted in order to function properly.  Let's get started.&lt;/p&gt;

&lt;center&gt;&lt;h3&gt;Working with Workbooks&lt;/h3&gt;&lt;/center&gt;

&lt;p&gt;In Excel, the top-level class (beneath the application class) with which you will probably want to interact is a workbook.  A workbook will contain one or more sheets, and those sheets will typically contain ranges of data.  This data can be text, numbers, dates, and so forth.  We will discuss each of these primary classes of Excel objects in this month's column, but we will begin with the workbook class.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Making a Workbook&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Creating a workbook in Excel is similar to the process of creating a document in Word, or in many scriptable applications, for that matter.  To do so, use the make command, as demonstrated below.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   make new workbook
end tell
--&amp;gt; workbook &quot;Sheet1&quot; of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;The make command's result will be a reference to the newly created workbook, which may be placed into an AppleScript variable, if desired, for future reference in your script.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Closing a Workbook&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Closing a workbook is also very similar to closing a document in other scriptable applications.  Use the close command, referencing the workbook you wish to close.  Optionally, you may choose to specify whether the workbook should be saved during the close process, using the optional saving parameter.  For example:&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   close workbook 1 saving no
end tell&lt;/pre&gt;

&lt;p&gt;&lt;b&gt;Opening a Workbook&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;To open a workbook, use the open command, followed by a reference to the workbook file you want to open.  For example:&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;set theWorkbookFile to choose file with prompt &quot;Please select an Excel workbook file:&quot;
tell application &quot;Microsoft Excel&quot;
   open theWorkbookFile
end tell&lt;/pre&gt;

&lt;p&gt;One issue with the open command is that, unfortunately, it does not return a result.  Therefore, if you want to perform further processing on the newly opened document, you will need to build a reference to it in another manner.  One way to do this is to retrieve the workbook file's name, and then construct a reference to the workbook using that name, once it has been opened.  This is demonstrated in the example code below.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;set theWorkbookFile to choose file with prompt &quot;Please select an Excel workbook file:&quot;
set theWorkbookName to name of (info for theWorkbookFile)
tell application &quot;Microsoft Excel&quot;
   open theWorkbookFile
   set theWorkbook to workbook theWorkbookName
end tell
--&amp;gt; workbook &quot;My Workbook.xls&quot; of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;Another way that this can be achieved is by referencing the active workbook property of Excel's application class, once the workbook has been opened.  This property references the currently active workbook, which should be the newly opened document.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;set theWorkbookFile to choose file with prompt &quot;Please select an Excel workbook file:&quot;
set theWorkbookName to name of (info for theWorkbookFile)
tell application &quot;Microsoft Excel&quot;
   open theWorkbookFile
   set theWorkbook to active workbook
end tell
--&amp;gt; active workbook of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;When referencing the active workbook property, one thing to keep in mind is that, if another workbook is brought to the front, then your script may reference the incorrect workbook.  Because of this, it is recommended to reference workbooks by name.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Saving a Workbook&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;To save an opened workbook to its existing path, use the save command, referencing the workbook to be saved.  For example, the following code will save the currently active workbook to its current path.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   save active workbook
end tell&lt;/pre&gt;

&lt;p&gt;Excel also has a save workbook as command, which may be used to save a workbook into a new location, or in a different file format. The following example code makes use of this command, as well as some of its optional parameters, in order to save the currently active workbook to the desktop in comma separated format.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;set theOutputPath to (path to desktop folder as string) &amp;amp; &quot;My Saved Workbook.csv&quot;
tell application &quot;Microsoft Excel&quot;
   tell active workbook
      save workbook as filename theOutputPath file format CSV file format
   end tell
end tell&lt;/pre&gt;

&lt;p&gt;Take some time to explore some of the other optional parameters for the save workbook as command, as well as some of the other available file formats, which can be found in Excel's AppleScript dictionary.&lt;/p&gt;

&lt;center&gt;&lt;h3&gt;Working with Sheets&lt;/h3&gt;&lt;/center&gt;

&lt;p&gt;As previously mentioned, a workbook itself does not contain data in Excel.  Rather, a workbook contains sheets, which contain the data.  Most often, you will find yourself writing a script that will interact with a worksheet, a specific type of sheet in Excel.  That's what we will be discussing here.  Another type of sheet, which we will not discuss at this time, is a chart sheet. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Making a Worksheet&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Like a workbook, a worksheet is created by using the make command.  When using this command, be sure to specify a location for the new worksheet to be created, such as beginning, end, before worksheet 1, and so forth.  For example, this code will create a new worksheet at the end of the existing worksheets within the currently active workbook.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell active workbook
      make new worksheet at end
   end tell
end tell
--&amp;gt; sheet &quot;Sheet2&quot; of active workbook of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;&lt;b&gt;Selecting a Worksheet&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;At times, you may want to navigate to a specific worksheet in an Excel workbook.  To do this, use the activate object command, and target the worksheet that you want to be displayed.  For example:&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell active workbook
      activate object worksheet &quot;Sheet1&quot;
   end tell
end tell&lt;/pre&gt;

&lt;center&gt;&lt;h3&gt;Working with Data&lt;/h3&gt;&lt;/center&gt;

&lt;p&gt;In an Excel worksheet, data is contained within cells, which are organized into rows and columns.  Cells can be accessed by referencing the cell, row, column, or range class.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;The Cell Class&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;To access a specific cell, use the cell class.  For example, the following code references the first cell of a worksheet, found in column A, row 1.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      cell &quot;A1&quot;
   end tell
end tell
--&amp;gt; cell &quot;A1&quot; of worksheet &quot;Sheet1&quot; of active workbook of application &quot;Microsoft Excel&quot; &lt;/pre&gt;

&lt;p&gt;&lt;b&gt;The Row Class&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;To access an entire row of cells, use the row class.  For example, the following code references the first row of cells in a worksheet.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      row 1
   end tell
end tell
--&amp;gt; row &quot;$1:$1&quot; of worksheet &quot;Sheet1&quot; of active workbook of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;&lt;b&gt;The Column Class&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;To access an entire column of cells, use the column class.  For example, the following code references the first column of cells in a worksheet.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      column 1
   end tell
end tell
--&amp;gt; column &quot;$A:$A&quot; of worksheet &quot;Sheet1&quot; of active workbook of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;&lt;b&gt;The Range Class&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Regardless of how you reference cells within a worksheet, you are really referencing what is known as a range.  A range refers to either a single cell, or multiple cells within a worksheet, and the cell, row, and column classes all inherit the properties of the range class.  There are numerous ways to directly reference a range.  The following are some examples.&lt;/p&gt;

&lt;p&gt;This code demonstrates how to reference a range that represents a single cell in a worksheet, in this case, the first cell in the first row, i.e. the intersection of column 1 and row 1.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      range &quot;A1&quot;
   end tell
end tell
--&amp;gt; cell &quot;A1&quot; of worksheet &quot;Sheet1&quot; of active workbook of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;This next example demonstrates how to reference a range that represents multiple cells within a worksheet, in this case, cells 2 through 5 of the first two rows.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
       range &quot;B1:F2&quot;
   end tell
end tell
--&amp;gt; range &quot;B1:F2&quot; of worksheet &quot;Sheet1&quot; of active workbook of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;Again, there are numerous ways to reference a range of cells, and Excel is pretty flexible.  For a chart that outlines different methods, take a look at the AppleScript Reference Guide for Excel, mentioned later in this column.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;The Used Range&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;In some cases, you may not know specifically which range you want to reference.  For example, you may just want to reference all of the data contained within a specified worksheet.  To do this, you can reference the used range property of the worksheet.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      used range
   end tell
end tell
--&amp;gt; used range of active sheet of active workbook &#172;&lt;br&gt;of application &quot;Microsoft Excel&quot;&lt;/pre&gt;

&lt;p&gt;&lt;b&gt;Properties of Ranges&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;We have discussed numerous ways to reference ranges of cells in Excel.  However, what can you do with a range once you have constructed a reference to it?  Well, one thing you can do is access its properties.  Ranges have numerous properties, but perhaps the two that you may find most useful are the value and formula properties.&lt;/p&gt;

&lt;p&gt;By referencing the value property of a range, you can retrieve the value of a specified set of cells in a worksheet.  For example, the following code retrieves the values of the used range in a specified worksheet.  Notice that the value is returned as a list of lists.  Each list represents a row, and each list item represents a cell.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      value of used range
   end tell
end tell
--&amp;gt; {{1.0, 2.0, 3.0}, {4.0, 5.0, 6.0}}&lt;/pre&gt;

&lt;p&gt;The formula property of a range returns a similar result.  For example:&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      formula of used range
   end tell
end tell
--&amp;gt; {{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;}, {&quot;4&quot;, &quot;5&quot;, &quot;6&quot;}}&lt;/pre&gt;

&lt;p&gt;Of course, these properties are not read-only properties.  So, it is also possible to modify them, if desired.  For example, the following code demonstrates how to set the value of a single cell.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      set value of cell &quot;A1&quot; to &quot;A&quot;
   end tell
end tell
Likewise, the following code will set the value of a range of cells.
tell application &quot;Microsoft Excel&quot;
   tell worksheet &quot;Sheet1&quot; of active workbook
      set value of range &quot;A1:C2&quot; to {{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}, {&quot;d&quot;, &quot;e&quot;, &quot;f&quot;}}
   end tell
end tell&lt;/pre&gt;

&lt;center&gt;&lt;h3&gt;Pulling Things Together&lt;/h3&gt;&lt;/center&gt;

&lt;p&gt;Now, let's take a brief look at some sample code that makes use of several of the topics that we have discussed throughout this month's column.  The following example code will retrieve the names of any visible items on the desktop.  It will then create a workbook, and insert the list of item names into the active worksheet.&lt;/p&gt;

&lt;pre width=&quot;50&quot;&gt;&#8212; Retrieve a list of items on the desktop
set theFileNames to list folder (path to desktop) without invisibles
&#8212; Convert the list of items to a list of lists
repeat with a from 1 to length of theFileNames
   set item a of theFileNames to {item a of theFileNames}
end repeat
&#8212; Build a new workbook in Excel, and add the data to the current worksheet
tell application &quot;Microsoft Excel&quot;
   set theWorkbook to make new workbook
   tell active sheet of theWorkbook
      set value of range (&quot;A1:A&quot; &amp;amp; (length of theFileNames)) to theFileNames
   end tell
end tell&lt;/pre&gt;

&lt;center&gt;&lt;h3&gt;In Closing&lt;/h3&gt;&lt;/center&gt;

&lt;p&gt;It may seem like we've only scratched the surface of scripting Excel, and we have.  As mentioned at the beginning of this month's column, Excel contains quite an extensive AppleScript dictionary, and there is a lot that you can do with it from a scripting perspective.  However, using the techniques we have discussed in this month's column, you should be able to piece together a script that can construct a workbook, create a worksheet, retrieve data from a range of cells in a worksheet, and more.&lt;/p&gt;

&lt;p&gt;For more information about scripting Excel, be sure to download the Excel AppleScript Reference Guide that I mentioned earlier.  This can be found on the Mactopia website at &lt;a href=&quot;http://www.microsoft.com/mac/&quot;&gt;http://www.microsoft.com/mac/&lt;/a&gt;.  It is located in the Resources &amp;gt; Developer Center &amp;gt; AppleScript Resources for Office 2004 section.&lt;/p&gt;

&lt;p&gt;Until next time, keep scripting!&lt;/p&gt;

&lt;hr&gt;
&lt;p&gt;&lt;b&gt;Ben Waldie&lt;/b&gt; is the author of the best selling books &quot;AppleScripting the Finder&quot; and the &quot;Mac OS X Technology Guide to Automator&quot;, available from &lt;a href=&quot;http://www.spiderworks.com&quot;&gt;http://www.spiderworks.com&lt;/a&gt;, as well as an AppleScript Training CD, available from &lt;a href=&quot;http://www.vtc.com&quot;&gt;http://www.vtc.com&lt;/a&gt;.  Ben is also president of Automated Workflows, LLC, a company specializing in AppleScript and workflow automation consulting. For years, Ben has developed professional AppleScript-based solutions for businesses including Adobe, Apple, NASA, PC World, and TV Guide. For more information about Ben, please visit &lt;a href=&quot;http://www.automatedworkflows.com&quot;&gt;http://www.automatedworkflows.com&lt;/a&gt;, or email Ben at &lt;a href=&quot;mailto:ben@automatedworkflows.com&quot;&gt;ben@automatedworkflows.com&lt;/a&gt;. &lt;/p&gt;
&lt;/html&gt;</pre>
</div>
<div title="XNU kernel" creator="Will" modifier="Will" created="201110180212" modified="201110180346" server.type="file" server.host="" changecount="3">
<pre>What is [[Kernel]]

XNU is the operating system kernel for [[Darwin]], [[iOS]] and [[Mac OS X]].

Apple released XNU as free and open source software as part of the Darwin operating system. 

XNU is originally developed by NeXT for the NeXTSTEP operating system. XNU was a hybrid kernel of the Mach kernel, 4.3BSD and Driver Kit.

XNU is an acronym for X is Not Unix.</pre>
</div>
<div title="Xcode (obj-C)" creator="YourName" modifier="Will" created="201110160941" modified="201111250235" server.page.revision="201110160941" server.type="file" server.host="" changecount="9">
<pre>[[Objective C]] is the language Mac OS X applications are written in.

[[Cocoa]] is the framework (&quot;building blocks&quot;) from which applications are made.

[[Xcode]] is the IDE. This is the tool you'll use to develop your projects.

! Troubleshooting
[[How to uninstall Xcode 4?]]
[[Where is the iOS Simulator local data stored on Mac?]]

! Debugging
[[Confusion about DetailViewController in Master Detail App]]
[[App cannot build as iPhone app, only &quot;My Mac&quot; appear in Scheme Select]]
[[Gesture Recognizer does not work]] </pre>
</div>
<div title="ZGT1" creator="Will" modifier="Will" created="201110231025" server.type="file" server.host="" changecount="1">
<pre>&#25105;&#39318;&#20808;&#35831;&#19968;&#24110;&#20154;&#20307;&#24037;&#31243;&#23398;&#19987;&#23478;&#20026;&#27604;&#23572;&#37327;&#36523;,&#34429;&#28982;&#19981;&#33021;&#36319;&#20182;&#35848;,&#27809;&#26377;&#25351;&#23450;&#19981;&#33021;&#37327;&#20182;&#30340;&#36523;&#26448;&#21834;.&#32780;&#19988;&#36824;&#35201;&#25226;&#37325;&#28857;&#37096;&#20301;(&#19981;&#35201;&#24819;&#24471;&#22826;&#22351;)&#37327;&#24471;&#30456;&#24403;&#20934;&#30830;.&#20043;&#21518;&#24320;&#22987;&#35774;&#35745;&#19968;&#20010;&#27801;&#21457;&#24418;&#29366;&#30340;&#39532;&#26742;,&#36825;&#26159;&#26680;&#24515;,&#19968;&#23450;&#35201;&#25630;&#22909;.&#26680;&#24515;&#35774;&#35745;&#22909;&#20102;&#23601;&#24320;&#22987;&#35774;&#35745;&#38468;&#21152;&#30340;&#21151;&#33021;,&#20570;&#21040;&#26234;&#33021;&#39532;&#26742;,&#21478;&#22806;&#21355;&#29983;&#38388;&#20063;&#35201;&#19968;&#30058;&#35013;&#20462;,&#26368;&#21518;&#25512;&#20986;BETA   1.0&#29256;&#30340;&#21355;&#29983;&#38388;.(&#23450;&#26399;&#32473;&#21355;&#29983;&#38388;&#21450;&#39532;&#26742;&#25171;&#34917;&#19969;,&#32463;&#36807;1&#21040;3&#24180;&#30340;&#20462;&#25972;,&#21487;&#33021;&#27604;&#23572;&#20250;&#21457;&#29616;&#20854;&#23454;&#26368;&#36866;&#21512;&#30340;&#36824;&#26159;&#20197;&#21069;&#30340;&#39532;&#26742;,&#22240;&#20026;&#21151;&#33021;&#22815;&#19987;&#19968;,&#33267;&#23569;&#24819;&#26041;&#20415;&#20043;&#21069;&#19981;&#29992;&#36755;&#23494;&#30721;)</pre>
</div>
<div title="ZGT2" creator="Will" modifier="Will" created="201110231046" server.type="file" server.host="" changecount="1">
<pre>&#23486;&#39302;&#25151;&#38388;&#27604;&#36739;&#22810;&#65292;&#29992;&#28909;&#27700;&#30340;&#20154;&#20063;&#22810;&#65292;&#25152;&#20197;&#28909;&#27700;&#31649;&#36947;&#37324;&#30340;&#28909;&#27700;&#20960;&#20046;&#19968;&#30452;&#22788;&#20110;&#27969;&#21160;&#29366;&#24577;

&#32780;&#23478;&#37324;&#21602;&#65311;&#23601;&#26159;&#20960;&#20010;&#20154;&#29992;&#28909;&#27700;&#65292;&#24179;&#26102;&#31649;&#36947;&#37324;&#20840;&#26159;&#20937;&#27700;&#65292;&#38656;&#35201;&#28909;&#27700;&#22120;&#20135;&#29983;&#30340;&#28909;&#27700;&#25226;&#31649;&#36947;&#37324;&#30340;&#20937;&#27700;&#23436;&#20840;&#39030;&#20986;&#26469;&#21518;&#65292;&#25165;&#20250;&#26377;&#28909;&#27700;&#12290;</pre>
</div>
<div title="ZGT3" creator="Will" modifier="Will" created="201110231052" server.type="file" server.host="" changecount="1">
<pre>well, think of how you teach a computer to play chess.</pre>
</div>
<div title="ZGT4" creator="Will" modifier="Will" created="201110231104" modified="201110231236" server.type="file" server.host="" changecount="2">
<pre>&#22278;&#24418;&#30340;&#20117;&#30422;&#21487;&#20197;&#30001;&#19968;&#20010;&#20154;&#25644;&#21160;&#65292;&#22240;&#20026;&#23427;&#21487;&#20197;&#22312;&#22320;&#19978;&#28378;

&#20320;&#19981;&#21487;&#33021;&#25226;&#22278;&#24418;&#30340;&#30422;&#23376;&#25481;&#21040;&#19979;&#27700;&#36947;&#37324;&#38754;&#65292;&#22240;&#20026;&#20320;&#26080;&#35770;&#20197;&#20160;&#20040;&#35282;&#24230;&#25918;&#36825;&#20010;&#30422;&#23376;&#65292;&#30422;&#23376;&#30340;&#30452;&#24452;&#27704;&#36828;&#22823;&#20110;&#19979;&#27700;&#36947;&#21475;&#30340;&#30452;&#24452;&#12290;</pre>
</div>
<div title="dv6700's whole range of models" creator="Will" modifier="Will" created="201110161033" modified="201110161103" server.page.revision="201110161103" server.type="file" server.host="">
<pre>[[HP DV6700 Series]]

	&#187; 	HP Pavilion dv6700 CTO Entertainment Notebook PC
	&#187; 	HP Pavilion dv6700ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6700t CTO Entertainment Notebook PC
	&#187; 	HP Pavilion dv6700z CTO Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701au Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701tu Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701vx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6701xx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6702au Entertainment Notebook PC
	&#187; 	HP Pavilion dv6702ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6702tu Entertainment Notebook PC
	&#187; 	HP Pavilion dv6702tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6702vx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6702xx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6703au Entertainment Notebook PC
	&#187; 	HP Pavilion dv6703ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6703tu Entertainment Notebook PC
	&#187; 	HP Pavilion dv6703tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6703vx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704au Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704nr Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704tu Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6704vx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705au Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705tu Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6705vx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6706au Entertainment Notebook PC
	&#187; 	HP Pavilion dv6706ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6707ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6707us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6708ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6708tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6709ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ea Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ed Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ei Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ev Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6710tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6711ax Entertainment Notebook PC
	&#187; 	HP Pavilion dv6711ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6713ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6714ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6714tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715ed Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6715tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6716ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6716ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6717el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6718ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6719tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720eb Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ed Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ej Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720la Entertainment Notebook PC
	&#187; 	HP Pavilion dv6720tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6721la Entertainment Notebook PC
	&#187; 	HP Pavilion dv6722la Entertainment Notebook PC
	&#187; 	HP Pavilion dv6722tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6723el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6724ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725ed Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725ee Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6725us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6726tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6727ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6727ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6727el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6727tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6728ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6728el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6728es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6728tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6729ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6729tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6729us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730eb Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730ed Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730ei Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6730tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6731eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6731tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6732ee Entertainment Notebook PC
	&#187; 	HP Pavilion dv6732en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6732eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6732tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6733eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6733eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6733tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6734tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735ee Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735ei Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6735tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6736nr Entertainment Notebook PC
	&#187; 	HP Pavilion dv6736tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6737ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6738eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6739tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740br Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6740ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6741er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6741tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6742eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6742er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6742tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6743eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6743tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6744ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6744eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6744tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745br Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745ej Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6745us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6746ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6746eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6746tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6747cl Entertainment Notebook PC
	&#187; 	HP Pavilion dv6747el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6747eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6747nr Entertainment Notebook PC
	&#187; 	HP Pavilion dv6747tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6748ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6748el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6748eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6748es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6748tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6748us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6749el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6749eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6749es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6749tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750br Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ea Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750eb Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ee Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ev Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6750tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6751eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6751tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6751us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6751xx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6752er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6752tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6753ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6753cl Entertainment Notebook PC
	&#187; 	HP Pavilion dv6753eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6753tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6754tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755ee Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755ev Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6755us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6756eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6756tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6756us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6757ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6757tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6758el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6758eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6758es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6758us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6759eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6759tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760ea Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760ej Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760er Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760ev Entertainment Notebook PC
	&#187; 	HP Pavilion dv6760tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6762tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6765eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6765ev Entertainment Notebook PC
	&#187; 	HP Pavilion dv6767ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6768eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6768eo Entertainment Notebook PC
	&#187; 	HP Pavilion dv6768se Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770ea Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770eb Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770ef Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770et Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770ev Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770ez Entertainment Notebook PC
	&#187; 	HP Pavilion dv6770se Entertainment Notebook PC
	&#187; 	HP Pavilion dv6771tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6772eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6772nr Entertainment Notebook PC
	&#187; 	HP Pavilion dv6773tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6775eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6775es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6775tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6775us Entertainment Notebook PC
	&#187; 	HP Pavilion dv6777tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6778es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6779tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780ec Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780ew Entertainment Notebook PC
	&#187; 	HP Pavilion dv6780se Entertainment Notebook PC
	&#187; 	HP Pavilion dv6781tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6782eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6782en Entertainment Notebook PC
	&#187; 	HP Pavilion dv6783eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6783tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6785ca Entertainment Notebook PC
	&#187; 	HP Pavilion dv6785se Entertainment Notebook PC
	&#187; 	HP Pavilion dv6785tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6786eg Entertainment Notebook PC
	&#187; 	HP Pavilion dv6787el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6787tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6789ej Entertainment Notebook PC
	&#187; 	HP Pavilion dv6789tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6790eb Entertainment Notebook PC
	&#187; 	HP Pavilion dv6790ej Entertainment Notebook PC
	&#187; 	HP Pavilion dv6790el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6790ep Entertainment Notebook PC
	&#187; 	HP Pavilion dv6790es Entertainment Notebook PC
	&#187; 	HP Pavilion dv6791tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6793tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6795el Entertainment Notebook PC
	&#187; 	HP Pavilion dv6795tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6796tx Entertainment Notebook PC
	&#187; 	HP Pavilion dv6798tx Entertainment Notebook PC</pre>
</div>
<div title="how to set terminal to close upon exit" creator="YourName" modifier="YourName" created="201110160953" server.page.revision="201110160953" server.type="file" server.host="">
<pre>&lt;html&gt;
&lt;a href=&quot;http://www.flickr.com/photos/68660968@N03/6248865069/&quot; title=&quot;how to set terminal to close upon exit by will_ran, on Flickr&quot;&gt;&lt;img src=&quot;http://farm7.static.flickr.com/6095/6248865069_012d6991e8.jpg&quot; width=&quot;500&quot; height=&quot;281&quot; alt=&quot;how to set terminal to close upon exit&quot;&gt;&lt;/a&gt;
&lt;/html&gt;</pre>
</div>
<div title="iOS" creator="Will" modifier="Will" created="201110180332" modified="201111050418" server.type="file" server.host="" changecount="7">
<pre>! Intro

! How-to
[[How to use iPad as an external display (both PC and Mac)]]

! Jailbreak iPad 2

There is no way to jailbreak iPad 2 with iOS 4.3.4 or 4.3.5 (for my case, 4.3.5).

An alternative is to use Xcode to code-sign the app. [[CrappStore]] method or [[iReSign]] can be used. </pre>
</div>
<div title="iReSign" creator="Will" modifier="Will" created="201111050412" modified="201111250839" server.type="file" server.host="" changecount="9">
<pre>iResign works for iOS5 (latest version cab be found in google code)

# Just open and use, easily work on iOS5. 

!!! Certification from Keychain: 
''&lt;nowiki&gt;
iPhone Developer: Wei Ran (VC682NUU8W)
&lt;/nowiki&gt;''</pre>
</div>
<div title="kernel" creator="Will" modifier="Will" created="201110240127" server.type="file" server.host="" changecount="1">
<pre>kernel</pre>
</div>
<div title="market capitalization" creator="Will" modifier="Will" created="201110310221" modified="201110310240" server.type="file" server.host="" changecount="5">
<pre>* a measurement of the size of a enterprise (corporation)
* equal to the share price times the number of [[shares outstanding]]

&gt; [[P/E ratio]] equals market capitalization divided by total annual earnings
&gt; [[An example of P/E ratio and market capitalization]]</pre>
</div>
<div title="shares outstanding" creator="Will" modifier="Will" created="201110310221" server.type="file" server.host="" changecount="1">
<pre>shares that have been authorized, issued, and purchased by investors</pre>
</div>
<div title="single user mode" creator="Will" modifier="Will" created="201110161052" modified="201110161110" server.page.revision="201110161110" server.type="file" server.host="">
<pre>More on [[Mac troubleshooting]]

Starting up in single-user or verbose mode
1. Shut down your Mac if it is on.
2. Press the power button to start the computer.
3. Immediately press and hold the Command (Apple) key and one of the following:

   * the &quot;s&quot; key for single-user mode.  (Command-S)
   * the &quot;v&quot; key for verbose mode.  (Command-V)

You have successfully entered single-user or verbose mode when you see white text appear on the screen.
To exit single-user mode type reboot  then press Return. Verbose mode exits automatically when the computer's startup process progresses sufficiently and the blue screen appears.


ref: http://support.apple.com/kb/TS2570
</pre>
</div>
<div title="suffix: tx" creator="Will" modifier="Will" created="201110161019" server.page.revision="201110161019" server.type="file" server.host="">
<pre>tu / tx : Asia / Australia - Intel Processor (TU = Intel + UMA, TX = Intel + Discrete)</pre>
</div>
<div title="tiddlywiki testing" creator="Will" modifier="Will" created="201110260558" modified="201111140223" changecount="33">
<pre>!Code
//code//

{{{
a block of code
}}}

&lt;&lt;&lt;
this is left quotation

hehe

&lt;&lt;&lt;


&gt;right quotation for this one
&gt;en
&gt;&gt;hello wld
&gt;&gt;dfds
&gt;&gt;&gt;sdfds
&gt;&gt;en?


|Unix Format Specifiers|c
|Letter|description|h
|s|string|
|c|Character |
|d|Decimal (integer) number|
|x|Hexadecimal number|</pre>
</div>
<div title="&#38754;&#35797;&#39064; - &#20027;&#35266;&#39064;" creator="Will" modifier="Will" created="201110231024" modified="201110231104" server.type="file" server.host="" changecount="15">
<pre>[[&#38754;&#35797;&#39064; - &#23458;&#35266;&#39064;]]

Job Oriented &gt;&gt;&gt;
JQ1 - 


Non Job Oriented &gt;&gt;&gt;

[[ZGT1]] &#20551;&#35774;&#30001;&#20320;&#36127;&#36131;&#35774;&#35745;&#27604;&#23572;&#183;&#30422;&#33576;&#30340;&#21355;&#29983;&#38388;&#12290;&#24403;&#28982;&#65292;&#38065;&#19981;&#25104;&#38382;&#39064;&#65292;&#20294;&#26159;&#20320;&#19981;&#21487;&#20197;&#21644;&#27604;&#23572;&#35848;&#12290;&#20320;&#20250;&#24590;&#26679;&#20570;

[[ZGT2]] &#20026;&#20160;&#20040;&#24403;&#25105;&#20204;&#22312;&#20219;&#20309;&#19968;&#23478;&#23486;&#39302;&#25171;&#24320;&#28909;&#27700;&#40857;&#22836;&#26102;&#65292;&#28909;&#27700;&#20250;&#39532;&#19978;&#27969;&#20986;&#26469;&#65311; 

[[ZGT3]]* &#22914;&#20309;&#25945;&#33258;&#24049;&#30340;&#22902;&#22902;&#20351;&#29992;&#24494;&#36719;Excel&#34920;&#26684;&#31995;&#32479;

[[ZGT4]] &#20026;&#20160;&#20040;&#19979;&#27700;&#36947;&#30340;&#20117;&#30422;&#26159;&#22278;&#30340;?</pre>
</div>
<div title="&#38754;&#35797;&#39064; - &#23458;&#35266;&#39064;" creator="Will" modifier="Will" created="201110211348" modified="201110231244" server.type="file" server.host="" changecount="26">
<pre>[[&#38754;&#35797;&#39064; - &#20027;&#35266;&#39064;]]
 
[[MST1]] - &#26377;50&#23478;&#20154;&#23478;,&#27599;&#23478;&#19968;&#26465;&#29399;&#12290;&#26377;&#19968;&#22825;&#35686;&#23519;&#36890;&#30693;,50&#26465;&#29399;&#24403;&#20013;&#26377;n&#21482;&#30149;&#29399;,&#34892;&#20026;&#21644;&#27491;&#24120;&#29399;&#19981;&#19968;&#26679;&#12290;&#27599;&#20154;&#21482;&#33021;&#36890;&#36807;&#35266;&#23519;&#21035;&#20154;&#23478;&#30340;&#29399;&#26469;&#21028;&#26029;&#33258;&#24049;&#23478;&#30340;&#29399;&#26159;&#21542;&#29983;&#30149;,&#32780;&#19981;&#33021;&#30475;&#33258;&#24049;&#23478;&#30340;&#29399;,&#22914;&#26524;&#21028;&#26029;&#20986;&#33258;&#24049;&#23478;&#30340;&#29399;&#30149;&#20102;,&#23601;&#24517;&#39035;&#24403;&#22825;&#19968;&#26538;&#25171;&#27515;&#33258;&#24049;&#23478;&#30340;&#29399;&#12290;&#32467;&#26524;,&#31532;&#19968;&#22825;&#27809;&#26377;&#26538;&#22768;,&#31532;&#20108;&#22825;&#27809;&#26377;&#26538;&#22768;,&#31532;&#19977;&#22825;&#24320;&#22987;&#19968;&#38453;&#26538;&#21709;,&#38382;:&#19968;&#20849;&#27515;&#20102;&#20960;&#26465;&#29399;? 

[[MST2]] - 5&#20010;&#28023;&#30423;&#25250;&#24471;100&#26522;&#37329;&#24065;&#21518;&#65292;&#35752;&#35770;&#22914;&#20309;&#36827;&#34892;&#20844;&#27491;&#20998;&#37197;&#12290;&#20182;&#20204;&#21830;&#23450;&#30340;&#20998;&#37197;&#21407;&#21017;&#26159;&#65306;
&#12288;&#12288;&#65288;1&#65289;&#25277;&#31614;&#30830;&#23450;&#21508;&#20154;&#30340;&#20998;&#37197;&#39034;&#24207;&#21495;&#30721;&#65288;1&#65292;2&#65292;3&#65292;4&#65292;5&#65289;&#65307;
&#12288;&#12288;&#65288;2&#65289;&#30001;&#25277;&#21040;1&#21495;&#31614;&#30340;&#28023;&#30423;&#25552;&#20986;&#20998;&#37197;&#26041;&#26696;&#65292;&#28982;&#21518;5&#20154;&#36827;&#34892;&#34920;&#20915;&#65292;&#22914;&#26524;&#26041;&#26696;&#24471;&#21040;&#36229;&#36807;&#21322;&#25968;&#30340;&#20154;&#21516;&#24847;&#65292;&#23601;&#25353;&#29031;&#20182;&#30340;&#26041;&#26696;&#36827;&#34892;&#20998;&#37197;&#65292;&#21542;&#21017;&#23601;&#23558;1&#21495;&#25172;&#36827;&#22823;&#28023;&#21890;&#40104;&#40060;&#65307;
&#12288;&#12288;&#65288;3&#65289;&#22914;&#26524;1&#21495;&#34987;&#25172;&#36827;&#22823;&#28023;&#65292;&#21017;&#30001;2&#21495;&#25552;&#20986;&#20998;&#37197;&#26041;&#26696;&#65292;&#28982;&#21518;&#30001;&#21097;&#20313;&#30340;4&#20154;&#36827;&#34892;&#34920;&#20915;&#65292;&#24403;&#19988;&#20165;&#24403;&#36229;&#36807;&#21322;&#25968;&#30340;&#20154;&#21516;&#24847;&#26102;&#65292;&#25165;&#20250;&#25353;&#29031;&#20182;&#30340;&#25552;&#26696;&#36827;&#34892;&#20998;&#37197;&#65292;&#21542;&#21017;&#20063;&#23558;&#34987;&#25172;&#20837;&#22823;&#28023;&#65307;
&#12288;&#12288;&#65288;4&#65289;&#20381;&#27492;&#31867;&#25512;&#12290;
&#12288;&#12288;&#36825;&#37324;&#20551;&#35774;&#27599;&#19968;&#20010;&#28023;&#30423;&#37117;&#26159;&#32477;&#39030;&#32874;&#26126;&#32780;&#29702;&#24615;&#65292;&#20182;&#20204;&#37117;&#33021;&#22815;&#36827;&#34892;&#20005;&#23494;&#30340;&#36923;&#36753;&#25512;&#29702;&#65292;&#24182;&#33021;&#24456;&#29702;&#26234;&#30340;&#21028;&#26029;&#33258;&#36523;&#30340;&#24471;&#22833;&#65292;&#21363;&#33021;&#22815;&#22312;&#20445;&#20303;&#24615;&#21629;&#30340;&#21069;&#25552;&#19979;&#24471;&#21040;&#26368;&#22810;&#30340;&#37329;&#24065;&#12290;&#21516;&#26102;&#36824;&#20551;&#35774;&#27599;&#19968;&#36718;&#34920;&#20915;&#21518;&#30340;&#32467;&#26524;&#37117;&#33021;&#39034;&#21033;&#24471;&#21040;&#25191;&#34892;&#65292;&#37027;&#20040;&#25277;&#21040;1&#21495;&#30340;&#28023;&#30423;&#24212;&#35813;&#25552;&#20986;&#24590;&#26679;&#30340;&#20998;&#37197;&#26041;&#26696;&#25165;&#33021;&#20351;&#33258;&#24049;&#26082;&#19981;&#34987;&#25172;&#36827;&#28023;&#37324;&#65292;&#21448;&#21487;&#20197;&#24471;&#21040;&#26356;&#22810;&#30340;&#37329;&#24065;&#21602;&#65311;

[[MST3]] - &#20320;&#35753;&#24037;&#20154;&#20026;&#20320;&#24037;&#20316;&#65303;&#22825;&#65292;&#32473;&#24037;&#20154;&#30340;&#22238;&#25253;&#26159;&#19968;&#26681;&#37329;&#26465;&#12290;&#37329;&#26465;&#24179;&#20998;&#25104;&#30456;&#36830;&#30340;&#65303;&#27573;&#65292;&#20320;&#24517;&#39035;&#22312;&#27599;&#22825;&#32467;&#26463;&#26102;&#32473;&#20182;&#20204;&#19968;&#27573;&#37329;&#26465;&#65292;&#22914;&#26524;&#21482;&#35768;&#20320;&#20004;&#27425;&#25226;&#37329;&#26465;&#24324;&#26029;&#65292;&#20320;&#22914;&#20309;&#32473;&#20320;&#30340;&#24037;&#20154;&#20184;&#36153;? 

[[MST4]] - &#22312;&#19968;&#20010;&#24179;&#38754;&#19978;&#30011;1999&#26465;&#30452;&#32447;&#65292;&#26368;&#22810;&#33021;&#23558;&#36825;&#19968;&#24179;&#38754;&#21010;&#20998;&#25104;&#22810;&#23569;&#20010;&#37096;&#20998; 

[[MST5]] - 1000!&#26377;&#20960;&#20301;&#25968;&#65292;&#20026;&#20160;&#20040;

[[MST6]] - &#26377;&#19968;&#20010;&#38271;&#26041;&#24418;&#34507;&#31957;&#65292;&#20999;&#25481;&#20102;&#38271;&#26041;&#24418;&#30340;&#19968;&#22359;(&#22823;&#23567;&#21644;&#20301;&#32622;&#38543;&#24847;)&#65292;&#20320;&#24590;&#26679;&#25165;&#33021;&#30452;&#30452;&#30340;&#19968;&#20992;&#19979;&#21435;&#65292;&#23558;&#21097;&#19979;&#30340;&#34507;&#31957;&#20999;&#25104;&#22823;&#23567;&#30456;&#31561;&#30340;&#20004;&#22359;?

[[MST7]] - &#26377;&#19977;&#31568;&#27700;&#26524;&#65292;&#19968;&#31568;&#35013;&#30340;&#20840;&#26159;&#33529;&#26524;&#65292;&#31532;&#20108;&#31568;&#35013;&#30340;&#20840;&#26159;&#27224;&#23376;&#65292;&#31532;&#19977;&#31568;&#26159;&#27224;&#23376;&#19982;&#33529;&#26524;&#28151;&#22312;&#19968;&#36215;&#12290;&#31568;&#19978;&#30340;&#26631;&#31614;&#37117;&#26159;&#39575;&#20154;&#30340;&#65292;&#65288;&#27604;&#22914;&#65292;&#22914;&#26524;&#26631;&#31614;&#20889;&#30340;&#26159;&#27224;&#23376;&#65292;&#37027;&#20040;&#21487;&#20197;&#32943;&#23450;&#31568;&#37324;&#19981;&#20250;&#21482;&#26377;&#27224;&#23376;&#65292;&#21487;&#33021;&#36824;&#26377;&#33529;&#26524;&#65289;&#20320;&#30340;&#20219;&#21153;&#26159;&#25343;&#20986;&#20854;&#20013;&#19968;&#31568;&#65292;&#20174;&#37324;&#38754;&#21482;&#25343;&#19968;&#21482;&#27700;&#26524;&#65292;&#28982;&#21518;&#27491;&#30830;&#20889;&#20986;&#19977;&#31568;&#27700;&#26524;&#30340;&#26631;&#31614;&#12290;

[[MST8]] - &#20320;&#26377;5&#29942;&#33647;&#65292;&#27599;&#20010;&#33647;&#20024;&#37325;10&#20811;&#65292;&#21482;&#26377;&#19968;&#29942;&#21463;&#21040;&#27745;&#26579;&#30340;&#33647;&#20024;&#37325;&#37327;&#21457;&#29983;&#20102;&#21464;&#21270;&#65292;&#27599;&#20010;&#33647;&#20024;&#37325;9&#20811;&#12290;&#32473;&#20320;&#19968;&#20010;&#22825;&#24179;&#65292;&#20320;&#24590;&#26679;&#19968;&#27425;&#23601;&#33021;&#27979;&#20986;&#21738;&#19968;&#29942;&#26159;&#21463;&#21040;&#27745;&#26579;&#30340;&#33647;&#21602;?

[[MST9]] - &#20174;&#31354;&#20013;&#25918;&#19979;&#20004;&#21015;&#28779;&#36710;&#65292;&#27599;&#21015;&#28779;&#36710;&#37117;&#24102;&#30528;&#38477;&#33853;&#20254;&#65292;&#38477;&#33853;&#21040;&#19968;&#26465;&#27809;&#26377;&#23613;&#22836;&#30340;&#31508;&#30452;&#30340;&#38081;&#36947;&#19978;&#12290;&#20004;&#21015;&#28779;&#36710;&#20043;&#38388;&#30340;&#36317;&#31163;&#19981;&#28165;&#26970;&#12290;&#20004;&#21015;&#36710;&#37117;&#38754;&#21521;&#21516;&#19968;&#20010;&#26041;&#21521;&#12290;&#22312;&#33853;&#22320;&#21518;&#65292;&#38477;&#33853;&#20254;&#25481;&#22312;&#22320;&#19978;&#65292;&#19982;&#28779;&#36710;&#20998;&#31163;&#12290;&#20004;&#21015;&#28779;&#36710;&#37117;&#26377;&#19968;&#20010;&#24494;&#33455;&#29255;&#65292;&#21487;&#20197;&#25511;&#21046;&#23427;&#20204;&#30340;&#36816;&#21160;&#12290;&#20004;&#20010;&#33455;&#29255;&#26159;&#30456;&#21516;&#30340;&#12290;&#20004;&#21015;&#28779;&#36710;&#37117;&#19981;&#30693;&#36947;&#33258;&#24049;&#30340;&#20301;&#32622;&#12290;&#20320;&#38656;&#35201;&#22312;&#33455;&#29255;&#20013;&#20889;&#20837;&#32534;&#30721;&#65292;&#35753;&#36825;&#20004;&#21015;&#28779;&#36710;&#30456;&#36935;&#12290;&#27599;&#34892;&#32534;&#30721;&#37117;&#26377;&#19968;&#23450;&#30340;&#25191;&#34892;&#21629;&#20196;&#30340;&#26102;&#38388;&#12290;

&#12288;&#12288;&#20320;&#33021;&#20351;&#29992;&#20197;&#19979;&#25351;&#20196;(&#32780;&#19988;&#21482;&#33021;&#29992;&#36825;&#20123;&#25351;&#20196;)&#65306;
&#12288;&#12288;MF&#8212;&#35753;&#28779;&#36710;&#26397;&#21069;&#24320;
&#12288;&#12288;MB&#8212;&#35753;&#28779;&#36710;&#26397;&#21518;&#24320;
&#12288;&#12288;IF(P)&#8212;&#22914;&#26524;&#28779;&#36710;&#26049;&#36793;&#26377;&#38477;&#33853;&#20254;&#65292;&#36825;&#20010;&#26465;&#20214;&#23601;&#24471;&#21040;&#20102;&#28385;&#36275;&#12290;
&#12288;&#12288;GOTO

[[MST10] - &#24819;&#35937;&#20320;&#22312;&#38236;&#23376;&#21069;&#65292;&#35831;&#38382;&#65292;&#20026;&#20160;&#20040;&#38236;&#23376;&#20013;&#30340;&#24433;&#20687;&#21487;&#20197;&#39072;&#20498;&#24038;&#21491;&#65292;&#21364;&#19981;&#33021;&#39072;&#20498;&#19978;&#19979;&#65311;

[[MST11] - &#36830;&#32493;&#25972;&#25968;&#20043;&#21644;&#20026;1000 &#30340;&#20849;&#26377;&#20960;&#32452;?

[[MST12] - (&#36825;&#36947;&#39064;&#19981;&#20250;) &#20174;&#21516;&#19968;&#22320;&#28857;&#20986;&#21457;&#30340;&#30456;&#21516;&#22411;&#21495;&#30340;&#39134;&#26426;,&#21487;&#26159;&#27599;&#26550;&#39134;&#26426;&#35013;&#28385;&#27833;&#21482; &#33021;&#32469;&#22320;&#29699;&#39134;&#21322;&#21608;,&#39134;&#26426;&#20043;&#38388;&#21487;&#20197;&#21152;&#27833;,&#21152;&#23436;&#27833;&#30340;&#39134;&#26426;&#24517;&#39035;&#22238;&#21040;&#36215;&#28857;&#12290; &#38382;&#33267;&#23569;&#35201;&#22810;&#23569;&#26550;&#27425;,&#25165;&#33021;&#28385;&#36275;&#26377;&#19968;&#26550;&#32469;&#22320;&#29699;&#19968;&#21608;&#12290;

[[MST13] - 

[[MST14] - 

[[MST15] - 

[[MST16] - 

[[MST17] - 

[[MST18] - 

[[MST19] - 

[[MST20] - </pre>
</div>
</div>
<!--POST-STOREAREA-->
<!--POST-BODY-START-->
<!--POST-BODY-END-->
<script id="jsArea" type="text/javascript">
//<![CDATA[
//
// Please note:
//
// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments
//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki
//
// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation
//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev
//
// JSLint directives
/*global jQuery:false, version:false */
/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */
//--
//-- Configuration repository
//--

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animDuration: 400, // Duration of UI animations in milliseconds
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	locale: "en" // W3C language tag
};

// Hashmap of alternative parsers for the wikifier
config.parsers = {};

// Adaptors
config.adaptors = {};
config.defaultAdaptor = null;

// Backstage tasks
config.tasks = {};

// Annotations
config.annotations = {};

// Custom fields to be automatically added to new tiddlers
config.defaultCustomFields = {};

// Messages
config.messages = {
	messageClose: {},
	dates: {},
	tiddlerPopup: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkRegExpSearch: false,
	chkCaseSensitiveSearch: false,
	chkIncrementalSearch: true,
	chkAnimate: true,
	chkSaveBackups: true,
	chkAutoSave: false,
	chkGenerateAnRssFeed: false,
	chkSaveEmptyTemplate: false,
	chkOpenInNewWindow: true,
	chkToggleLinks: false,
	chkHttpReadOnly: true,
	chkForceMinorUpdate: false,
	chkConfirmDelete: true,
	chkInsertTabs: false,
	chkUsePreForStorage: true, // Whether to use <pre> format for storage
	chkDisplayInstrumentation: false,
	txtBackupFolder: "",
	txtEditorFocus: "text",
	txtMainTab: "tabTimeline",
	txtMoreTab: "moreTabAll",
	txtMaxEditRows: "30",
	txtFileSystemCharSet: "UTF-8",
	txtTheme: ""
	};
config.optionsDesc = {};

config.optionsSource = {};

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
};

// More messages (rather a legacy layout that should not really be like this)
config.views = {
	wikified: {
		tag: {}
	},
	editor: {
		tagChooser: {}
	}
};

// Backstage tasks
config.backstageTasks = ["save","sync","importTask","tweak","upgrade","plugins"];

// Extensions
config.extensions = {};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: {sizeTextbox: 15},
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {},
		touched: {},
		filter: {}
	},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	options: {},
	newTiddler: {},
	newJournal: {},
	tabs: {},
	gradient: {},
	message: {},
	view: {defaultView: "text"},
	edit: {},
	tagChooser: {},
	toolbar: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {},
	upgrade: {
		source: "http://tiddlywiki-releases.tiddlyspace.com/upgrade",
		backupExtension: "pre.core.upgrade"
	},
	sync: {},
	annotations: {}
};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: {hideReadOnly: true},
	cancelTiddler: {},
	deleteTiddler: {hideReadOnly: true},
	permalink: {},
	references: {type: "popup"},
	jump: {type: "popup"},
	syncing: {type: "popup"},
	fields: {type: "popup"}
};

// Control of macro parameter evaluation
config.evaluateMacroParameters = "all";

// Basic regular expressions
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
};
if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))) {
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
	};
}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.sectionSeparator = "##";
config.textPrimitives.urlPattern = "(?:file|http|https|mailto|ftp|irc|news|data):[^\\s'\"]+(?:/|\\b)";
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
	config.textPrimitives.lowerLetter + "+" +
	config.textPrimitives.upperLetter +
	config.textPrimitives.anyLetter + "*)|(?:" +
	config.textPrimitives.upperLetter + "{2,}" +
	config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter + "+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,"mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");
config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");

config.glyphs = {
	currBrowser: null,
	browsers: [],
	codes: {}
};

//--
//-- Shadow tiddlers
//--

config.shadowTiddlers = {
	StyleSheet: "",
	MarkupPreHead: "",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: "",
	TabTimeline: '<<timeline>>',
	TabAll: '<<list all>>',
	TabTags: '<<allTags excludeLists>>',
	TabMoreMissing: '<<list missing>>',
	TabMoreOrphans: '<<list orphans>>',
	TabMoreShadowed: '<<list shadowed>>',
	AdvancedOptions: '<<options>>',
	PluginManager: '<<plugins>>',
	SystemSettings: '',
	ToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',
	WindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'
};

// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	isGecko: navigator.product == "Gecko" && config.userAgent.indexOf("WebKit") == -1,
	ieVersion: /MSIE (\d.\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]","g")).test("\u0150")),
	firefoxDate: /gecko\/(\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	isOpera: config.userAgent.indexOf("opera") != -1,
	isChrome: config.userAgent.indexOf('chrome') > -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1
};

merge(config.glyphs,{
	browsers: [
		function() {return config.browser.isIE;},
		function() {return true;}
		],
	codes: {
		downTriangle: ["\u25BC","\u25BE"],
		downArrow: ["\u2193","\u2193"],
		bentArrowLeft: ["\u2190","\u21A9"],
		bentArrowRight: ["\u2192","\u21AA"]
	}
});

//--
//-- Translateable strings
//--

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options,{
	txtUserName: "YourName"});

merge(config.tasks,{
	save: {text: "save", tooltip: "Save your changes to this TiddlyWiki"},
	sync: {text: "sync", tooltip: "Synchronise changes with other TiddlyWiki files and servers", content: '<<sync>>'},
	importTask: {text: "import", tooltip: "Import tiddlers and plugins from other TiddlyWiki files and servers", content: '<<importTiddlers>>'},
	tweak: {text: "tweak", tooltip: "Tweak the appearance and behaviour of TiddlyWiki", content: '<<options>>'},
	upgrade: {text: "upgrade", tooltip: "Upgrade TiddlyWiki core code", content: '<<upgrade>>'},
	plugins: {text: "plugins", tooltip: "Manage installed plugins", content: '<<plugins>>'}
});

// Options that can be set in the options panel and/or cookies
merge(config.optionsDesc,{
	txtUserName: "Username for signing your edits",
	chkRegExpSearch: "Enable regular expressions for searches",
	chkCaseSensitiveSearch: "Case-sensitive searching",
	chkIncrementalSearch: "Incremental key-by-key searching",
	chkAnimate: "Enable animations",
	chkSaveBackups: "Keep backup file when saving changes",
	chkAutoSave: "Automatically save changes",
	chkGenerateAnRssFeed: "Generate an RSS feed when saving changes",
	chkSaveEmptyTemplate: "Generate an empty template when saving changes",
	chkOpenInNewWindow: "Open external links in a new window",
	chkToggleLinks: "Clicking on links to open tiddlers causes them to close",
	chkHttpReadOnly: "Hide editing features when viewed over HTTP",
	chkForceMinorUpdate: "Don't update modifier username and date when editing tiddlers",
	chkConfirmDelete: "Require confirmation before deleting tiddlers",
	chkInsertTabs: "Use the tab key to insert tab characters instead of moving between fields",
	txtBackupFolder: "Name of folder to use for backups",
	txtMaxEditRows: "Maximum number of rows in edit boxes",
	txtTheme: "Name of the theme to use",
	txtFileSystemCharSet: "Default character set for saving changes (Firefox/Mozilla only)"});

merge(config.messages,{
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. Possible reasons include:\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\n- the pathname to your TiddlyWiki file contains illegal characters\n- the TiddlyWiki HTML file has been moved or renamed",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "Main TiddlyWiki file saved",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed",
	loadingMissingTiddler: "Attempting to retrieve the tiddler '%0' from the '%1' server at:\n\n'%2' in the workspace '%3'",
	upgradeDone: "The upgrade to version %0 is now complete\n\nClick 'OK' to reload the newly upgraded TiddlyWiki",
	invalidCookie: "Invalid cookie '%0'"});

merge(config.messages.messageClose,{
	text: "close",
	tooltip: "close this message area"});

config.messages.backstage = {
	open: {text: "backstage", tooltip: "Open the backstage area to perform authoring and editing tasks"},
	close: {text: "close", tooltip: "Close the backstage area"},
	prompt: "backstage: ",
	decal: {
		edit: {text: "edit", tooltip: "Edit the tiddler '%0'"}
	}
};

config.messages.listView = {
	tiddlerTooltip: "Click for the full text of this tiddler",
	previewUnavailable: "(preview not available)"
};

config.messages.dates.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
// suffixes for dates, eg "1st","2nd","3rd"..."30th","31st"
config.messages.dates.daySuffixes = ["st","nd","rd","th","th","th","th","th","th","th",
		"th","th","th","th","th","th","th","th","th","th",
		"st","nd","rd","th","th","th","th","th","th","th",
		"st"];
config.messages.dates.am = "am";
config.messages.dates.pm = "pm";

merge(config.messages.tiddlerPopup,{
	});

merge(config.views.wikified.tag,{
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"});

merge(config.views.wikified,{
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	dateFormat: "DD MMM YYYY",
	createdPrompt: "created"});

merge(config.views.editor,{
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"});

merge(config.views.editor.tagChooser,{
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"});

merge(config.messages,{
	sizeTemplates:
		[
		{unit: 1024*1024*1024, template: "%0\u00a0GB"},
		{unit: 1024*1024, template: "%0\u00a0MB"},
		{unit: 1024, template: "%0\u00a0KB"},
		{unit: 1, template: "%0\u00a0B"}
		]});

merge(config.macros.search,{
	label: "search",
	prompt: "Search this TiddlyWiki",
	placeholder: "",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"});

merge(config.macros.tagging,{
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"});

merge(config.macros.timeline,{
	dateFormat: "DD MMM YYYY"});

merge(config.macros.allTags,{
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";
config.macros.list.touched.prompt = "Tiddlers that have been modified locally";

merge(config.macros.closeAll,{
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"});

merge(config.macros.permaview,{
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"});

merge(config.macros.saveChanges,{
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"});

merge(config.macros.newTiddler,{
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"});

merge(config.macros.newJournal,{
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"});

merge(config.macros.options,{
	wizardTitle: "Tweak advanced options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>",
	unknownDescription: "//(unknown)//",
	listViewTemplate: {
		columns: [
			{name: 'Option', field: 'option', title: "Option", type: 'String'},
			{name: 'Description', field: 'description', title: "Description", type: 'WikiText'},
			{name: 'Name', field: 'name', title: "Name", type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'}
			]}
	});

merge(config.macros.plugins,{
	wizardTitle: "Manage plugins",
	step1Title: "Currently loaded plugins",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these plugins:\n\n%0",
	removeLabel: "remove systemConfig tag",
	removePrompt: "Remove systemConfig tag",
	deleteLabel: "delete",
	deletePrompt: "Delete these tiddlers forever",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox'},
			{name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]},
	listViewTemplateReadOnly: {
		columns: [
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]}
	});

merge(config.macros.toolbar,{
	moreLabel: "more",
	morePrompt: "Show additional commands",
	lessLabel: "less",
	lessPrompt: "Hide additional commands",
	separator: "|"
	});

merge(config.macros.refreshDisplay,{
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
	});

merge(config.macros.importTiddlers,{
	readOnlyWarning: "You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL",
	wizardTitle: "Import tiddlers from another file or server",
	step1Title: "Step 1: Locate the server or TiddlyWiki file",
	step1Html: "Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>",
	openLabel: "open",
	openPrompt: "Open the connection to this file or server",
	statusOpenHost: "Opening the host",
	statusGetWorkspaceList: "Getting the list of available workspaces",
	step2Title: "Step 2: Choose the workspace",
	step2Html: "Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel this import",
	statusOpenWorkspace: "Opening the workspace",
	statusGetTiddlerList: "Getting the list of available tiddlers",
	errorGettingTiddlerList: "Error getting list of tiddlers, click Cancel to try again",
	errorGettingTiddlerListHttp404: "Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.",
	errorGettingTiddlerListHttp: "Error retrieving tiddlers from url, please ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled",
	errorGettingTiddlerListFile: "Error retrieving tiddlers from local file, please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.",
	step3Title: "Step 3: Choose the tiddlers to import",
	step3Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>",
	importLabel: "import",
	importPrompt: "Import these tiddlers",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	step4Title: "Step 4: Importing %0 tiddler(s)",
	step4Html: "<input type='hidden' name='markReport'></input>", // DO NOT TRANSLATE
	doneLabel: "done",
	donePrompt: "Close this wizard",
	statusDoingImport: "Importing tiddlers",
	statusDoneImport: "All tiddlers imported",
	systemServerNamePattern: "%2 on %1",
	systemServerNamePatternNoWorkspace: "%1",
	confirmOverwriteSaveTiddler: "The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged",
	serverSaveTemplate: "|''Type:''|%0|\n|''URL:''|%1|\n|''Workspace:''|%2|\n\nThis tiddler was automatically created to record the details of this server",
	serverSaveModifier: "(System)",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Tags', field: 'tags', title: "Tags", type: 'Tags'}
			],
		rowClasses: [
			]}
	});

merge(config.macros.upgrade,{
	wizardTitle: "Upgrade TiddlyWiki core code",
	step1Title: "Update or repair this TiddlyWiki to the latest release",
	step1Html: "You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>",
	errorCantUpgrade: "Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally",
	errorNotSaved: "You must save changes before you can perform an upgrade",
	step2Title: "Confirm the upgrade details",
	step2Html_downgrade: "You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended",
	step2Html_restore: "This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged",
	step2Html_upgrade: "You are about to upgrade to TiddlyWiki version %0 from %1",
	upgradeLabel: "upgrade",
	upgradePrompt: "Prepare for the upgrade process",
	statusPreparingBackup: "Preparing backup",
	statusSavingBackup: "Saving backup file",
	errorSavingBackup: "There was a problem saving the backup file",
	statusLoadingCore: "Loading core code",
	errorLoadingCore: "Error loading the core code",
	errorCoreFormat: "Error with the new core code",
	statusSavingCore: "Saving the new core code",
	statusReloadingCore: "Reloading the new core code",
	startLabel: "start",
	startPrompt: "Start the upgrade process",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel the upgrade process",
	step3Title: "Upgrade cancelled",
	step3Html: "You have cancelled the upgrade process"
	});

merge(config.macros.sync,{
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Server Type', field: 'serverType', title: "Server type", type: 'String'},
			{name: 'Server Host', field: 'serverHost', title: "Server host", type: 'String'},
			{name: 'Server Workspace', field: 'serverWorkspace', title: "Server workspace", type: 'String'},
			{name: 'Status', field: 'status', title: "Synchronisation status", type: 'String'},
			{name: 'Server URL', field: 'serverUrl', title: "Server URL", text: "View", type: 'Link'}
			],
		rowClasses: [
			],
		buttons: [
			{caption: "Sync these tiddlers", name: 'sync'}
			]},
	wizardTitle: "Synchronize with external servers and files",
	step1Title: "Choose the tiddlers you want to synchronize",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	syncLabel: "sync",
	syncPrompt: "Sync these tiddlers",
	hasChanged: "Changed while unplugged",
	hasNotChanged: "Unchanged while unplugged",
	syncStatusList: {
		none: {text: "...", display:'none', className:'notChanged'},
		changedServer: {text: "Changed on server", display:null, className:'changedServer'},
		changedLocally: {text: "Changed while unplugged", display:null, className:'changedLocally'},
		changedBoth: {text: "Changed while unplugged and on server", display:null, className:'changedBoth'},
		notFound: {text: "Not found on server", display:null, className:'notFound'},
		putToServer: {text: "Saved update on server", display:null, className:'putToServer'},
		gotFromServer: {text: "Retrieved update from server", display:null, className:'gotFromServer'}
		}
	});

merge(config.macros.annotations,{
	});

merge(config.commands.closeTiddler,{
	text: "close",
	tooltip: "Close this tiddler"});

merge(config.commands.closeOthers,{
	text: "close others",
	tooltip: "Close all other tiddlers"});

merge(config.commands.editTiddler,{
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"});

merge(config.commands.saveTiddler,{
	text: "done",
	tooltip: "Save changes to this tiddler"});

merge(config.commands.cancelTiddler,{
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"});

merge(config.commands.deleteTiddler,{
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"});

merge(config.commands.permalink,{
	text: "permalink",
	tooltip: "Permalink for this tiddler"});

merge(config.commands.references,{
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"});

merge(config.commands.jump,{
	text: "jump",
	tooltip: "Jump to another open tiddler"});

merge(config.commands.syncing,{
	text: "syncing",
	tooltip: "Control synchronisation of this tiddler with a server or external file",
	currentlySyncing: "<div>Currently syncing via <span class='popupHighlight'>'%0'</span> to:</"+"div><div>host: <span class='popupHighlight'>%1</span></"+"div><div>workspace: <span class='popupHighlight'>%2</span></"+"div>", // Note escaping of closing <div> tag
	notCurrentlySyncing: "Not currently syncing",
	captionUnSync: "Stop synchronising this tiddler",
	chooseServer: "Synchronise this tiddler with another server:",
	currServerMarker: "\u25cf ",
	notCurrServerMarker: "  "});

merge(config.commands.fields,{
	text: "fields",
	tooltip: "Show the extended fields of this tiddler",
	emptyText: "There are no extended fields for this tiddler",
	listViewTemplate: {
		columns: [
			{name: 'Field', field: 'field', title: "Field", type: 'String'},
			{name: 'Value', field: 'value', title: "Value", type: 'String'}
			],
		rowClasses: [
			],
		buttons: [
			]}});

merge(config.shadowTiddlers,{
	DefaultTiddlers: "[[GettingStarted]]",
	MainMenu: "[[GettingStarted]]",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "",
	SideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal "DD MMM YYYY" "journal">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel "options \u00bb" "Change TiddlyWiki advanced options">>',
	SideBarTabs: '<<tabs txtMainTab "Timeline" "Timeline" TabTimeline "All" "All tiddlers" TabAll "Tags" "All tags" TabTags "More" "More lists" TabMore>>',
	TabMore: '<<tabs txtMoreTab "Missing" "Missing tiddlers" TabMoreMissing "Orphans" "Orphaned tiddlers" TabMoreOrphans "Shadowed" "Shadowed tiddlers" TabMoreShadowed>>'
	});

merge(config.annotations,{
	AdvancedOptions: "This shadow tiddler provides access to several advanced options",
	ColorPalette: "These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface",
	DefaultTiddlers: "The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up",
	EditTemplate: "The HTML template in this shadow tiddler determines how tiddlers look while they are being edited",
	GettingStarted: "This shadow tiddler provides basic usage instructions",
	ImportTiddlers: "This shadow tiddler provides access to importing tiddlers",
	MainMenu: "This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen",
	MarkupPreHead: "This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file",
	MarkupPostHead: "This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file",
	MarkupPreBody: "This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file",
	MarkupPostBody: "This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block",
	OptionsPanel: "This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar",
	PageTemplate: "The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout",
	PluginManager: "This shadow tiddler provides access to the plugin manager",
	SideBarOptions: "This shadow tiddler is used as the contents of the option panel in the right-hand sidebar",
	SideBarTabs: "This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar",
	SiteSubtitle: "This shadow tiddler is used as the second part of the page title",
	SiteTitle: "This shadow tiddler is used as the first part of the page title",
	SiteUrl: "This shadow tiddler should be set to the full target URL for publication",
	StyleSheetColors: "This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheet: "This tiddler can contain custom CSS definitions",
	StyleSheetLayout: "This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheetLocale: "This shadow tiddler contains CSS definitions related to the translation locale",
	StyleSheetPrint: "This shadow tiddler contains CSS definitions for printing",
	SystemSettings: "This tiddler is used to store configuration options for this TiddlyWiki document",
	TabAll: "This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar",
	TabMore: "This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar",
	TabMoreMissing: "This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar",
	TabMoreOrphans: "This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar",
	TabMoreShadowed: "This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar",
	TabTags: "This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar",
	TabTimeline: "This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar",
	ToolbarCommands: "This shadow tiddler determines which commands are shown in tiddler toolbars",
	ViewTemplate: "The HTML template in this shadow tiddler determines how tiddlers look"
	});
//--
//-- Main
//--

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
var anim = typeof Animator == "function" ? new Animator() : null; // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var showBackstage; // Whether to include the backstage area
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()

// Whether to use the JavaSaver applet
var useJavaSaver = (config.browser.isSafari || config.browser.isOpera) && (document.location.toString().substr(0,4) != "http");

if(!window || !window.console) {
	console = {tiddlywiki:true,log:function(message) {displayMessage(message);}};
}

// Starting up
function main()
{
	var t10,t9,t8,t7,t6,t5,t4,t3,t2,t1,t0 = new Date();
	startingUp = true;
	var doc = jQuery(document);
	jQuery.noConflict();
	window.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};
	params = getParameters();
	if(params)
		params = params.parseParams("open",null,false);
	store = new TiddlyWiki({config:config});
	invokeParamifier(params,"oninit");
	story = new Story("tiddlerDisplay","tiddler");
	addEvent(document,"click",Popup.onDocumentClick);
	saveTest();
	var s;
	for(s=0; s<config.notifyTiddlers.length; s++)
		store.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);
	t1 = new Date();
	loadShadowTiddlers();
	doc.trigger("loadShadows");
	t2 = new Date();
	store.loadFromDiv("storeArea","store",true);
	doc.trigger("loadTiddlers");
	loadOptions();
	t3 = new Date();
	invokeParamifier(params,"onload");
	t4 = new Date();
	readOnly = (window.location.protocol == "file:") ? false : config.options.chkHttpReadOnly;
	var pluginProblem = loadPlugins("systemConfig");
	doc.trigger("loadPlugins");
	t5 = new Date();
	formatter = new Formatter(config.formatters);
	invokeParamifier(params,"onconfig");
	story.switchTheme(config.options.txtTheme);
	showBackstage = showBackstage !== undefined ? showBackstage : !readOnly;
	t6 = new Date();
	var m;
	for(m in config.macros) {
		if(config.macros[m].init)
			config.macros[m].init();
	}
	t7 = new Date();
	store.notifyAll();
	t8 = new Date();
	restart();
	refreshDisplay();
	t9 = new Date();
	if(pluginProblem) {
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	if(showBackstage)
		backstage.init();
	t10 = new Date();
	if(config.options.chkDisplayInstrumentation) {
		displayMessage("LoadShadows " + (t2-t1) + " ms");
		displayMessage("LoadFromDiv " + (t3-t2) + " ms");
		displayMessage("LoadPlugins " + (t5-t4) + " ms");
		displayMessage("Macro init " + (t7-t6) + " ms");
		displayMessage("Notify " + (t8-t7) + " ms");
		displayMessage("Restart " + (t9-t8) + " ms");
		displayMessage("Total: " + (t10-t0) + " ms");
	}
	startingUp = false;
	doc.trigger("startup");
}

// Called on unload. All functions called conditionally since they themselves may have been unloaded.
function unload()
{
	if(window.checkUnsavedChanges)
		checkUnsavedChanges();
	if(window.scrubNodes)
		scrubNodes(document.body);
}

// Restarting
function restart()
{
	invokeParamifier(params,"onstart");
	if(story.isEmpty()) {
		story.displayDefaultTiddlers();
	}
	window.scrollTo(0,0);
}

function saveTest()
{
	var s = document.getElementById("saveTest");
	if(s.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	s.appendChild(document.createTextNode("savetest"));
}

function loadShadowTiddlers()
{
	var shadows = new TiddlyWiki();
	shadows.loadFromDiv("shadowArea","shadows",true);
	shadows.forEachTiddler(function(title,tiddler){config.shadowTiddlers[title] = tiddler.text;});
}

function loadPlugins(tag)
{
	if(safeMode)
		return false;
	var tiddlers = store.getTaggedTiddlers(tag);
	tiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1);});
	var toLoad = [];
	var nLoaded = 0;
	var map = {};
	var nPlugins = tiddlers.length;
	installedPlugins = [];
	var i;
	for(i=0; i<nPlugins; i++) {
		var p = getPluginInfo(tiddlers[i]);
		installedPlugins[i] = p;
		var n = p.Name || p.title;
		if(n)
			map[n] = p;
		n = p.Source;
		if(n)
			map[n] = p;
	}
	var visit = function(p) {
		if(!p || p.done)
			return;
		p.done = 1;
		var reqs = p.Requires;
		if(reqs) {
			reqs = reqs.readBracketedList();
			var i;
			for(i=0; i<reqs.length; i++)
				visit(map[reqs[i]]);
		}
		toLoad.push(p);
	};
	for(i=0; i<nPlugins; i++)
		visit(installedPlugins[i]);
	for(i=0; i<toLoad.length; i++) {
		p = toLoad[i];
		pluginInfo = p;
		tiddler = p.tiddler;
		if(isPluginExecutable(p)) {
			if(isPluginEnabled(p)) {
				p.executed = true;
				var startTime = new Date();
				try {
					if(tiddler.text)
						window.eval(tiddler.text);
					nLoaded++;
				} catch(ex) {
					p.log.push(config.messages.pluginError.format([exceptionText(ex)]));
					p.error = true;
					if(!console.tiddlywiki) {
						console.log("error evaluating " + tiddler.title, ex);
					}
				}
				pluginInfo.startupTime = String((new Date()) - startTime) + "ms";
			} else {
				nPlugins--;
			}
		} else {
			p.warning = true;
		}
	}
	return nLoaded != nPlugins;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title,["Name","Description","Version","Requires","CoreVersion","Date","Source","Author","License","Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigForce")) {
		plugin.log.push(config.messages.pluginForced);
		return true;
	}
	if(plugin["CoreVersion"]) {
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0],10) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1],10) - version.minor;
		if(w == 0 && coreVersion[2])
			w = parseInt(coreVersion[2],10) - version.revision;
		if(w > 0) {
			plugin.log.push(config.messages.pluginVersionError);
			return false;
		}
	}
	return true;
}

function isPluginEnabled(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable")) {
		plugin.log.push(config.messages.pluginDisabled);
		return false;
	}
	return true;
}

//--
//-- Paramifiers
//--

function getParameters()
{
	var p = null;
	if(window.location.hash) {
		p = decodeURIComponent(window.location.hash.substr(1));
		if(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < "20051111")
			p = convertUTF8ToUnicode(p);
	}
	return p;
}

function invokeParamifier(params,handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;
	var i;
	for(i=1; i<params.length; i++) {
		var p = config.paramifiers[params[i].name];
		if(p && p[handler] instanceof Function)
			p[handler](params[i].value);
		else {
			var h = config.optionHandlers[params[i].name.substr(0,3)];
			if(h && h.set instanceof Function)
				h.set(params[i].name,params[i].value);
		}
	}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
	}
};

config.paramifiers.open = {
	onstart: function(v) {
		if(!readOnly || store.tiddlerExists(v) || store.isShadowTiddler(v))
			story.displayTiddler("bottom",v,null,false,null);
	}
};

config.paramifiers.story = {
	onstart: function(v) {
		var list = store.getTiddlerText(v,"").parseParams("open",null,false);
		invokeParamifier(list,"onstart");
	}
};

config.paramifiers.search = {
	onstart: function(v) {
		story.search(v,false,false);
	}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v,false,true);
	}
};

config.paramifiers.tag = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers("[tag["+v+"]]"),null,false,null);
	}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		var args = v.parseParams("anon", null, null)[0];
		var title = args.title ? args.title[0] : v;
		var customFields = args.fields ? args.fields[0] : null;
		if(!readOnly) {
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,customFields);
			story.focusTiddler(title,"text");
			var i,tags = args.tag || [];
			for(i=0;i<tags.length;i++) {
				story.setTiddlerTag(title,tags[i],+1);
			}
		}
	}
};

config.paramifiers.newJournal = {
	onstart: function(v) {
		if(!readOnly) {
			var now = new Date();
			var title = now.formatString(v.trim());
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(title,"text");
		}
	}
};

config.paramifiers.readOnly = {
	onconfig: function(v) {
		var p = v.toLowerCase();
		readOnly = p == "yes" ? true : (p == "no" ? false : readOnly);
	}
};

config.paramifiers.theme = {
	onconfig: function(v) {
		story.switchTheme(v);
	}
};

config.paramifiers.upgrade = {
	onstart: function(v) {
		upgradeFrom(v);
	}
};

config.paramifiers.recent= {
	onstart: function(v) {
		var titles=[];
		var i,tiddlers=store.getTiddlers("modified","excludeLists").reverse();
		for(i=0; i<v && i<tiddlers.length; i++)
			titles.push(tiddlers[i].title);
		story.displayTiddlers(null,titles);
	}
};

config.paramifiers.filter = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers(v),null,false);
	}
};

//--
//-- Formatter helpers
//--

function Formatter(formatters)
{
	var n;
	this.formatters = [];
	var pattern = [];
	for(n=0; n<formatters.length; n++) {
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
	}
	this.formatterRegExp = new RegExp(pattern.join("|"),"mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);
	},

	inlineCssHelper: function(w)
	{
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var s,v;
			if(lookaheadMatch[1]) {
				s = lookaheadMatch[1].unDash();
				v = lookaheadMatch[2];
			} else {
				s = lookaheadMatch[3].unDash();
				v = lookaheadMatch[4];
			}
			if(s=="bgcolor")
				s = "backgroundColor";
			if(s=="float")
				s = "cssFloat";
			styles.push({style: s, value: v});
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		}
		return styles;
	},

	applyCssHelper: function(e,styles)
	{
		var t;
		for(t=0; t< styles.length; t++) {
			try {
				e.style[styles[t].style] = styles[t].value;
			} catch (ex) {
			}
		}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var text = lookaheadMatch[1];
			if(config.browser.isIE)
				text = text.replace(/\n/g,"\r");
			createTiddlyElement(w.output,this.element,null,null,text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link)) {
			return false;
		}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern,"mg");
		if(urlRegExp.exec(link)) {
			return true;
		}
		if(link.indexOf(".")!=-1 || link.indexOf("\\")!=-1 || link.indexOf("/")!=-1 || link.indexOf("#")!=-1) {
			return true;
		}
		return false;
	}

};

//--
//-- Standard formatters
//--

config.formatters = [
{
	name: "table",
	match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
	lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
	rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
	cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
	cellTermRegExp: /((?:\x20*)\|)/mg,
	rowTypes: {"c":"caption", "h":"thead", "":"tbody", "f":"tfoot"},
	handler: function(w)
	{
		var table = createTiddlyElement(w.output,"table",null,"twtable");
		var prevColumns = [];
		var currRowType = null;
		var rowContainer;
		var rowCount = 0;
		var onmouseover = function() {jQuery(this).addClass("hoverRow");};
		var onmouseout = function() {jQuery(this).removeClass("hoverRow");};
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var nextRowType = lookaheadMatch[2];
			if(nextRowType == "k") {
				table.className = lookaheadMatch[1];
				w.nextMatch += lookaheadMatch[0].length+1;
			} else {
				if(nextRowType != currRowType) {
					rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);
					currRowType = nextRowType;
				}
				if(currRowType == "c") {
					// Caption
					w.nextMatch++;
					if(rowContainer != table.firstChild)
						table.insertBefore(rowContainer,table.firstChild);
					rowContainer.setAttribute("align",rowCount == 0?"top":"bottom");
					w.subWikifyTerm(rowContainer,this.rowTermRegExp);
				} else {
					var theRow = createTiddlyElement(rowContainer,"tr",null,rowCount%2?"oddRow":"evenRow");
					theRow.onmouseover = onmouseover;
					theRow.onmouseout = onmouseout;
					this.rowHandler(w,theRow,prevColumns);
					rowCount++;
				}
			}
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	},
	rowHandler: function(w,e,prevColumns)
	{
		var col = 0;
		var colSpanCount = 1;
		var prevCell = null;
		this.cellRegExp.lastIndex = w.nextMatch;
		var cellMatch = this.cellRegExp.exec(w.source);
		while(cellMatch && cellMatch.index == w.nextMatch) {
			if(cellMatch[1] == "~") {
				// Rowspan
				var last = prevColumns[col];
				if(last) {
					last.rowSpanCount++;
					last.element.setAttribute("rowspan",last.rowSpanCount);
					last.element.setAttribute("rowSpan",last.rowSpanCount); // Needed for IE
					last.element.valign = "center";
					if(colSpanCount > 1) {
						last.element.setAttribute("colspan",colSpanCount);
						last.element.setAttribute("colSpan",colSpanCount); // Needed for IE
						colSpanCount = 1;
					}
				}
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[1] == ">") {
				// Colspan
				colSpanCount++;
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[2]) {
				// End of row
				if(prevCell && colSpanCount > 1) {
					prevCell.setAttribute("colspan",colSpanCount);
					prevCell.setAttribute("colSpan",colSpanCount); // Needed for IE
				}
				w.nextMatch = this.cellRegExp.lastIndex;
				break;
			} else {
				// Cell
				w.nextMatch++;
				var styles = config.formatterHelpers.inlineCssHelper(w);
				var spaceLeft = false;
				var chr = w.source.substr(w.nextMatch,1);
				while(chr == " ") {
					spaceLeft = true;
					w.nextMatch++;
					chr = w.source.substr(w.nextMatch,1);
				}
				var cell;
				if(chr == "!") {
					cell = createTiddlyElement(e,"th");
					w.nextMatch++;
				} else {
					cell = createTiddlyElement(e,"td");
				}
				prevCell = cell;
				prevColumns[col] = {rowSpanCount:1,element:cell};
				if(colSpanCount > 1) {
					cell.setAttribute("colspan",colSpanCount);
					cell.setAttribute("colSpan",colSpanCount); // Needed for IE
					colSpanCount = 1;
				}
				config.formatterHelpers.applyCssHelper(cell,styles);
				w.subWikifyTerm(cell,this.cellTermRegExp);
				if(w.matchText.substr(w.matchText.length-2,1) == " ") // spaceRight
					cell.align = spaceLeft ? "center" : "left";
				else if(spaceLeft)
					cell.align = "right";
				w.nextMatch--;
			}
			col++;
			this.cellRegExp.lastIndex = w.nextMatch;
			cellMatch = this.cellRegExp.exec(w.source);
		}
	}
},

{
	name: "heading",
	match: "^!{1,6}",
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,"h" + w.matchLength),this.termRegExp);
	}
},

{
	name: "list",
	match: "^(?:[\\*#;:]+)",
	lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0, currType = null;
		var listLevel, listType, itemType, baseType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			if(lookaheadMatch[1]) {
				listType = "ul";
				itemType = "li";
			} else if(lookaheadMatch[2]) {
				listType = "ol";
				itemType = "li";
			} else if(lookaheadMatch[3]) {
				listType = "dl";
				itemType = "dt";
			} else if(lookaheadMatch[4]) {
				listType = "dl";
				itemType = "dd";
			}
			if(!baseType)
				baseType = listType;
			listLevel = lookaheadMatch[0].length;
			w.nextMatch += lookaheadMatch[0].length;
			var t;
			if(listLevel > currLevel) {
				for(t=currLevel; t<listLevel; t++) {
					var target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;
					stack.push(createTiddlyElement(target,listType));
				}
			} else if(listType!=baseType && listLevel==1) {
				w.nextMatch -= lookaheadMatch[0].length;
				return;
			} else if(listLevel < currLevel) {
				for(t=currLevel; t>listLevel; t--)
					stack.pop();
			} else if(listLevel == currLevel && listType != currType) {
				stack.pop();
				stack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));
			}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(stack[stack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	}
},

{
	name: "quoteByBlock",
	match: "^<<<\\n",
	termRegExp: /(^<<<(\n|$))/mg,
	element: "blockquote",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "quoteByLine",
	match: "^>+",
	lookaheadRegExp: /^>+/mg,
	termRegExp: /(\n)/mg,
	element: "blockquote",
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0;
		var newLevel = w.matchLength;
		var t,matched;
		do {
			if(newLevel > currLevel) {
				for(t=currLevel; t<newLevel; t++)
					stack.push(createTiddlyElement(stack[stack.length-1],this.element));
			} else if(newLevel < currLevel) {
				for(t=currLevel; t>newLevel; t--)
					stack.pop();
			}
			currLevel = newLevel;
			w.subWikifyTerm(stack[stack.length-1],this.termRegExp);
			createTiddlyElement(stack[stack.length-1],"br");
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
			if(matched) {
				newLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
			}
		} while(matched);
	}
},

{
	name: "rule",
	match: "^----+$\\n?|<hr ?/?>\\n?",
	handler: function(w)
	{
		createTiddlyElement(w.output,"hr");
	}
},

{
	name: "monospacedByLine",
	match: "^(?:/\\*\\{\\{\\{\\*/|\\{\\{\\{|//\\{\\{\\{|<!--\\{\\{\\{-->)\\n",
	element: "pre",
	handler: function(w)
	{
		switch(w.matchText) {
		case "/*{{{*/\n": // CSS
			this.lookaheadRegExp = /\/\*\{\{\{\*\/\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\*\}\}\}\*\/$\n?)/mg;
			break;
		case "{{{\n": // monospaced block
			this.lookaheadRegExp = /^\{\{\{\n((?:^[^\n]*\n)+?)(^\f*\}\}\}$\n?)/mg;
			break;
		case "//{{{\n": // plugin
			this.lookaheadRegExp = /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\/\}\}\}$\n?)/mg;
			break;
		case "<!--{{{-->\n": //template
			this.lookaheadRegExp = /<!--\{\{\{-->\n*((?:^[^\n]*\n)+?)(\n*^\f*<!--\}\}\}-->$\n?)/mg;
			break;
		default:
			break;
		}
		config.formatterHelpers.enclosedTextHelper.call(this,w);
	}
},

{
	name: "wikifyComment",
	match: "^(?:/\\*\\*\\*|<!---)\\n",
	handler: function(w)
	{
		var termRegExp = (w.matchText == "/***\n") ? (/(^\*\*\*\/\n)/mg) : (/(^--->\n)/mg);
		w.subWikifyTerm(w.output,termRegExp);
	}
},

{
	name: "macro",
	match: "<<",
	lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			invokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);
		}
	}
},

{
	name: "prettyLink",
	match: "\\[\\[",
	lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e;
			var text = lookaheadMatch[1];
			if(lookaheadMatch[3]) {
				// Pretty bracketted link
				var link = lookaheadMatch[3];
				e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?
						createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
			} else {
				// Simple bracketted link
				e = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);
			}
			createTiddlyText(e,text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "wikiLink",
	match: config.textPrimitives.unWikiLink+"?"+config.textPrimitives.wikiLink,
	handler: function(w)
	{
		if(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {
			w.outputText(w.output,w.matchStart+1,w.nextMatch);
			return;
		}
		if(w.matchStart > 0) {
			var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,"mg");
			preRegExp.lastIndex = w.matchStart-1;
			var preMatch = preRegExp.exec(w.source);
			if(preMatch.index == w.matchStart-1) {
				w.outputText(w.output,w.matchStart,w.nextMatch);
				return;
			}
		}
		if(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {
			var link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);
			w.outputText(link,w.matchStart,w.nextMatch);
		} else {
			w.outputText(w.output,w.matchStart,w.nextMatch);
		}
	}
},

{
	name: "urlLink",
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: "image",
	match: "\\[[<>]?[Ii][Mm][Gg]\\[",
	lookaheadRegExp: /\[([<]?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e = w.output;
			if(lookaheadMatch[5]) {
				var link = lookaheadMatch[5];
				e = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
				jQuery(e).addClass("imageLink");
			}
			var img = createTiddlyElement(e,"img");
			if(lookaheadMatch[1])
				img.align = "left";
			else if(lookaheadMatch[2])
				img.align = "right";
			if(lookaheadMatch[3]) {
				img.title = lookaheadMatch[3];
				img.setAttribute("alt",lookaheadMatch[3]);
			}
			img.src = lookaheadMatch[4];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "html",
	match: "<[Hh][Tt][Mm][Ll]>",
	lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span").innerHTML = lookaheadMatch[1];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "commentByBlock",
	match: "/%",
	lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: "characterFormat",
	match: "''|//|__|\\^\\^|~~|--(?!\\s|$)|\\{\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "''":
			w.subWikifyTerm(w.output.appendChild(document.createElement("strong")),/('')/mg);
			break;
		case "//":
			w.subWikifyTerm(createTiddlyElement(w.output,"em"),/(\/\/)/mg);
			break;
		case "__":
			w.subWikifyTerm(createTiddlyElement(w.output,"u"),/(__)/mg);
			break;
		case "^^":
			w.subWikifyTerm(createTiddlyElement(w.output,"sup"),/(\^\^)/mg);
			break;
		case "~~":
			w.subWikifyTerm(createTiddlyElement(w.output,"sub"),/(~~)/mg);
			break;
		case "--":
			w.subWikifyTerm(createTiddlyElement(w.output,"strike"),/(--)/mg);
			break;
		case "{{{":
			var lookaheadRegExp = /\{\{\{((?:.|\n)*?)\}\}\}/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
				w.nextMatch = lookaheadRegExp.lastIndex;
			}
			break;
		}
	}
},

{
	name: "customFormat",
	match: "@@|\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "@@":
			var e = createTiddlyElement(w.output,"span");
			var styles = config.formatterHelpers.inlineCssHelper(w);
			if(styles.length == 0)
				e.className = "marked";
			else
				config.formatterHelpers.applyCssHelper(e,styles);
			w.subWikifyTerm(e,/(@@)/mg);
			break;
		case "{{":
			var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch) {
				w.nextMatch = lookaheadRegExp.lastIndex;
				e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
				w.subWikifyTerm(e,/(\}\}\})/mg);
			}
			break;
		}
	}
},

{
	name: "mdash",
	match: "--",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = "&mdash;";
	}
},

{
	name: "lineBreak",
	match: "\\n|<br ?/?>",
	handler: function(w)
	{
		createTiddlyElement(w.output,"br");
	}
},

{
	name: "rawText",
	match: "\"{3}|<nowiki>",
	lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "htmlEntitiesEncoding",
	match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = w.matchText;
	}
}

];

//--
//-- Wikifier
//--

function getParser(tiddler,format)
{
	if(tiddler) {
		if(!format)
			format = tiddler.fields["wikiformat"];
		var i;
		if(format) {
			for(i in config.parsers) {
				if(format == config.parsers[i].format)
					return config.parsers[i];
			}
		} else {
			for(i in config.parsers) {
				if(tiddler.isTagged(config.parsers[i].formatTag))
					return config.parsers[i];
			}
		}
	}
	return formatter;
}

function Wikifier(source,formatter,highlightRegExp,tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp) {
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
	}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	this.subWikify(e);
	var text = jQuery(e).text();
	jQuery(e).remove();
	return text;
};

Wikifier.prototype.subWikify = function(output,terminator)
{
	try {
		if(terminator)
			this.subWikifyTerm(output,new RegExp("(" + terminator + ")","mg"));
		else
			this.subWikifyUnterm(output);
	} catch(ex) {
		showException(ex);
	}
};

Wikifier.prototype.subWikifyUnterm = function(output)
{
	var oldOutput = this.output;
	this.output = output;
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	while(formatterMatch) {
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)
{
	var oldOutput = this.output;
	this.output = output;
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch) {
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output,this.nextMatch,terminatorMatch.index);
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			this.output = oldOutput;
			return;
		}
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.outputText = function(place,startPos,endPos)
{
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {
		if(this.highlightMatch.index > startPos) {
			createTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));
			startPos = this.highlightMatch.index;
		}
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);
		createTiddlyElement(place,"span",null,"highlight",this.source.substring(startPos,highlightEnd));
		startPos = highlightEnd;
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
	}
	if(startPos < endPos) {
		createTiddlyText(place,this.source.substring(startPos,endPos));
	}
};

function wikify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		var t0 = new Date();
		wikifier.subWikify(output);
		if(tiddler && config.options.chkDisplayInstrumentation)
			displayMessage("wikify:" +tiddler.title+ " in " + (new Date()-t0) + " ms");
	}
}

function wikifyStatic(source,highlightRegExp,tiddler,format)
{
	var e = createTiddlyElement(document.body,"pre");
	e.style.display = "none";
	var html = "";
	if(source && source != "") {
		if(!tiddler)
			tiddler = new Tiddler("temp");
		var wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);
		wikifier.isStatic = true;
		wikifier.subWikify(e);
		html = e.innerHTML;
		jQuery(e).remove();
	}
	return html;
}

function wikifyPlainText(text,limit,tiddler)
{
	if(limit > 0)
		text = text.substr(0,limit);
	var wikifier = new Wikifier(text,formatter,null,tiddler);
	return wikifier.wikifyPlain();
}

function highlightify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);
		wikifier.outputText(output,0,source.length);
	}
}

//--
//-- Macro definitions
//--

function invokeMacro(place,macro,params,wikifier,tiddler)
{
	try {
		var m = config.macros[macro];
		if(m && m.handler) {
			var tiddlerElem = story.findContainingTiddler(place);
			window.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute("tiddler")) : null;
			window.place = place;
			var allowEval = true;
			if(config.evaluateMacroParameters=="system") {
				if(!tiddler || tiddler.tags.indexOf("systemAllowEval") == -1) {
					allowEval = false;
				}
			}
			m.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);
		} else {
			createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));
		}
	} catch(ex) {
		createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));
	}
}

config.macros.version.handler = function(place)
{
	jQuery("<span/>").text(formatVersion()).appendTo(place);
};

config.macros.today.handler = function(place,macroName,params)
{
	var now = new Date();
	var text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();
	jQuery("<span/>").text(text).appendTo(place);
};

config.macros.list.template = "<<view title link>>";
config.macros.list.handler = function(place,macroName,params,wikifier,paramString)
{
	var list = document.createElement("ul");
	jQuery(list).attr({ refresh: "macro", macroName: macroName }).data("params", paramString);
	place.appendChild(list);
	this.refresh(list);
};

config.macros.list.refresh = function(list) {
	var paramString = jQuery(list).data("params");
	var params = paramString.readMacroParams();
	var args = paramString.parseParams("anon", null, null)[0];
	var type = args.anon ? args.anon[0] : "all";
	jQuery(list).empty().addClass("list list-" + type);
	var template = args.template ? store.getTiddlerText(args.template[0]) : false;
	if(!template) {
		template = config.macros.list.template;
	}
	if(this[type].prompt)
		createTiddlyElement(list,"li",null,"listTitle",this[type].prompt);
	var results;
	if(this[type].handler)
		results = this[type].handler(params);
	var t;
	for(t = 0; t < results.length; t++) {
		var li = document.createElement("li");
		list.appendChild(li);
		var tiddler = results[t];
		if(typeof(tiddler) == 'string') { // deal with missing etc..
				tiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);
		}
		wikify(template, li, null, tiddler);
	}
	if(results.length === 0 && args.emptyMessage) {
		jQuery(list).addClass("emptyList");
		jQuery("<li />").text(args.emptyMessage[0]).appendTo(list);
	}
};

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags","excludeLists",false,"title");
};

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
};

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
};

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
};

config.macros.list.touched.handler = function(params)
{
	return store.getTouched();
};

config.macros.list.filter.handler = function(params)
{
	var filter = params[1];
	var results = [];
	if(filter) {
		var tiddlers = store.filterTiddlers(filter);
		var t;
		for(t=0; t<tiddlers.length; t++)
			results.push(tiddlers[t].title);
	}
	return results;
};

config.macros.allTags.handler = function(place,macroName,params)
{
	var tags = store.getTags(params[0]);
	var ul = createTiddlyElement(place,"ul");
	if(tags.length == 0)
		createTiddlyElement(ul,"li",null,"listTitle",this.noTags);
	var t;
	for(t=0; t<tags.length; t++) {
		var title = tags[t][0];
		var info = getTiddlyLinkInfo(title);
		var li = createTiddlyElement(ul,"li");
		var btn = createTiddlyButton(li,title + " (" + tags[t][1] + ")",this.tooltip.format([title]),onClickTag,info.classes);
		btn.setAttribute("tag",title);
		btn.setAttribute("refresh","link");
		btn.setAttribute("tiddlyLink",title);
		if(params[1]) {
			btn.setAttribute("sortby",params[1]);
		}
	}
};

var macro = config.macros.timeline;
merge(macro, {
	handler: function(place,macroName,params, wikifier, paramString, tiddler) {
		var container = jQuery("<div />").attr("params", paramString).
			attr("macroName", macroName).appendTo(place)[0];
		macro.refresh(container);
	},
	refresh: function(container) {
		jQuery(container).attr("refresh", "macro").empty();
		var paramString = jQuery(container).attr("params");
		var args = paramString.parseParams("anon", null, null)[0];
		var params = args.anon || [];

		var field = params[0] || "modified";
		var dateFormat = params[2] || this.dateFormat;
		var groupTemplate = macro.groupTemplate.format(field, dateFormat);
		groupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :
			groupTemplate;

		var itemTemplate = macro.itemTemplate;
		itemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :
			itemTemplate;

		var tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :
			store.reverseLookup("tags", "excludeLists", false, field);
		var lastGroup = "", ul;
		var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;
		var t;
		for(t=tiddlers.length-1; t>=last; t--) {
			var tiddler = tiddlers[t];
			var theGroup = wikifyPlainText(groupTemplate,0,tiddler);
			if(typeof(ul) == "undefined" || theGroup != lastGroup) {
				ul = document.createElement("ul");
				jQuery(ul).addClass("timeline");
				container.appendChild(ul);
				createTiddlyElement(ul,"li",null,"listTitle",theGroup);
				lastGroup = theGroup;
			}
			var item = createTiddlyElement(ul,"li",null,"listLink");
			wikify(itemTemplate,item,null,tiddler);
		}
	},
	groupTemplate: "<<view %0 date '%1'>>", 
	itemTemplate: "<<view title link>>"
});

config.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var allowEval = true;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.length > 0 && config.evaluateMacroParameters == "system") {
		// included tiddler and "system" evaluation required, so check tiddler tagged appropriately
		var title = stack[stack.length-1];
		var pos = title.indexOf(config.textPrimitives.sectionSeparator);
		if(pos != -1) {
			title = title.substr(0,pos); // get the base tiddler title
		}
		var t = store.getTiddler(title);
		if(!t || t.tags.indexOf("systemAllowEval") == -1) {
			allowEval = false;
		}
	}
	params = paramString.parseParams("name",null,allowEval,false,true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] || null;
	var args = params[0]["with"];
	var wrapper = createTiddlyElement(place,"span",null,className,null,{
		refresh: "content", tiddler: tiddlerName
	});
	if(args!==undefined)
		wrapper.setAttribute("args","[["+args.join("]] [[")+"]]");
	this.transclude(wrapper,tiddlerName,args);
};

config.macros.tiddler.transclude = function(wrapper,tiddlerName,args)
{
	var text = store.getTiddlerText(tiddlerName);
	if(!text)
		return;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.indexOf(tiddlerName) !== -1)
		return;
	stack.push(tiddlerName);
	try {
		if(typeof args == "string")
			args = args.readBracketedList();
		var n = args ? Math.min(args.length,9) : 0;
		var i;
		for(i=0; i<n; i++) {
			var placeholderRE = new RegExp("\\$" + (i + 1),"mg");
			text = text.replace(placeholderRE,args[i]);
		}
		config.macros.tiddler.renderText(wrapper,text,tiddlerName);
	} finally {
		stack.pop();
	}
};

config.macros.tiddler.renderText = function(place,text,tiddlerName)
{
	wikify(text,place,null,store.getTiddler(tiddlerName));
};

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place,macroName,params)
{
	var btn = createTagButton(place,params[0],null,params[1],params[2]);
	if(params[3]) {
		btn.setAttribute('sortby',params[3]);
	}
};

config.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params,"sep"," ");
	var lingo = config.views.wikified.tag;
	var label = null;
	var t;
	for(t=0; t<tiddler.tags.length; t++) {
		var tag = store.getTiddler(tiddler.tags[t]);
		if(!tag || !tag.tags.contains("excludeLists")) {
			if(!label)
				label = createTiddlyElement(ul,"li",null,"listTitle",lingo.labelTags.format([tiddler.title]));
			createTagButton(createTiddlyElement(ul,"li"),tiddler.tags[t],tiddler.title);
			if(t<tiddler.tags.length-1)
				createTiddlyText(ul,sep);
		}
	}
	if(!label)
		createTiddlyElement(ul,"li",null,"listTitle",lingo.labelNoTags.format([tiddler.title]));
};

config.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params,"sep"," ");
	ul.setAttribute("title",this.tooltip.format([title]));
	var sortby = getParam(params,"sortBy",false);
	var tagged = store.getTaggedTiddlers(title,sortby);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;
	createTiddlyElement(ul,"li",null,"listTitle",prompt.format([title,tagged.length]));
	var t;
	for(t=0; t<tagged.length; t++) {
		createTiddlyLink(createTiddlyElement(ul,"li"),tagged[t].title,true);
		if(t<tagged.length-1)
			createTiddlyText(ul,sep);
	}
};

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
};

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
};

config.macros.saveChanges.handler = function(place,macroName,params)
{
	if(!readOnly)
		createTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);
};

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
};

config.macros.slider.onClickSlider = function(ev)
{
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(config.options.chkAnimate && anim && typeof Slider == "function")
		anim.startAnimating(new Slider(n,!isOpen,null,"none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOption(cookie);
	return false;
};

config.macros.slider.createSlider = function(place,cookie,title,tooltip)
{
	var c = cookie || "";
	createTiddlyButton(place,title,tooltip,this.onClickSlider);
	var panel = createTiddlyElement(null,"div",null,"sliderPanel");
	panel.setAttribute("cookie",c);
	panel.style.display = config.options[c] ? "block" : "none";
	place.appendChild(panel);
	return panel;
};

config.macros.slider.handler = function(place,macroName,params)
{
	var panel = this.createSlider(place,params[0],params[2],params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh","content");
	panel.setAttribute("tiddler",params[1]);
	if(text)
		wikify(text,panel,null,store.getTiddler(params[1]));
};

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var panel = wikifier ? createTiddlyElement(place,"div",null,"gradient") : place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	if(wikifier) {
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel,styles);
	}
	params = paramString.parseParams("color");
	var locolors = [], hicolors = [];
	var t;
	for(t=2; t<params.length; t++) {
		var c = params[t].value;
		if(params[t].name == "snap") {
			hicolors[hicolors.length-1] = c;
		} else {
			locolors.push(c);
			hicolors.push(c);
		}
	}
	drawGradient(panel,params[1].value != "vert",locolors,hicolors);
	if(wikifier)
		wikifier.subWikify(panel,">>");
	if(document.all) {
		panel.style.height = "100%";
		panel.style.width = "100%";
	}
};

config.macros.message.handler = function(place,macroName,params)
{
	if(params[0]) {
		var names = params[0].split(".");
		var lookupMessage = function(root,nameIndex) {
				if(root[names[nameIndex]]) {
					if(nameIndex < names.length-1)
						return (lookupMessage(root[names[nameIndex]],nameIndex+1));
					else
						return root[names[nameIndex]];
				} else
					return null;
			};
		var m = lookupMessage(config,0);
		if(m == null)
			m = lookupMessage(window,0);
		createTiddlyText(place,m.toString().format(params.splice(1)));
	}
};


config.macros.view.depth = 0;
config.macros.view.values = [];
config.macros.view.views = {
	text: function(value,place,params,wikifier,paramString,tiddler) {
		highlightify(value,place,highlightHack,tiddler);
	},
	link: function(value,place,params,wikifier,paramString,tiddler) {
		createTiddlyLink(place,value,true);
	},
	wikified: function(value,place,params,wikifier,paramString,tiddler) {
		if(config.macros.view.depth>50)
			return;
		if(config.macros.view.depth>0) {
			if (value==config.macros.view.values[config.macros.view.depth-1]) {
				return;
			}
		}
		config.macros.view.values[config.macros.view.depth] = value;
		config.macros.view.depth++;
		if(params[2])
			value=params[2].unescapeLineBreaks().format([value]);
		wikify(value,place,highlightHack,tiddler);
		config.macros.view.depth--;
		config.macros.view.values[config.macros.view.depth] = null;
	},
	date: function(value,place,params,wikifier,paramString,tiddler) {
		value = Date.convertFromYYYYMMDDHHMM(value);
		createTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));
	}
};

config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if((tiddler instanceof Tiddler) && params[0]) {
		var value = store.getValue(tiddler,params[0]);
		if(value) {
			var type = params[1] || config.macros.view.defaultView;
			var handler = config.macros.view.views[type];
			if(handler)
				handler(value,place,params,wikifier,paramString,tiddler);
		}
	}
};

config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var field = params[0];
	var rows = params[1] || 0;
	var defVal = params[2] || '';
	if((tiddler instanceof Tiddler) && field) {
		story.setDirty(tiddler.title,true);
		var e,v;
		if(field != "text" && !rows) {
			e = createTiddlyElement(null,"input",null,null,null,{
				type: "text", edit: field, size: "40", autocomplete: "off"
			});
			e.value = store.getValue(tiddler,field) || defVal;
			place.appendChild(e);
		} else {
			var wrapper1 = createTiddlyElement(null,"fieldset",null,"fieldsetFix");
			var wrapper2 = createTiddlyElement(wrapper1,"div");
			e = createTiddlyElement(wrapper2,"textarea");
			e.value = v = store.getValue(tiddler,field) || defVal;
			rows = rows || 10;
			var lines = v.match(/\n/mg);
			var maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);
			if(lines != null && lines.length > rows)
				rows = lines.length + 5;
			rows = Math.min(rows,maxLines);
			e.setAttribute("rows",rows);
			e.setAttribute("edit",field);
			place.appendChild(wrapper1);
		}
		if(tiddler.isReadOnly()) {
			e.setAttribute("readOnly","readOnly");
			jQuery(e).addClass("readOnly");
		}
		return e;
	}
};

config.macros.tagChooser.onClick = function(ev)
{
	var e = ev || window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags(this.getAttribute("tags"));
	if(tags.length == 0)
		jQuery("<li/>").text(lingo.popupNone).appendTo(popup);
	var t;
	for(t=0; t<tags.length; t++) {
		var tag = createTiddlyButton(createTiddlyElement(popup,"li"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);
		tag.setAttribute("tag",tags[t][0]);
		tag.setAttribute("tiddler",this.getAttribute("tiddler"));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
};

config.macros.tagChooser.onTagClick = function(ev)
{
	var e = ev || window.event;
	if(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title,tag,0);
	return false;
};

config.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(tiddler instanceof Tiddler) {
		var lingo = config.views.editor.tagChooser;
		var btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);
		btn.setAttribute("tiddler",tiddler.title);
		btn.setAttribute("tags",params[0]);
	}
};

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
};

config.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var title = tiddler ? tiddler.title : null;
	var a = title ? config.annotations[title] : null;
	if(!tiddler || !title || !a)
		return;
	var text = a.format([title]);
	wikify(text,createTiddlyElement(place,"div",null,"annotation"),null,tiddler);
};
//--
//-- NewTiddler and NewJournal macros
//--

config.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)
{
	var tags = [];
	var t;
	for(t=1; t<params.length; t++) {
		if((params[t].name == "anon" && t != 1) || (params[t].name == "tag"))
			tags.push(params[t].value);
	}
	label = getParam(params,"label",label);
	prompt = getParam(params,"prompt",prompt);
	accessKey = getParam(params,"accessKey",accessKey);
	newFocus = getParam(params,"focus",newFocus);
	var customFields = getParam(params,"fields","");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	var btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);
	btn.setAttribute("newTitle",title);
	btn.setAttribute("isJournal",isJournal ? "true" : "false");
	if(tags.length > 0)
		btn.setAttribute("params",tags.join("|"));
	btn.setAttribute("newFocus",newFocus);
	btn.setAttribute("newTemplate",getParam(params,"template",DEFAULT_EDIT_TEMPLATE));
	if(customFields !== "")
		btn.setAttribute("customFields",customFields);
	var text = getParam(params,"text");
	if(text !== undefined)
		btn.setAttribute("newText",text);
	return btn;
};

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal") == "true") {
		title = new Date().formatString(title.trim());
	}
	var params = this.getAttribute("params");
	var tags = params ? params.split("|") : [];
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	var customFields = this.getAttribute("customFields");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	story.displayTiddler(null,title,template,false,null,null);
	var tiddlerElem = story.getTiddler(title);
	if(customFields)
		story.addCustomFields(tiddlerElem,customFields);
	var text = this.getAttribute("newText");
	if(typeof text == "string" && story.getTiddlerField(title,"text"))
		story.getTiddlerField(title,"text").value = text.format([title]);
	var t;
	for(t=0;t<tags.length;t++)
		story.setTiddlerTag(title,tags[t],+1);
	story.focusTiddler(title,focus);
	return false;
};

config.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
		title = getParam(params,"title",title);
		this.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"title",false);
	}
};

config.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : config.macros.timeline.dateFormat;
		title = getParam(params,"title",title);
		config.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"text",true);
	}
};

//--
//-- Search macro
//--

config.macros.search.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,false,false,false);
	createTiddlyButton(place,this.label,this.prompt,this.onClick,"searchButton");
	var txt = createTiddlyElement(null,"input",null,"txtOptionInput searchField");
	txt.value = getParam(params,"anon","");
	if(config.browser.isSafari) {
		txt.setAttribute("type","search");
		txt.setAttribute("results","5");
	} else {
		txt.setAttribute("type","text");
	}
	place.appendChild(txt);
	txt.onkeyup = this.onKeyPress;
	txt.onfocus = this.onFocus;
	txt.setAttribute("size",this.sizeTextbox);
	txt.setAttribute("accessKey",getParam(params,"accesskey",this.accessKey));
	txt.setAttribute("autocomplete","off");
	txt.setAttribute("lastSearchText","");
	txt.setAttribute("placeholder",getParam(params,"placeholder",this.placeholder));
};

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(txt)
{
	if(txt.value.length > 0) {
		story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);
		txt.setAttribute("lastSearchText",txt.value);
	}
};

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
};

config.macros.search.onKeyPress = function(ev)
{
	var me = config.macros.search;
	var e = ev || window.event;
	switch(e.keyCode) {
		case 9: // Tab
			return;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			me.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
	}
	if(config.options.chkIncrementalSearch) {
		if(this.value.length > 2) {
			if(this.value != this.getAttribute("lastSearchText")) {
				if(me.timeout) {
					clearTimeout(me.timeout);
				}
				var txt = this;
				me.timeout = setTimeout(function() {me.doSearch(txt);},500);
			}
		} else {
			if(me.timeout) {
				clearTimeout(me.timeout);
			}
		}
	}
};

config.macros.search.onFocus = function(e)
{
	this.select();
};

//--
//-- Tabs macro
//--

config.macros.tabs.handler = function(place,macroName,params)
{
	var cookie = params[0];
	var numTabs = (params.length-1)/3;
	var wrapper = createTiddlyElement(null,"div",null,"tabsetWrapper " + cookie);
	var tabset = createTiddlyElement(wrapper,"div",null,"tabset");
	tabset.setAttribute("cookie",cookie);
	var validTab = false;
	var t;
	for(t=0; t<numTabs; t++) {
		var label = params[t*3+1];
		var prompt = params[t*3+2];
		var content = params[t*3+3];
		var tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,"tab tabUnselected");
		createTiddlyElement(tab,"span",null,null," ",{style:"font-size:0pt;line-height:0px"});
		tab.setAttribute("tab",label);
		tab.setAttribute("content",content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
	}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset,config.options[cookie]);
};

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode,this.getAttribute("tab"));
	return false;
};

config.macros.tabs.switchTab = function(tabset,tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null;
	var nodes = tabset.childNodes;
	var t;
	for(t=0; t<nodes.length; t++) {
		if(nodes[t].getAttribute && nodes[t].getAttribute("tab") == tab) {
			theTab = nodes[t];
			theTab.className = "tab tabSelected";
		} else {
			nodes[t].className = "tab tabUnselected";
		}
	}
	if(theTab) {
		if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
			jQuery(tabset.nextSibling).remove();
		var tabContent = createTiddlyElement(null,"div",null,"tabContents");
		tabset.parentNode.insertBefore(tabContent,tabset.nextSibling);
		var contentTitle = theTab.getAttribute("content");
		wikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));
		if(cookie) {
			config.options[cookie] = tab;
			saveOption(cookie);
		}
	}
};

//--
//-- Tiddler toolbar
//--

// Create a toolbar command button
config.macros.toolbar.createCommand = function(place,commandName,tiddler,className)
{
	if(typeof commandName != "string") {
		var c = null;
		var t;
		for(t in config.commands) {
			if(config.commands[t] == commandName)
				c = t;
		}
		commandName = c;
	}
	if((tiddler instanceof Tiddler) && (typeof commandName == "string")) {
		var command = config.commands[commandName];
		if(command.isEnabled ? command.isEnabled(tiddler) : this.isCommandEnabled(command,tiddler)) {
			var text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);
			var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);
			var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
			var btn = createTiddlyButton(null,text,tooltip,cmd);
			btn.setAttribute("commandName",commandName);
			btn.setAttribute("tiddler",tiddler.title);
			jQuery(btn).addClass("command_" + commandName);
			if(className)
				jQuery(btn).addClass(className);
			place.appendChild(btn);
		}
	}
};

config.macros.toolbar.isCommandEnabled = function(command,tiddler)
{
	var title = tiddler.title;
	var ro = tiddler.isReadOnly();
	var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
	return (!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow);
};

config.macros.toolbar.getCommandText = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyText) || command.text;
};

config.macros.toolbar.getCommandTooltip = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;
};

config.macros.toolbar.onClickCommand = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e,this,this.getAttribute("tiddler"));
};

config.macros.toolbar.onClickPopup = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var popup = Popup.create(this);
	var command = config.commands[this.getAttribute("commandName")];
	var title = this.getAttribute("tiddler");
	popup.setAttribute("tiddler",title);
	command.handlePopup(popup,title);
	Popup.show();
	return false;
};

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place,className,event)
{
	var children = place.getElementsByTagName("a");
	var t;
	for(t=0; t<children.length; t++) {
		var c = children[t];
		if(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute("commandName")) {
			if(c.onclick instanceof Function)
				c.onclick.call(c,event);
			break;
		}
	}
};

config.macros.toolbar.onClickMore = function(ev)
{
	var e = this.nextSibling;
	e.style.display = "inline";
	this.style.display = "none";
	return false;
};

config.macros.toolbar.onClickLess = function(ev)
{
	var e = this.parentNode;
	var m = e.previousSibling;
	e.style.display = "none";
	m.style.display = "inline";
	return false;
};

config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var t;
	for(t=0; t<params.length; t++) {
		var btn;
		var c = params[t];
		switch(c) {
		case "!":
			createTiddlyText(place,this.separator);
			break;
		case "*":
			createTiddlyElement(place,"br");
			break;
		case "<":
			btn = createTiddlyButton(place,this.lessLabel,this.lessPrompt,config.macros.toolbar.onClickLess);
			jQuery(btn).addClass("lessCommand");
			break;
		case ">":
			btn = createTiddlyButton(place,this.moreLabel,this.morePrompt,config.macros.toolbar.onClickMore);
			jQuery(btn).addClass("moreCommand");
			var e = createTiddlyElement(place,"span",null,"moreCommand");
			e.style.display = "none";
			place = e;
			break;
		default:
			var className = "";
			switch(c.substr(0,1)) {
			case "+":
				className = "defaultCommand";
				c = c.substr(1);
				break;
			case "-":
				className = "cancelCommand";
				c = c.substr(1);
				break;
			}
			if(config.commands[c]) {
				this.createCommand(place,c,tiddler,className);
			} else {
				this.customCommand(place,c,wikifier,tiddler);
			}
			break;
		}
	}
};

// Overrideable function to extend toolbar handler
config.macros.toolbar.customCommand = function(place,command,wikifier,tiddler)
{
};

//--
//-- Menu and toolbar commands
//--

config.commands.closeTiddler.handler = function(event,src,title)
{
	if(story.isDirty(title) && !readOnly) {
		if(!confirm(config.commands.cancelTiddler.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.closeTiddler(title,true);
	return false;
};

config.commands.closeOthers.handler = function(event,src,title)
{
	story.closeAllTiddlers(title);
	return false;
};

config.commands.editTiddler.handler = function(event,src,title)
{
	clearMessage();
	var tiddlerElem = story.getTiddler(title);
	var fields = tiddlerElem.getAttribute("tiddlyFields");
	story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,fields);
	var e = story.getTiddlerField(title,config.options.txtEditorFocus||"text");
	if(e) {
		setCaretPosition(e,0);
	}
	return false;
};

config.commands.saveTiddler.handler = function(event,src,title)
{
	var newTitle = story.saveTiddler(title,event.shiftKey);
	if(newTitle)
		story.displayTiddler(null,newTitle);
	return false;
};

config.commands.cancelTiddler.handler = function(event,src,title)
{
	if(story.hasChanges(title) && !readOnly) {
		if(!confirm(this.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.displayTiddler(null,title);
	return false;
};

config.commands.deleteTiddler.handler = function(event,src,title)
{
	var deleteIt = true;
	if(config.options.chkConfirmDelete)
		deleteIt = confirm(this.warning.format([title]));
	if(deleteIt) {
		store.removeTiddler(title);
		story.closeTiddler(title,true);
		autoSaveChanges();
	}
	return false;
};

config.commands.permalink.handler = function(event,src,title)
{
	var t = encodeURIComponent(String.encodeTiddlyLink(title));
	if(window.location.hash != t)
		window.location.hash = t;
	return false;
};

config.commands.references.handlePopup = function(popup,title)
{
	var references = store.getReferringTiddlers(title);
	var c = false;
	var r;
	for(r=0; r<references.length; r++) {
		if(references[r].title != title && !references[r].isTagged("excludeLists")) {
			createTiddlyLink(createTiddlyElement(popup,"li"),references[r].title,true);
			c = true;
		}
	}
	if(!c)
		createTiddlyElement(popup,"li",null,"disabled",this.popupNone);
};

config.commands.jump.handlePopup = function(popup,title)
{
	story.forEachTiddler(function(title,element) {
		createTiddlyLink(createTiddlyElement(popup,"li"),title,true,null,false,null,true);
		});
};

config.commands.syncing.handlePopup = function(popup,title)
{
	var me = config.commands.syncing;
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var serverType = tiddler.getServerType();
	var serverHost = tiddler.fields["server.host"];
	var serverWorkspace = tiddler.fields["server.workspace"];
	if(!serverWorkspace)
		serverWorkspace = "";
	if(serverType) {
		var e = createTiddlyElement(popup,"li",null,"popupMessage");
		e.innerHTML = me.currentlySyncing.format([serverType,serverHost,serverWorkspace]);
	} else {
		createTiddlyElement(popup,"li",null,"popupMessage",me.notCurrentlySyncing);
	}
	if(serverType) {
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var btn = createTiddlyButton(createTiddlyElement(popup,"li"),this.captionUnSync,null,me.onChooseServer);
		btn.setAttribute("tiddler",title);
		btn.setAttribute("server.type","");
	}
	createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
	createTiddlyElement(popup,"li",null,"popupMessage",me.chooseServer);
	var feeds = store.getTaggedTiddlers("systemServer","title");
	var t;
	for(t=0; t<feeds.length; t++) {
		var f = feeds[t];
		var feedServerType = store.getTiddlerSlice(f.title,"Type");
		if(!feedServerType)
			feedServerType = "file";
		var feedServerHost = store.getTiddlerSlice(f.title,"URL");
		if(!feedServerHost)
			feedServerHost = "";
		var feedServerWorkspace = store.getTiddlerSlice(f.title,"Workspace");
		if(!feedServerWorkspace)
			feedServerWorkspace = "";
		var caption = f.title;
		if(serverType == feedServerType && serverHost == feedServerHost && serverWorkspace == feedServerWorkspace) {
			caption = me.currServerMarker + caption;
		} else {
			caption = me.notCurrServerMarker + caption;
		}
		btn = createTiddlyButton(createTiddlyElement(popup,"li"),caption,null,me.onChooseServer);
		btn.setAttribute("tiddler",title);
		btn.setAttribute("server.type",feedServerType);
		btn.setAttribute("server.host",feedServerHost);
		btn.setAttribute("server.workspace",feedServerWorkspace);
	}
};

config.commands.syncing.onChooseServer = function(e)
{
	var tiddler = this.getAttribute("tiddler");
	var serverType = this.getAttribute("server.type");
	if(serverType) {
		store.addTiddlerFields(tiddler,{
			"server.type": serverType,
			"server.host": this.getAttribute("server.host"),
			"server.workspace": this.getAttribute("server.workspace")
			});
	} else {
		store.setValue(tiddler,"server",null);
	}
	return false;
};

config.commands.fields.handlePopup = function(popup,title)
{
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var items = [];
	store.forEachField(tiddler,function(tiddler,fieldName,value){items.push({field:fieldName,value:value});},true);
	items.sort(function(a,b) {return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1);});
	if(items.length > 0)
		ListView.create(popup,items,this.listViewTemplate);
	else
		createTiddlyElement(popup,"div",null,null,this.emptyText);
};

//--
//-- Tiddler() object
//--

function Tiddler(title)
{
	this.title = title;
	this.text = "";
	this.creator = null;
	this.modifier = null;
	this.created = new Date();
	this.modified = this.created;
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	this.fields = {};
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated==false)
		this.changed();
	return this.links;
};

// Returns the fields that are inherited in string field:"value" field2:"value2" format
Tiddler.prototype.getInheritedFields = function()
{
	var f = {};
	var i;
	for(i in this.fields) {
		if(i=="server.host" || i=="server.workspace" || i=="wikiformat"|| i=="server.type") {
			f[i] = this.fields[i];
		}
	}
	return String.encodeHashMap(f);
};

// Increment the changeCount of a tiddler
Tiddler.prototype.incChangeCount = function()
{
	var c = this.fields['changecount'];
	c = c ? parseInt(c,10) : 0;
	this.fields['changecount'] = String(c+1);
};

// Clear the changeCount of a tiddler
Tiddler.prototype.clearChangeCount = function()
{
	if(this.fields['changecount']) {
		delete this.fields['changecount'];
	}
};

Tiddler.prototype.doNotSave = function()
{
	return this.fields['doNotSave'];
};

// Returns true if the tiddler has been updated since the tiddler was created or downloaded
Tiddler.prototype.isTouched = function()
{
	var changecount = this.fields.changecount || 0;
	return changecount > 0;
};

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)
{
	this.assign(title,text,modifier,modified,tags,created,fields,creator);
	this.changed();
	return this;
};

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)
{
	if(title != undefined)
		this.title = title;
	if(text != undefined)
		this.text = text;
	if(modifier != undefined)
		this.modifier = modifier;
	if(modified != undefined)
		this.modified = modified;
	if(creator != undefined)
		this.creator = creator;
	if(created != undefined)
		this.created = created;
	if(fields != undefined)
		this.fields = fields;
	if(tags != undefined)
		this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined)
		this.tags = [];
	return this;
};

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
};

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
};

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
};

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
};

// Updates the secondary information (like links[] array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var text = this.text;
	// remove 'quoted' text before scanning tiddler source
	text = text.replace(/\/%((?:.|\n)*?)%\//g,"").
		replace(/\{{3}((?:.|\n)*?)\}{3}/g,"").
		replace(/"""((?:.|\n)*?)"""/g,"").
		replace(/<nowiki\>((?:.|\n)*?)<\/nowiki\>/g,"").
		replace(/<html\>((?:.|\n)*?)<\/html\>/g,"").
		replace(/<script((?:.|\n)*?)<\/script\>/g,"");
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(text);
	while(formatMatch) {
		var lastIndex = tiddlerLinkRegExp.lastIndex;
		if(t==0 && formatMatch[1] && formatMatch[1] != this.title) {
			// wikiWordLink
			if(formatMatch.index > 0) {
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink+"|"+config.textPrimitives.anyLetter,"mg");
				preRegExp.lastIndex = formatMatch.index-1;
				var preMatch = preRegExp.exec(text);
				if(preMatch.index != formatMatch.index-1)
					this.links.pushUnique(formatMatch[1]);
			} else {
				this.links.pushUnique(formatMatch[1]);
			}
		}
		else if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink
			this.links.pushUnique(formatMatch[3-t]);
		else if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4-t]);
		tiddlerLinkRegExp.lastIndex = lastIndex;
		formatMatch = tiddlerLinkRegExp.exec(text);
	}
	this.linksUpdated = true;
};

Tiddler.prototype.getSubtitle = function()
{
	var modifier = this.modifier;
	if(!modifier)
		modifier = config.messages.subtitleUnknown || "";
	var modified = this.modified;
	if(modified)
		modified = modified.toLocaleString();
	else
		modified = config.messages.subtitleUnknown || "";
	var f = config.messages.tiddlerLinkTooltip || "%0 - %1, %2";
	return f.format([this.title,modifier,modified]);
};

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
};

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
};

Tiddler.prototype.getServerType = function()
{
	var serverType = null;
	if(this.fields['server.type'])
		serverType = this.fields['server.type'];
	if(!serverType)
		serverType = this.fields['wikiformat'];
	if(serverType && !config.adaptors[serverType])
		serverType = null;
	return serverType;
};

Tiddler.prototype.getAdaptor = function()
{
	var serverType = this.getServerType();
	return serverType ? new config.adaptors[serverType]() : null;
};

//--
//-- TiddlyWiki instance contains TiddlerS
//--

function TiddlyWiki(params)
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	if(params && params.config) {
		this.config = config;
	}
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
	};
	this.fetchTiddler = function(title) {
		var t = tiddlers[title];
		return t instanceof Tiddler ? t : null;
	};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
	};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
	};
	this.forEachTiddler = function(callback) {
		var t;
		for(t in tiddlers) {
			var tiddler = tiddlers[t];
			if(tiddler instanceof Tiddler)
				callback.call(this,t,tiddler);
		}
	};
}

TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
};

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
};

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	var t = this.fetchTiddler(title);
	return t != undefined;
};

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return config.shadowTiddlers[title] === undefined ? false : true;
};

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler(title);
		this.addTiddler(tiddler);
		this.setDirty(true);
	}
	return tiddler;
};

TiddlyWiki.prototype.getTiddler = function(title)
{
	var t = this.fetchTiddler(title);
	if(t != undefined)
		return t;
	else
		return null;
};

TiddlyWiki.prototype.getShadowTiddlerText = function(title)
{
	if(typeof config.shadowTiddlers[title] == "string")
		return config.shadowTiddlers[title];
	else
		return "";
};

// Retrieve tiddler contents
TiddlyWiki.prototype.getTiddlerText = function(title,defaultText)
{
	if(!title)
		return defaultText;
	var pos = title.indexOf(config.textPrimitives.sectionSeparator);
	var section = null;
	if(pos != -1) {
		section = title.substr(pos + config.textPrimitives.sectionSeparator.length);
		title = title.substr(0,pos);
	}
	pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1) {
		var slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));
		if(slice)
			return slice;
	}
	var tiddler = this.fetchTiddler(title);
	var text = tiddler ? tiddler.text : null;
	if(!tiddler && this.isShadowTiddler(title)) {
		text = this.getShadowTiddlerText(title);
	}
	if(text) {
		if(!section)
			return text;
		var re = new RegExp("(^!{1,6}[ \t]*" + section.escapeRegExp() + "[ \t]*\n)","mg");
		re.lastIndex = 0;
		var match = re.exec(text);
		if(match) {
			var t = text.substr(match.index+match[1].length);
			var re2 = /^!/mg;
			re2.lastIndex = 0;
			match = re2.exec(t); //# search for the next heading
			if(match)
				t = t.substr(0,match.index-1);//# don't include final \n
			return t;
		}
		return defaultText;
	}
	if(defaultText != undefined)
		return defaultText;
	return null;
};

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)
{
	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])","mg");
	var text = this.getTiddlerText(title,null);
	if(text == null)
		return defaultText;
	var textOut = [];
	var match,lastPos = 0;
	do {
		match = bracketRegExp.exec(text);
		if(match) {
			textOut.push(text.substr(lastPos,match.index-lastPos));
			if(match[1]) {
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1],"",depth-1));
			}
			lastPos = match.index + match[0].length;
		} else {
			textOut.push(text.substr(lastPos));
		}
	} while(match);
	return textOut.join("");
};

//TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\n]+)[\t\x20]*\|$)/gm;
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]*)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\|\n]*)[\t\x20]*\|$)/gm;
// @internal
TiddlyWiki.prototype.calcAllSlices = function(title)
{
	var slices = {};
	var text = this.getTiddlerText(title,"");
	this.slicesRE.lastIndex = 0;
	var m = this.slicesRE.exec(text);
	while(m) {
		if(m[2])
			slices[m[2]] = m[3];
		else
			slices[m[5]] = m[6];
		m = this.slicesRE.exec(text);
	}
	return slices;
};

// Returns the slice of text of the given name
TiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)
{
	var slices = this.slices[title];
	if(!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
};

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)
{
	var t,r = {};
	for(t=0; t<sliceNames.length; t++) {
		var slice = this.getTiddlerSlice(title,sliceNames[t]);
		if(slice)
			r[sliceNames[t]] = slice;
	}
	return r;
};

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
};

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
};

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title,doBlanket)
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if((n.name == null && doBlanket) || (n.name == title))
				n.notify(title);
		}
	}
};

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if(n.name)
				n.notify(n.name);
		}
	}
};

// Add a notification handler to a tiddler
TiddlyWiki.prototype.addNotification = function(title,fn)
{
	var i;
	for(i=0; i<this.namedNotifications.length; i++) {
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	}
	this.namedNotifications.push({name: title, notify: fn});
	return this;
};

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		this.deleteTiddler(title);
		this.notify(title,true);
		this.setDirty(true);
	}
};

// Reset the sync status of a freshly synced tiddler
TiddlyWiki.prototype.resetTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.clearChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		var t = tiddler.tags.indexOf(tag);
		if(t != -1)
			tiddler.tags.splice(t,1);
		if(status)
			tiddler.tags.push(tag);
		tiddler.changed();
		tiddler.incChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.addTiddlerFields = function(title,fields)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler)
		return;
	merge(tiddler.fields,fields);
	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title,true);
	this.setDirty(true);
};

// Store tiddler in TiddlyWiki instance
TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)
{
	var tiddler;
	if(title instanceof Tiddler) {
		tiddler = title;
		title = tiddler.title;
		newTitle = title;
	} else {
		tiddler = this.fetchTiddler(title);
		if(tiddler) {
			created = created || tiddler.created; // Preserve created date
			creator = creator || tiddler.creator;
			this.deleteTiddler(title);
		} else {
			created = created || modified;
			tiddler = new Tiddler();
		}
		fields = merge(merge({},fields),config.defaultCustomFields,true);
		tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);
	}
	this.addTiddler(tiddler);
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();
	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	if(window.location.protocol == "file:")
		this.setDirty(true);
	return tiddler;
};

TiddlyWiki.prototype.incChangeCount = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		tiddler.incChangeCount();
};

TiddlyWiki.prototype.getLoader = function()
{
	if(!this.loader)
		this.loader = new TW21Loader();
	return this.loader;
};

TiddlyWiki.prototype.getSaver = function()
{
	if(!this.saver)
		this.saver = new TW21Saver();
	return this.saver;
};

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return this.getSaver().externalize(store);
};

// Load contents of a TiddlyWiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)
{
	this.idPrefix = idPrefix;
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	if(!storeElem)
		return;
	var tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate) {
		var i;
		for(i = 0;i<tiddlers.length; i++)
			tiddlers[i].changed();
	}
	jQuery(document).trigger("loadTiddlers");
};

// Load contents of a TiddlyWiki from a string
// Returns null if there's an error
TiddlyWiki.prototype.importTiddlyWiki = function(text)
{
	var posDiv = locateStoreArea(text);
	if(!posDiv)
		return null;
	var content = "<" + "html><" + "body>" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + "<" + "/body><" + "/html>";
	// Create the iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	document.body.appendChild(iframe);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6
	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();
	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	this.loadFromDiv(storeArea,"store");
	// Get rid of the iframe
	iframe.parentNode.removeChild(iframe);
	return this;
};

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title,tiddler) {
		tiddler.changed();
	});
};

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)
{
	var candidates = this.reverseLookup("tags",excludeTag,!!match);
	var t,results = [];
	for(t=0; t<candidates.length; t++) {
		if((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))
			results.push(candidates[t]);
	}
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
};

// Returns a list of all tags in use
//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag
// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances
TiddlyWiki.prototype.getTags = function(excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
	    var g,c;
		for(g=0; g<tiddler.tags.length; g++) {
			var tag = tiddler.tags[g];
			var n = true;
			for(c=0; c<results.length; c++) {
				if(results[c][0] == tag) {
					n = false;
					results[c][1]++;
				}
			}
			if(n && excludeTag) {
				var t = this.fetchTiddler(tag);
				if(t && t.isTagged(excludeTag))
					n = false;
			}
			if(n)
				results.push([tag,1]);
		}
	});
	results.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});
	return results;
};

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)
{
	return this.reverseLookup("tags",tag,true,sortField);
};

TiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)
{
	return this.reverseLookup(field,value,true,sortField);
};

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links",title,true,sortField);
};

// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, "links" or "tags")
// lookupMatch == true to match tiddlers, false to exclude tiddlers
TiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		var f = !lookupMatch;
		var values;
		if(["links", "tags"].contains(lookupField)) {
			values = tiddler[lookupField];
		} else {
			var accessor = TiddlyWiki.standardFieldAccess[lookupField];
			if(accessor) {
				values = [ accessor.get(tiddler) ];
			} else {
				values = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];
			}
		}
		var lookup;
		for(lookup=0; lookup<values.length; lookup++) {
			if(values[lookup] == lookupValue)
				f = lookupMatch;
		}
		if(f)
			results.push(tiddler);
	});
	if(!sortField)
		sortField = "title";
	return this.sortTiddlers(results,sortField);
};

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field,excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
	});
	if(field)
		results.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});
	return results;
};

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function()
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(tiddler.isTagged("excludeMissing") || tiddler.isTagged("systemConfig"))
			return;
		var n;
		for(n=0; n<tiddler.links.length;n++) {
			var link = tiddler.links[n];
			if(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])
				results.pushUnique(link);
		}
	});
	results.sort();
	return results;
};

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
	});
	results.sort();
	return results;
};

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var t,results = [];
	for(t in config.shadowTiddlers) {
		if(this.isShadowTiddler(t))
			results.push(t);
	}
	results.sort();
	return results;
};

// Return an array of tiddlers that have been touched since they were downloaded or created
TiddlyWiki.prototype.getTouched = function()
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(tiddler.isTouched())
			results.push(tiddler);
		});
	results.sort();
	return results;
};

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler)
{
	var t = (typeof tiddler == "string") ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
};

// Sort a list of tiddlers
TiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)
{
	var asc = +1;
	switch(field.substr(0,1)) {
	case "-":
		asc = -1;
		field = field.substr(1);
		break;
	case "+":
		field = field.substr(1);
		break;
	}
	if(TiddlyWiki.standardFieldAccess[field]) {
		if(field=="title") {
			tiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});
		} else {
			tiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});
		}
	} else {
		tiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});
	}
	return tiddlers;
};

//--
//-- Filter a list of tiddlers
//--

config.filters = {
	tiddler: function(results,match) {
		var title = match[1]||match[4];
		var tiddler = this.fetchTiddler(title);
		if(tiddler) {
			results.pushUnique(tiddler);
		} else if(this.isShadowTiddler(title)) {
			tiddler = new Tiddler();
			tiddler.set(title,this.getTiddlerText(title));
			results.pushUnique(tiddler);
		} else {
			results.pushUnique(new Tiddler(title));
		}
		return results;
	},
	tag: function(results,match) {
		var m,matched = this.getTaggedTiddlers(match[3]);
		for(m=0; m<matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	},
	sort: function(results,match) {
		return this.sortTiddlers(results,match[3]);
	},
	limit: function(results,match) {
		return results.slice(0,parseInt(match[3],10));
	},
	field: function(results,match) {
		var m,matched = this.getValueTiddlers(match[2],match[3]);
		for (m = 0; m < matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	}
};

// Filter a list of tiddlers
TiddlyWiki.prototype.filterTiddlers = function(filter)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	var results = [];
	if(filter) {
		var match = re.exec(filter);
		while(match) {
			var handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';
			results = config.filters[handler].call(this,results,match);
			match = re.exec(filter);
		}
	}
	return results;
};
// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by "."
TiddlyWiki.isValidFieldName = function(name)
{
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
};

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name)
{
	if(!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
};

function StringFieldAccess(n,readOnly)
{
	this.set = readOnly ?
			function(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :
			function(t,v) {if(v != t[n]) {t[n] = v; return true;}};
	this.get = function(t) {return t[n];};
}

function DateFieldAccess(n)
{
	this.set = function(t,v) {
		var d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);
		if(d != t[n]) {
			t[n] = d; return true;
		}
	};
	this.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};
}

function LinksFieldAccess(n)
{
	this.set = function(t,v) {
		var s = (typeof v == "string") ? v.readBracketedList() : v;
		if(s.toString() != t[n].toString()) {
			t[n] = s; return true;
		}
	};
	this.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	"title":    new StringFieldAccess("title",true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title",true),
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"creator":  new StringFieldAccess("creator"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name)
{
	return TiddlyWiki.standardFieldAccess[name] != undefined;
};

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return;
	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		if(isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if(!h.set(t,value))
			return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^"+fieldName+"\\.");
				var dirty = false;
				var n;
				for(n in t.fields) {
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if(!dirty)
					return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date->String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value)
				return;
			t.fields[fieldName] = value;
		}
	}
	// When we are here the tiddler/store really was changed.
	this.notify(t.title,true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};

// Returns the value of the given field of the tiddler.
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddler,fieldName)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	if(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {
		var sliceType = fieldName.substr(0, 2);
		var sliceName = fieldName.substring(2);
		return store.getTiddlerText("%0%1%2".format(t.title,sliceType,sliceName));
	} else {
		fieldName = fieldName.toLowerCase();
		var accessor = TiddlyWiki.standardFieldAccess[fieldName];
		if(accessor) {
			return accessor.get(t);
		}
	}
	return t.fields[fieldName];
};

// Calls the callback function for every field in the tiddler.
// When callback function returns a non-false value the iteration stops
// and that value is returned.
// The order of the fields is not defined.
// @param callback a function(tiddler,fieldName,value).
TiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	var n,result;
	for(n in t.fields) {
		result = callback(t,n,t.fields[n]);
		if(result)
			return result;
		}
	if(onlyExtendedFields)
		return undefined;
	for(n in TiddlyWiki.standardFieldAccess) {
		if(n != "tiddler") {
			// even though the "title" field can also be referenced through the name "tiddler"
			// we only visit this field once.
			result = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));
			if(result)
				return result;
		}
	}
	return undefined;
};

//--
//-- Story functions
//--

function Story(containerId,idPrefix)
{
	this.container = containerId;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
	this.tiddlerId = function(title) {
		title = title.replace(/_/g, "__").replace(/ /g, "_");
		var id = this.idPrefix + title;
		return id==this.container ? this.idPrefix + "_" + title : id;
	};
	this.containerId = function() {
		return this.container;
	};
}

Story.prototype.getTiddler = function(title)
{
	return document.getElementById(this.tiddlerId(title));
};

Story.prototype.getContainer = function()
{
	return document.getElementById(this.containerId());
};

Story.prototype.forEachTiddler = function(fn)
{
	var place = this.getContainer();
	if(!place)
		return;
	var e = place.firstChild;
	while(e) {
		var n = e.nextSibling;
		var title = e.getAttribute("tiddler");
		fn.call(this,title,e);
		e = n;
	}
};

Story.prototype.displayDefaultTiddlers = function()
{
	this.displayTiddlers(null,store.filterTiddlers(store.getTiddlerText("DefaultTiddlers")));
};

Story.prototype.displayTiddlers = function(srcElement,titles,template,animate,unused,customFields,toggle)
{
	var t;
	for(t = titles.length-1;t>=0;t--)
		this.displayTiddler(srcElement,titles[t],template,animate,unused,customFields);
};

Story.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(toggle) {
			if(tiddlerElem.getAttribute("dirty") != "true")
				this.closeTiddler(title,true);
		} else {
			this.refreshTiddler(title,template,false,customFields);
		}
	} else {
		var place = this.getContainer();
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place,before,title,template,customFields);
	}
	if(animationSrc && typeof animationSrc !== "string") {
		srcElement = animationSrc;
	}
	if(srcElement && typeof srcElement !== "string") {
		if(config.options.chkAnimate && (animate == undefined || animate == true) && anim && typeof Zoomer == "function" && typeof Scroller == "function")
			anim.startAnimating(new Zoomer(title,srcElement,tiddlerElem),new Scroller(tiddlerElem));
		else
			window.scrollTo(0,ensureVisible(tiddlerElem));
	}
	return tiddlerElem;
};

Story.prototype.positionTiddler = function(srcElement)
{
	var place = this.getContainer();
	var before = null;
	if(typeof srcElement == "string") {
		switch(srcElement) {
		case "top":
			before = place.firstChild;
			break;
		case "bottom":
			before = null;
			break;
		}
	} else {
		var after = this.findContainingTiddler(srcElement);
		if(after == null) {
			before = place.firstChild;
		} else if(after.nextSibling) {
			before = after.nextSibling;
			if(before.nodeType != 1)
				before = null;
		}
	}
	return before;
};

Story.prototype.createTiddler = function(place,before,title,template,customFields)
{
	var tiddlerElem = createTiddlyElement(null,"div",this.tiddlerId(title),"tiddler");
	tiddlerElem.setAttribute("refresh","tiddler");
	if(customFields)
		tiddlerElem.setAttribute("tiddlyFields",customFields);
	place.insertBefore(tiddlerElem,before);
	var defaultText = null;
	if(!store.tiddlerExists(title) && !store.isShadowTiddler(title))
		defaultText = this.loadMissingTiddler(title,customFields);
	this.refreshTiddler(title,template,false,customFields,defaultText);
	return tiddlerElem;
};

Story.prototype.loadMissingTiddler = function(title,fields,callback)
{
	var getTiddlerCallback = function(context)
	{
		if(context.status) {
			var t = context.tiddler;
			if(!t.created)
				t.created = new Date();
			if(!t.modified)
				t.modified = t.created;
			context.tiddler = store.saveTiddler(t.title,t.title,t.text,t.modifier,t.modified,t.tags,t.fields,true,t.created,t.creator);
			autoSaveChanges();
		} else {
			story.refreshTiddler(context.title,null,true);
		}
		context.adaptor.close();
		if(callback) {
			callback(context);
		}
	};
	var tiddler = new Tiddler(title);
	tiddler.fields = typeof fields == "string" ? fields.decodeHashMap() : fields||{};
	var context = {serverType:tiddler.getServerType()};
	if(!context.serverType)
		return "";
	context.host = tiddler.fields['server.host'];
	context.workspace = tiddler.fields['server.workspace'];
	var adaptor = new config.adaptors[context.serverType]();
	adaptor.getTiddler(title,context,null,getTiddlerCallback);
	return config.messages.loadingMissingTiddler.format([title,context.serverType,context.host,context.workspace]);
};

Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
};

Story.prototype.getTemplateForTiddler = function(title,template,tiddler)
{
	return store.getRecursiveTiddlerText(template,null,10);
};

Story.prototype.refreshTiddler = function(title,template,force,customFields,defaultText)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(tiddlerElem.getAttribute("dirty") == "true" && !force)
			return tiddlerElem;
		template = this.chooseTemplateForTiddler(title,template);
		var currTemplate = tiddlerElem.getAttribute("template");
		if((template != currTemplate) || force) {
			var tiddler = store.getTiddler(title);
			if(!tiddler) {
				tiddler = new Tiddler();
				if(store.isShadowTiddler(title)) {
					var tags = [];
					tiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,tags,version.date);
				} else {
					var text = template=="EditTemplate" ?
								config.views.editor.defaultText.format([title]) :
								config.views.wikified.defaultText.format([title]);
					text = defaultText || text;
					var fields = customFields ? customFields.decodeHashMap() : null;
					tiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date,fields);
				}
			}
			tiddlerElem.setAttribute("tags",tiddler.tags.join(" "));
			tiddlerElem.setAttribute("tiddler",title);
			tiddlerElem.setAttribute("template",template);
			tiddlerElem.onmouseover = this.onTiddlerMouseOver;
			tiddlerElem.onmouseout = this.onTiddlerMouseOut;
			tiddlerElem.ondblclick = this.onTiddlerDblClick;
			tiddlerElem[window.event?"onkeydown":"onkeypress"] = this.onTiddlerKeyPress;
			tiddlerElem.innerHTML = this.getTemplateForTiddler(title,template,tiddler);
			applyHtmlMacros(tiddlerElem,tiddler);
			if(store.getTaggedTiddlers(title).length > 0)
				jQuery(tiddlerElem).addClass("isTag");
			else
				jQuery(tiddlerElem).removeClass("isTag");
			if(store.tiddlerExists(title)) {
				jQuery(tiddlerElem).removeClass("shadow");
				jQuery(tiddlerElem).removeClass("missing");
			} else {
				jQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? "shadow" : "missing");
			}
			if(customFields)
				this.addCustomFields(tiddlerElem,customFields);
		}
	}
	return tiddlerElem;
};

Story.prototype.addCustomFields = function(place,customFields)
{
	var fields = customFields.decodeHashMap();
	var w = createTiddlyElement(place,"div",null,"customFields");
	w.style.display = "none";
	var t;
	for(t in fields) {
		var e = document.createElement("input");
		e.setAttribute("type","text");
		e.setAttribute("value",fields[t]);
		w.appendChild(e);
		e.setAttribute("edit",t);
	}
};

Story.prototype.refreshAllTiddlers = function(force)
{
	var e = this.getContainer().firstChild;
	while(e) {
		var template = e.getAttribute("template");
		if(template && e.getAttribute("dirty") != "true") {
			this.refreshTiddler(e.getAttribute("tiddler"),force ? null : template,true);
		}
		e = e.nextSibling;
	}
};

Story.prototype.onTiddlerMouseOver = function(e)
{
	jQuery(this).addClass("selected");
};

Story.prototype.onTiddlerMouseOut = function(e)
{
	jQuery(this).removeClass("selected");
};

Story.prototype.onTiddlerDblClick = function(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	if(target && target.nodeName.toLowerCase() != "input" && target.nodeName.toLowerCase() != "textarea") {
		if(document.selection && document.selection.empty)
			document.selection.empty();
		config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
		e.cancelBubble = true;
		if(e.stopPropagation) e.stopPropagation();
		return true;
	}
	return false;
};

Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
	case 9: // Tab
		var ed = story.getTiddlerField(title,"text");
		if(target.tagName.toLowerCase() == "input" && ed.value==config.views.editor.defaultText.format([title])) {
			// moving from input field and editor still contains default text, so select it
			ed.focus();
			ed.select();
			consume = true;
		}
		if(config.options.chkInsertTabs && target.tagName.toLowerCase() == "textarea") {
			replaceSelection(target,String.fromCharCode(9));
			consume = true;
		}
		if(config.isOpera) {
			target.onblur = function() {
				this.focus();
				this.onblur = null;
			};
		}
		break;
	case 13: // Ctrl-Enter
	case 10: // Ctrl-Enter on IE PC
	case 77: // Ctrl-Enter is "M" on some platforms
		if(e.ctrlKey) {
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
			consume = true;
		}
		break;
	case 27: // Escape
		blurElement(this);
		config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
		consume = true;
		break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};

Story.prototype.getTiddlerField = function(title,field)
{
	var tiddlerElem = this.getTiddler(title);
	var e = null;
	if(tiddlerElem) {
		var t,children = tiddlerElem.getElementsByTagName("*");
		for(t=0; t<children.length; t++) {
			var c = children[t];
			if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea") {
				if(!e)
					e = c;
				if(c.getAttribute("edit") == field)
					e = c;
			}
		}
	}
	return e;
};

Story.prototype.focusTiddler = function(title,field)
{
	var e = this.getTiddlerField(title,field);
	if(e) {
		e.focus();
		e.select();
	}
};

Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {
		tiddlerElem.focus();
		tiddlerElem.blur();
	}
};

Story.prototype.setTiddlerField = function(title,tag,mode,field)
{
	var c = this.getTiddlerField(title,field);
	var tags = c.value.readBracketedList();
	tags.setItem(tag,mode);
	c.value = String.encodeTiddlyLinkList(tags);
};

Story.prototype.setTiddlerTag = function(title,tag,mode)
{
	this.setTiddlerField(title,tag,mode,"tags");
};

Story.prototype.closeTiddler = function(title,animate,unused)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		clearMessage();
		this.scrubTiddler(tiddlerElem);
		if(config.options.chkAnimate && animate && anim && typeof Slider == "function")
			anim.startAnimating(new Slider(tiddlerElem,false,null,"all"));
		else {
			jQuery(tiddlerElem).remove();
		}
	}
};

Story.prototype.scrubTiddler = function(tiddlerElem)
{
	tiddlerElem.id = null;
};

Story.prototype.setDirty = function(title,dirty)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		tiddlerElem.setAttribute("dirty",dirty ? "true" : "false");
};

Story.prototype.isDirty = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		return tiddlerElem.getAttribute("dirty") == "true";
	return null;
};

Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title,element) {
		if(this.isDirty(title))
			r = true;
	});
	return r;
};

Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title,element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
	});
	window.scrollTo(0,ensureVisible(this.container));
};

Story.prototype.isEmpty = function()
{
	var place = this.getContainer();
	return place && place.firstChild == null;
};

Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack,"title","excludeSearch");
	this.displayTiddlers(null,matches);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([matches.length.toString(),q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
};

Story.prototype.findContainingTiddler = function(e)
{
	while(e && !jQuery(e).hasClass("tiddler")) {
		e = jQuery(e).hasClass("popup") && Popup.stack[0] ? Popup.stack[0].root : e.parentNode;
	}
	return e;
};

Story.prototype.gatherSaveFields = function(e,fields)
{
	if(e && e.getAttribute) {
		var f = e.getAttribute("edit");
		if(f)
			fields[f] = e.value.replace(/\r/mg,"");
		if(e.hasChildNodes()) {
			var t,c = e.childNodes;
			for(t=0; t<c.length; t++)
				this.gatherSaveFields(c[t],fields);
		}
	}
};

Story.prototype.hasChanges = function(title)
{
	var e = this.getTiddler(title);
	if(e) {
		var fields = {};
		this.gatherSaveFields(e,fields);
		if(store.fetchTiddler(title)) {
		    var n;
			for(n in fields) {
				if(store.getValue(title,n) != fields[n]) //# tiddler changed
					return true;
			}
		} else {
			if(store.isShadowTiddler(title) && store.getShadowTiddlerText(title) == fields.text) { //# not checking for title or tags
				return false;
			} else { //# changed shadow or new tiddler
				return true;
			}
		}
	}
	return false;
};

Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		var fields = {};
		this.gatherSaveFields(tiddlerElem,fields);
		var newTitle = fields.title || title;
		if(!store.tiddlerExists(newTitle)) {
			newTitle = newTitle.trim();
			var creator = config.options.txtUserName;
		}
		if(store.tiddlerExists(newTitle) && newTitle != title) {
			if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
				return null;
				title = newTitle;
		}
		if(newTitle != title)
			this.closeTiddler(newTitle,false);
		tiddlerElem.id = this.tiddlerId(newTitle);
		tiddlerElem.setAttribute("tiddler",newTitle);
		tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
		tiddlerElem.setAttribute("dirty","false");
		if(config.options.chkForceMinorUpdate)
			minorUpdate = !minorUpdate;
		if(!store.tiddlerExists(newTitle))
			minorUpdate = false;
		var newDate = new Date();
		if(store.tiddlerExists(title)) {
			var t = store.fetchTiddler(title);
			var extendedFields = t.fields;
			creator = t.creator;
		} else {
			extendedFields = merge({},config.defaultCustomFields);
		}
		var n;
		for(n in fields) {
			if(!TiddlyWiki.isStandardField(n))
				extendedFields[n] = fields[n];
		}
		var tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);
		autoSaveChanges(null,[tiddler]);
		return newTitle;
	}
	return null;
};

Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title));
	});
	var t = encodeURIComponent(links.join(" "));
	if(t == "")
		t = "#";
	if(window.location.hash != t)
		window.location.hash = t;
};

Story.prototype.switchTheme = function(theme)
{
	if(safeMode)
		return;

	var isAvailable = function(title) {
		var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
		if(s!=-1)
			title = title.substr(0,s);
		return store.tiddlerExists(title) || store.isShadowTiddler(title);
	};

	var getSlice = function(theme,slice) {
		var r;
		if(readOnly)
			r = store.getTiddlerSlice(theme,slice+"ReadOnly") || store.getTiddlerSlice(theme,"Web"+slice);
		r = r || store.getTiddlerSlice(theme,slice);
		if(r && r.indexOf(config.textPrimitives.sectionSeparator)==0)
			r = theme + r;
		return isAvailable(r) ? r : slice;
	};

	var replaceNotification = function(i,name,theme,slice) {
		var newName = getSlice(theme,slice);
		if(name!=newName && store.namedNotifications[i].name==name) {
			store.namedNotifications[i].name = newName;
			return newName;
		}
		return name;
	};

	var pt = config.refresherData.pageTemplate;
	var vi = DEFAULT_VIEW_TEMPLATE;
	var vt = config.tiddlerTemplates[vi];
	var ei = DEFAULT_EDIT_TEMPLATE;
	var et = config.tiddlerTemplates[ei];

	var i;
	for(i=0; i<config.notifyTiddlers.length; i++) {
		var name = config.notifyTiddlers[i].name;
		switch(name) {
		case "PageTemplate":
			config.refresherData.pageTemplate = replaceNotification(i,config.refresherData.pageTemplate,theme,name);
			break;
		case "StyleSheet":
			removeStyleSheet(config.refresherData.styleSheet);
			config.refresherData.styleSheet = replaceNotification(i,config.refresherData.styleSheet,theme,name);
			break;
		case "ColorPalette":
			config.refresherData.colorPalette = replaceNotification(i,config.refresherData.colorPalette,theme,name);
			break;
		default:
			break;
		}
	}
	config.tiddlerTemplates[vi] = getSlice(theme,"ViewTemplate");
	config.tiddlerTemplates[ei] = getSlice(theme,"EditTemplate");
	if(!startingUp) {
		if(config.refresherData.pageTemplate!=pt || config.tiddlerTemplates[vi]!=vt || config.tiddlerTemplates[ei]!=et) {
			refreshAll();
			this.refreshAllTiddlers(true);
		} else {
			setStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet,"",10),config.refreshers.styleSheet);
		}
		config.options.txtTheme = theme;
		saveOption("txtTheme");
	}
};

//--
//-- Backstage
//--
// Backstage tasks
config.tasks.save.action = saveChanges;

var backstage = {
	area: null,
	toolbar: null,
	button: null,
	showButton: null,
	hideButton: null,
	cloak: null,
	panel: null,
	panelBody: null,
	panelFooter: null,
	currTabName: null,
	currTabElem: null,
	content: null,

	init: function() {
		var cmb = config.messages.backstage;
		this.area = document.getElementById("backstageArea");
		this.toolbar = jQuery("#backstageToolbar").empty()[0];
		this.button = jQuery("#backstageButton").empty()[0];
		this.button.style.display = "block";
		var t = cmb.open.text + " " + glyph("bentArrowLeft");
		this.showButton = createTiddlyButton(this.button,t,cmb.open.tooltip,
						function(e) {backstage.show(); return false;},null,"backstageShow");
		t = glyph("bentArrowRight") + " " + cmb.close.text;
		this.hideButton = createTiddlyButton(this.button,t,cmb.close.tooltip,
						function(e) {backstage.hide(); return false;},null,"backstageHide");
		this.cloak = document.getElementById("backstageCloak");
		this.panel = document.getElementById("backstagePanel");
		this.panelFooter = createTiddlyElement(this.panel,"div",null,"backstagePanelFooter");
		this.panelBody = createTiddlyElement(this.panel,"div",null,"backstagePanelBody");
		this.cloak.onmousedown = function(e) {backstage.switchTab(null);};
		createTiddlyText(this.toolbar,cmb.prompt);
		for(t=0; t<config.backstageTasks.length; t++) {
			var taskName = config.backstageTasks[t];
			var task = config.tasks[taskName];
			var handler = task.action ? this.onClickCommand : this.onClickTab;
			var text = task.text + (task.action ? "" : glyph("downTriangle"));
			var btn = createTiddlyButton(this.toolbar,text,task.tooltip,handler,"backstageTab");
			jQuery(btn).addClass(task.action ? "backstageAction" : "backstageTask");
			btn.setAttribute("task", taskName);
			}
		this.content = document.getElementById("contentWrapper");
		if(config.options.chkBackstage)
			this.show();
		else
			this.hide();
	},

	isVisible: function() {
		return this.area ? this.area.style.display == "block" : false;
	},

	show: function() {
		this.area.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.toolbar.style.left = findWindowWidth() + "px";
			var p = [{style: "left", start: findWindowWidth(), end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p));
		} else {
			backstage.area.style.left = "0px";
		}
		jQuery(this.showButton).hide();
		jQuery(this.hideButton).show();
		config.options.chkBackstage = true;
		saveOption("chkBackstage");
		jQuery(this.content).addClass("backstageVisible");
	},

	hide: function() {
		if(this.currTabElem) {
			this.switchTab(null);
		} else {
			backstage.toolbar.style.left = "0px";
			if(anim && config.options.chkAnimate) {
				var p = [{style: "left", start: 0, end: findWindowWidth(), template: "%0px"}];
				var c = function(element,properties) {backstage.area.style.display = "none";};
				anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p,c));
			} else {
				this.area.style.display = "none";
			}
			this.showButton.style.display = "block";
			this.hideButton.style.display = "none";
			config.options.chkBackstage = false;
			saveOption("chkBackstage");
			jQuery(this.content).removeClass("backstageVisible");
		}
	},

	onClickCommand: function(e) {
		var task = config.tasks[this.getAttribute("task")];
		if(task.action) {
			backstage.switchTab(null);
			task.action();
		}
		return false;
	},

	onClickTab: function(e) {
		backstage.switchTab(this.getAttribute("task"));
		return false;
	},

	// Switch to a given tab, or none if null is passed
	switchTab: function(tabName) {
		var tabElem = null;
		var e = this.toolbar.firstChild;
		while(e) {
			if(e.getAttribute && e.getAttribute("task") == tabName)
				tabElem = e;
			e = e.nextSibling;
		}
		if(tabName == backstage.currTabName) {
			backstage.hidePanel();
			return;
		}
		if(backstage.currTabElem) {
			jQuery(this.currTabElem).removeClass("backstageSelTab");
		}
		if(tabElem && tabName) {
			backstage.preparePanel();
			jQuery(tabElem).addClass("backstageSelTab");
			var task = config.tasks[tabName];
			wikify(task.content,backstage.panelBody,null,null);
			backstage.showPanel();
		} else if(backstage.currTabElem) {
			backstage.hidePanel();
		}
		backstage.currTabName = tabName;
		backstage.currTabElem = tabElem;
	},

	isPanelVisible: function() {
		return backstage.panel ? backstage.panel.style.display == "block" : false;
	},

	preparePanel: function() {
		backstage.cloak.style.height = findWindowHeight() + "px";
		backstage.cloak.style.display = "block";
		jQuery(backstage.panelBody).empty();
		return backstage.panelBody;
	},

	showPanel: function() {
		backstage.panel.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.panel.style.top = (-backstage.panel.offsetHeight) + "px";
			var p = [{style: "top", start: -backstage.panel.offsetHeight, end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p),new Scroller(backstage.panel,false));
		} else {
			backstage.panel.style.top = "0px";
		}
		return backstage.panelBody;
	},

	hidePanel: function() {
		if(backstage.currTabElem)
			jQuery(backstage.currTabElem).removeClass("backstageSelTab");
		backstage.currTabElem = null;
		backstage.currTabName = null;
		if(anim && config.options.chkAnimate) {
			var p = [
				{style: "top", start: 0, end: -(backstage.panel.offsetHeight), template: "%0px"},
				{style: "display", atEnd: "none"}
			];
			var c = function(element,properties) {backstage.cloak.style.display = "none";};
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p,c));
		} else {
			jQuery([backstage.panel,backstage.cloak]).hide();
		}
	}
};

config.macros.backstage = {};

config.macros.backstage.handler = function(place,macroName,params)
{
	var backstageTask = config.tasks[params[0]];
	if(backstageTask)
		createTiddlyButton(place,backstageTask.text,backstageTask.tooltip,function(e) {backstage.switchTab(params[0]); return false;});
};

//--
//-- ImportTiddlers macro
//--

config.macros.importTiddlers.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(readOnly) {
		createTiddlyElement(place,"div",null,"marked",this.readOnlyWarning);
		return;
	}
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	this.restart(w);
};

config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	wizard.clear();
	config.macros.importTiddlers.restart(wizard);
	return false;
};

config.macros.importTiddlers.onClose = function(e)
{
	backstage.hidePanel();
	return false;
};

config.macros.importTiddlers.restart = function(wizard)
{
	var me = config.macros.importTiddlers;
	wizard.addStep(this.step1Title,this.step1Html);
	var t,s = wizard.getElement("selTypes");
	for(t in config.adaptors) {
		var e = createTiddlyElement(s,"option",null,null,config.adaptors[t].serverLabel || t);
		e.value = t;
	}
	if(config.defaultAdaptor)
		s.value = config.defaultAdaptor;
	s = wizard.getElement("selFeeds");
	var feeds = this.getFeeds();
	for(t in feeds) {
		e = createTiddlyElement(s,"option",null,null,t);
		e.value = t;
	}
	wizard.setValue("feeds",feeds);
	s.onchange = me.onFeedChange;
	var fileInput = wizard.getElement("txtBrowse");
	fileInput.onchange = me.onBrowseChange;
	fileInput.onkeyup = me.onBrowseChange;
	wizard.setButtons([{caption: this.openLabel, tooltip: this.openPrompt, onClick: me.onOpen}]);
	wizard.formElem.action = "javascript:;";
	wizard.formElem.onsubmit = function() {
		if(!this.txtPath || this.txtPath.value.length) //# check for manually entered path in first step
			this.lastChild.firstChild.onclick();
	};
};

config.macros.importTiddlers.getFeeds = function()
{
	var feeds = {};
	var t,tagged = store.getTaggedTiddlers("systemServer","title");
	for(t=0; t<tagged.length; t++) {
		var title = tagged[t].title;
		var serverType = store.getTiddlerSlice(title,"Type");
		if(!serverType)
			serverType = "file";
		feeds[title] = {title: title,
						url: store.getTiddlerSlice(title,"URL"),
						workspace: store.getTiddlerSlice(title,"Workspace"),
						workspaceList: store.getTiddlerSlice(title,"WorkspaceList"),
						tiddlerFilter: store.getTiddlerSlice(title,"TiddlerFilter"),
						serverType: serverType,
						description: store.getTiddlerSlice(title,"Description")};
	}
	return feeds;
};

config.macros.importTiddlers.onFeedChange = function(e)
{
	var wizard = new Wizard(this);
	var selTypes = wizard.getElement("selTypes");
	var fileInput = wizard.getElement("txtPath");
	var feeds = wizard.getValue("feeds");
	var f = feeds[this.value];
	if(f) {
		selTypes.value = f.serverType;
		fileInput.value = f.url;
		wizard.setValue("feedName",f.serverType);
		wizard.setValue("feedHost",f.url);
		wizard.setValue("feedWorkspace",f.workspace);
		wizard.setValue("feedWorkspaceList",f.workspaceList);
		wizard.setValue("feedTiddlerFilter",f.tiddlerFilter);
	}
	return false;
};

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var wizard = new Wizard(this);
	var file = this.value;
	if(this.files && this.files[0]) {
		file = this.files[0].fileName;
		try {
			if(typeof(netscape) !== "undefined") {
				netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead");
			}
		} catch (ex) {
			showException(ex);
		}
	}
	var fileInput = wizard.getElement("txtPath");
	fileInput.value = config.macros.importTiddlers.getURLFromLocalPath(file);
	var serverType = wizard.getElement("selTypes");
	serverType.value = "file";
	return true;
};

config.macros.importTiddlers.getURLFromLocalPath = function(v)
{
	if(!v || !v.length)
		return v;
	v = v.replace(/\\/g,"/"); // use "/" for cross-platform consistency
	var u;
	var t = v.split(":");
	var p = t[1] || t[0]; // remove drive letter (if any)
	if(t[1] && (t[0] == "http" || t[0] == "https" || t[0] == "file")) {
		u = v;
	} else if(p.substr(0,1)=="/") {
		u = document.location.protocol + "//" + document.location.hostname + (t[1] ? "/" : "") + v;
	} else {
		var c = document.location.href.replace(/\\/g,"/");
		var pos = c.lastIndexOf("/");
		if(pos!=-1)
			c = c.substr(0,pos); // remove filename
		u = c + "/" + p;
	}
	return u;
};

config.macros.importTiddlers.onOpen = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var fileInput = wizard.getElement("txtPath");
	var url = fileInput.value;
	var serverType = wizard.getElement("selTypes").value || config.defaultAdaptor;
	var adaptor = new config.adaptors[serverType]();
	wizard.setValue("adaptor",adaptor);
	wizard.setValue("serverType",serverType);
	wizard.setValue("host",url);
	adaptor.openHost(url,null,wizard,me.onOpenHost);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenHost);
	return false;
};

config.macros.importTiddlers.onOpenHost = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	var adaptor = wizard.getValue("adaptor");
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenHost: " + context.statusText);
	adaptor.getWorkspaceList(context,wizard,me.onGetWorkspaceList);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetWorkspaceList);
};

config.macros.importTiddlers.onGetWorkspaceList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onGetWorkspaceList: " + context.statusText);
	wizard.setValue("context",context);
	var workspace = wizard.getValue("feedWorkspace");
	if(!workspace && context.workspaces.length==1)
		workspace = context.workspaces[0].title;
	if(workspace) {
		context.adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
		wizard.setValue("workspace",workspace);
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
		return;
	}
	wizard.addStep(me.step2Title,me.step2Html);
	var t,s = wizard.getElement("selWorkspace");
	s.onchange = me.onWorkspaceChange;
	for(t=0; t<context.workspaces.length; t++) {
		var e = createTiddlyElement(s,"option",null,null,context.workspaces[t].title);
		e.value = context.workspaces[t].title;
	}
	var workspaceList = wizard.getValue("feedWorkspaceList");
	if(workspaceList) {
		var n,list = workspaceList.parseParams("workspace",null,false,true);
		for(n=1; n<list.length; n++) {
			if(context.workspaces.findByField("title",list[n].value) == null) {
				e = createTiddlyElement(s,"option",null,null,list[n].value);
				e.value = list[n].value;
			}
		}
	}
	if(workspace) {
		t = wizard.getElement("txtWorkspace");
		t.value = workspace;
	}
	wizard.setButtons([{caption: me.openLabel, tooltip: me.openPrompt, onClick: me.onChooseWorkspace}]);
};

config.macros.importTiddlers.onWorkspaceChange = function(e)
{
	var wizard = new Wizard(this);
	var t = wizard.getElement("txtWorkspace");
	t.value = this.value;
	this.selectedIndex = 0;
	return false;
};

config.macros.importTiddlers.onChooseWorkspace = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var adaptor = wizard.getValue("adaptor");
	var workspace = wizard.getElement("txtWorkspace").value;
	wizard.setValue("workspace",workspace);
	var context = wizard.getValue("context");
	adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
	return false;
};

config.macros.importTiddlers.onOpenWorkspace = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenWorkspace: " + context.statusText);
	var adaptor = wizard.getValue("adaptor");
	adaptor.getTiddlerList(context,wizard,me.onGetTiddlerList,wizard.getValue("feedTiddlerFilter"));
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetTiddlerList);
};

config.macros.importTiddlers.onGetTiddlerList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true) {
		var error = context.statusText||me.errorGettingTiddlerList;
		if(context.host.indexOf("file://") === 0) {
			error = me.errorGettingTiddlerListFile;
		} else {
			error = context.xhr && context.xhr.status == 404 ? me.errorGettingTiddlerListHttp404 :
				me.errorGettingTiddlerListHttp;
		}
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],"");
		jQuery("span.status", wizard.footerEl).html(error); // so error message can be html
		return;
	}
	// Extract data for the listview
	var listedTiddlers = [];
	if(context.tiddlers) {
		var n;
		for(n=0; n<context.tiddlers.length; n++) {
			var tiddler = context.tiddlers[n];
			listedTiddlers.push({
				title: tiddler.title,
				modified: tiddler.modified,
				modifier: tiddler.modifier,
				text: tiddler.text ? wikifyPlainText(tiddler.text,100) : "",
				tags: tiddler.tags,
				size: tiddler.text ? tiddler.text.length : 0,
				tiddler: tiddler
			});
		}
	}
	listedTiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	// Display the listview
	wizard.addStep(me.step3Title,me.step3Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	var listView = ListView.create(listWrapper,listedTiddlers,me.listViewTemplate);
	wizard.setValue("listView",listView);
	wizard.setValue("context",context);
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler");
	txtSaveTiddler.value = me.generateSystemServerName(wizard);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel},
			{caption: me.importLabel, tooltip: me.importPrompt, onClick: me.doImport}
		]);
};

config.macros.importTiddlers.generateSystemServerName = function(wizard)
{
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var pattern = config.macros.importTiddlers[workspace ? "systemServerNamePattern" : "systemServerNamePatternNoWorkspace"];
	return pattern.format([serverType,host,workspace]);
};

config.macros.importTiddlers.saveServerTiddler = function(wizard)
{
	var me = config.macros.importTiddlers;
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler").value;
	if(store.tiddlerExists(txtSaveTiddler)) {
		if(!confirm(me.confirmOverwriteSaveTiddler.format([txtSaveTiddler])))
			return;
		store.suspendNotifications();
		store.removeTiddler(txtSaveTiddler);
		store.resumeNotifications();
	}
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var text = me.serverSaveTemplate.format([serverType,host,workspace]);
	store.saveTiddler(txtSaveTiddler,txtSaveTiddler,text,me.serverSaveModifier,new Date(),["systemServer"]);
};

config.macros.importTiddlers.doImport = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	if(wizard.getElement("chkSave").checked)
		me.saveServerTiddler(wizard);
	var chkSync = wizard.getElement("chkSync").checked;
	wizard.setValue("sync",chkSync);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	var adaptor = wizard.getValue("adaptor");
	var overwrite = [];
	var t;
	for(t=0; t<rowNames.length; t++) {
		if(store.tiddlerExists(rowNames[t]))
			overwrite.push(rowNames[t]);
	}
	if(overwrite.length > 0) {
		if(!confirm(me.confirmOverwriteText.format([overwrite.join(", ")])))
			return false;
	}
	wizard.addStep(me.step4Title.format([rowNames.length]),me.step4Html);
	for(t=0; t<rowNames.length; t++) {
		var link = document.createElement("div");
		createTiddlyLink(link,rowNames[t],true);
		var place = wizard.getElement("markReport");
		place.parentNode.insertBefore(link,place);
	}
	wizard.setValue("remainingImports",rowNames.length);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}
		],me.statusDoingImport);
	var wizardContext = wizard.getValue("context");
	var tiddlers = wizardContext ? wizardContext.tiddlers : [];
	for(t=0; t<rowNames.length; t++) {
		var context = {
			allowSynchronous:true,
			tiddler:tiddlers[tiddlers.findByField("title",rowNames[t])]
		};
		adaptor.getTiddler(rowNames[t],context,wizard,me.onGetTiddler);
	}
	return false;
};

config.macros.importTiddlers.onGetTiddler = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(!context.status)
		displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
	var tiddler = context.tiddler;
	store.suspendNotifications();
	store.saveTiddler(tiddler.title, tiddler.title, tiddler.text, tiddler.modifier, tiddler.modified, tiddler.tags, tiddler.fields, true, tiddler.created);
	if(!wizard.getValue("sync")) {
		store.setValue(tiddler.title,'server',null);
	}
	store.resumeNotifications();
	if(!context.isSynchronous)
		store.notify(tiddler.title,true);
	var remainingImports = wizard.getValue("remainingImports")-1;
	wizard.setValue("remainingImports",remainingImports);
	if(remainingImports == 0) {
		if(context.isSynchronous) {
			store.notifyAll();
			refreshDisplay();
		}
		wizard.setButtons([
				{caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose}
			],me.statusDoneImport);
		autoSaveChanges();
	}
};

//--
//-- Upgrade macro
//--

config.macros.upgrade.handler = function(place)
{
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	w.addStep(this.step1Title,this.step1Html.format([this.source,this.source]));
	w.setButtons([{caption: this.upgradeLabel, tooltip: this.upgradePrompt, onClick: this.onClickUpgrade}]);
};

config.macros.upgrade.onClickUpgrade = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	if(window.location.protocol != "file:") {
		alert(me.errorCantUpgrade);
		return false;
	}
	if(story.areAnyDirty() || store.isDirty()) {
		alert(me.errorNotSaved);
		return false;
	}
	var localPath = getLocalPath(document.location.toString());
	var backupPath = getBackupPath(localPath,me.backupExtension);
	w.setValue("backupPath",backupPath);
	w.setButtons([],me.statusPreparingBackup);
	var original = loadOriginal(localPath);
	w.setButtons([],me.statusSavingBackup);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(!backup) {
		w.setButtons([],me.errorSavingBackup);
		alert(me.errorSavingBackup);
		return false;
	}
	w.setButtons([],me.statusLoadingCore);
	var options = {
		type:"GET",
		url:me.source,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			me.onLoadCore(true,w,jqXHR.responseText,me.source,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			me.onLoadCore(false,w,null,me.source,jqXHR);
		}
	};
	ajaxReq(options);
	return false;
};

config.macros.upgrade.onLoadCore = function(status,params,responseText,url,xhr)
{
	var me = config.macros.upgrade;
	var w = params;
	var errMsg;
	if(!status)
		errMsg = me.errorLoadingCore;
	var newVer = me.extractVersion(responseText);
	if(!newVer)
		errMsg = me.errorCoreFormat;
	if(errMsg) {
		w.setButtons([],errMsg);
		alert(errMsg);
		return;
	}
	var onStartUpgrade = function(e) {
		w.setButtons([],me.statusSavingCore);
		var localPath = getLocalPath(document.location.toString());
		saveFile(localPath,responseText);
		w.setButtons([],me.statusReloadingCore);
		var backupPath = w.getValue("backupPath");
		var newLoc = document.location.toString() + "?time=" + new Date().convertToYYYYMMDDHHMM() + "#upgrade:[[" + encodeURI(backupPath) + "]]";
		window.setTimeout(function () {window.location = newLoc;},10);
	};
	var step2 = [me.step2Html_downgrade,me.step2Html_restore,me.step2Html_upgrade][compareVersions(version,newVer) + 1];
	w.addStep(me.step2Title,step2.format([formatVersion(newVer),formatVersion(version)]));
	w.setButtons([{caption: me.startLabel, tooltip: me.startPrompt, onClick: onStartUpgrade},{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}]);
};

config.macros.upgrade.onCancel = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	w.addStep(me.step3Title,me.step3Html);
	w.setButtons([]);
	return false;
};

config.macros.upgrade.extractVersion = function(upgradeFile)
{
	var re = /^var version = \{title: "([^"]+)", major: (\d+), minor: (\d+), revision: (\d+)(, beta: (\d+)){0,1}, date: new Date\("([^"]+)"\)/mg;
	var m = re.exec(upgradeFile);
	return m ? {title: m[1], major: m[2], minor: m[3], revision: m[4], beta: m[6], date: new Date(m[7])} : null;
};

function upgradeFrom(path)
{
	var importStore = new TiddlyWiki();
	var tw = loadFile(path);
	if(window.netscape !== undefined)
		tw = convertUTF8ToUnicode(tw);
	importStore.importTiddlyWiki(tw);
	importStore.forEachTiddler(function(title,tiddler) {
		if(!store.getTiddler(title)) {
			store.addTiddler(tiddler);
		}
	});
	refreshDisplay();
	saveChanges(); //# To create appropriate Markup* sections
	alert(config.messages.upgradeDone.format([formatVersion()]));
	window.location = window.location.toString().substr(0,window.location.toString().lastIndexOf("?"));
}

//--
//-- Sync macro
//--

// Synchronisation handlers
config.syncers = {};

// Sync state.
var currSync = null;

// sync macro
config.macros.sync.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(!wikifier.isStatic)
		this.startSync(place);
};

config.macros.sync.cancelSync = function()
{
	currSync = null;
};

config.macros.sync.startSync = function(place)
{
	if(currSync)
		config.macros.sync.cancelSync();
	currSync = {};
	currSync.syncList = this.getSyncableTiddlers();
	currSync.syncTasks = this.createSyncTasks(currSync.syncList);
	this.preProcessSyncableTiddlers(currSync.syncList);
	var wizard = new Wizard();
	currSync.wizard = wizard;
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	currSync.listView = ListView.create(listWrapper,currSync.syncList,this.listViewTemplate);
	this.processSyncableTiddlers(currSync.syncList);
	wizard.setButtons([{caption: this.syncLabel, tooltip: this.syncPrompt, onClick: this.doSync}]);
};

config.macros.sync.getSyncableTiddlers = function()
{
	var list = [];
	store.forEachTiddler(function(title,tiddler) {
		var syncItem = {};
		syncItem.serverType = tiddler.getServerType();
		syncItem.serverHost = tiddler.fields['server.host'];
		if(syncItem.serverType && syncItem.serverHost) {
			syncItem.adaptor = new config.adaptors[syncItem.serverType]();
			syncItem.serverHost = syncItem.adaptor.fullHostName(syncItem.serverHost);
			syncItem.serverWorkspace = tiddler.fields['server.workspace'];
			syncItem.tiddler = tiddler;
			syncItem.title = tiddler.title;
			syncItem.isTouched = tiddler.isTouched();
			syncItem.selected = syncItem.isTouched;
			syncItem.syncStatus = config.macros.sync.syncStatusList[syncItem.isTouched ? "changedLocally" : "none"];
			syncItem.status = syncItem.syncStatus.text;
			list.push(syncItem);
		}
		});
	list.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	return list;
};

config.macros.sync.preProcessSyncableTiddlers = function(syncList)
{
	var i;
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		si.serverUrl = si.adaptor.generateTiddlerInfo(si.tiddler).uri;
	}
};

config.macros.sync.processSyncableTiddlers = function(syncList)
{
	var i;
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		if(si.syncStatus.display)
			si.rowElement.style.display = si.syncStatus.display;
		if(si.syncStatus.className)
			si.rowElement.className = si.syncStatus.className;
	}
};

config.macros.sync.createSyncTasks = function(syncList)
{
	var i,syncTasks = [];
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		var j,r = null;
		for(j=0; j<syncTasks.length; j++) {
			var cst = syncTasks[j];
			if(si.serverType == cst.serverType && si.serverHost == cst.serverHost && si.serverWorkspace == cst.serverWorkspace)
				r = cst;
		}
		if(r) {
			si.syncTask = r;
			r.syncItems.push(si);
		} else {
			si.syncTask = this.createSyncTask(si);
			syncTasks.push(si.syncTask);
		}
	}
	return syncTasks;
};

config.macros.sync.createSyncTask = function(syncItem)
{
	var st = {};
	st.serverType = syncItem.serverType;
	st.serverHost = syncItem.serverHost;
	st.serverWorkspace = syncItem.serverWorkspace;
	st.syncItems = [syncItem];

	var getTiddlerListCallback = function(context,sycnItems) {
		var me = config.macros.sync;
		if(!context.status) {
			displayMessage(context.statusText);
			return false;
		}
		syncItems = context.userParams;
		var i,tiddlers = context.tiddlers;
		for(i=0; i<syncItems.length; i++) {
			var si = syncItems[i];
			var f = tiddlers.findByField("title",si.title);
			if(f !== null) {
				if(tiddlers[f].fields['server.page.revision'] > si.tiddler.fields['server.page.revision']) {
					si.syncStatus = me.syncStatusList[si.isTouched ? 'changedBoth' : 'changedServer'];
				}
			} else {
				si.syncStatus = me.syncStatusList.notFound;
			}
			me.updateSyncStatus(si);
		}
		return true;
	};

	var openWorkspaceCallback = function(context,syncItems) {
		if(context.status) {
			context.adaptor.getTiddlerList(context,syncItems,getTiddlerListCallback);
			return true;
		}
		displayMessage(context.statusText);
		return false;
	};

	var context = {host:st.serverHost,workspace:st.serverWorkspace};
	syncItem.adaptor.openHost(st.serverHost);
	syncItem.adaptor.openWorkspace(st.serverWorkspace,context,st.syncItems,openWorkspaceCallback);
	return st;
};

config.macros.sync.updateSyncStatus = function(syncItem)
{
	var e = syncItem.colElements["status"];
	jQuery(e).empty();
	createTiddlyText(e,syncItem.syncStatus.text);
	syncItem.rowElement.style.display = syncItem.syncStatus.display;
	if(syncItem.syncStatus.className)
		syncItem.rowElement.className = syncItem.syncStatus.className;
};

config.macros.sync.doSync = function(e)
{
	var me = config.macros.sync;
	var getTiddlerCallback = function(context,syncItem) {
		if(syncItem) {
			var tiddler = context.tiddler;
			store.saveTiddler(tiddler.title,tiddler.title,tiddler.text,tiddler.modifier,tiddler.modified,tiddler.tags,tiddler.fields,true,tiddler.created);
			syncItem.syncStatus = me.syncStatusList.gotFromServer;
			me.updateSyncStatus(syncItem);
		}
	};
	var putTiddlerCallback = function(context,syncItem) {
		if(syncItem) {
			store.resetTiddler(context.title);
			syncItem.syncStatus = me.syncStatusList.putToServer;
			me.updateSyncStatus(syncItem);
		}
	};

	var rowNames = ListView.getSelectedRows(currSync.listView);
	var i,sl = me.syncStatusList;
	for(i=0; i<currSync.syncList.length; i++) {
		var si = currSync.syncList[i];
		if(rowNames.indexOf(si.title) != -1) {
			var errorMsg = "Error in doSync: ";
			try {
				var r = true;
				switch(si.syncStatus) {
				case sl.changedServer:
					var context = {"workspace": si.serverWorkspace};
					r = si.adaptor.getTiddler(si.title,context,si,getTiddlerCallback);
					break;
				case sl.notFound:
				case sl.changedLocally:
				case sl.changedBoth:
					r = si.adaptor.putTiddler(si.tiddler,null,si,putTiddlerCallback);
					break;
				default:
					break;
				}
				if(!r)
					displayMessage(errorMsg + r);
			} catch(ex) {
				if(ex.name == "TypeError")
					displayMessage("sync operation unsupported: " + ex.message);
				else
					displayMessage(errorMsg + ex.message);
			}
		}
	}
	return false;
};

//--
//-- Manager UI for groups of tiddlers
//--

config.macros.plugins.handler = function(place,macroName,params,wikifier,paramString)
{
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	listWrapper.setAttribute("refresh","macro");
	listWrapper.setAttribute("macroName","plugins");
	listWrapper.setAttribute("params",paramString);
	this.refresh(listWrapper,paramString);
};

config.macros.plugins.refresh = function(listWrapper,params)
{
	var me = config.macros.plugins;
	var wizard = new Wizard(listWrapper);
	var selectedRows = [];
	ListView.forEachSelector(listWrapper,function(e,rowName) {
			if(e.checked)
				selectedRows.push(e.getAttribute("rowName"));
		});
	jQuery(listWrapper).empty();
	params = params.parseParams("anon");
	var plugins = installedPlugins.slice(0);
	var t,tiddler,p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(t=0; t<configTiddlers.length; t++) {
		tiddler = configTiddlers[t];
		if(plugins.findByField("title",tiddler.title) == null) {
			p = getPluginInfo(tiddler);
			p.executed = false;
			p.log.splice(0,0,this.skippedText);
			plugins.push(p);
		}
	}
	for(t=0; t<plugins.length; t++) {
		p = plugins[t];
		p.size = p.tiddler.text ? p.tiddler.text.length : 0;
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(plugins[t].title) != -1;
	}
	if(plugins.length == 0) {
		createTiddlyElement(listWrapper,"em",null,null,this.noPluginText);
		wizard.setButtons([]);
	} else {
		var template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;
		var listView = ListView.create(listWrapper,plugins,template,this.onSelectCommand);
		wizard.setValue("listView",listView);
		if(!readOnly) {
			wizard.setButtons([
				{caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag},
				{caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete}
			]);
		}
	}
};

config.macros.plugins.doRemoveTag = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		var t;
		for(t=0; t<rowNames.length; t++) {
			store.setTiddlerTag(rowNames[t],false,"systemConfig");
		}
		autoSaveChanges();
	}
};

config.macros.plugins.doDelete = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		if(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")]))) {
			var t;
			for(t=0; t<rowNames.length; t++) {
				store.removeTiddler(rowNames[t]);
				story.closeTiddler(rowNames[t],true);
			}
		}
		autoSaveChanges();
	}
};

//--
//-- Message area
//--

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea)
		return null;
	if(!msgArea.hasChildNodes())
		createTiddlyButton(createTiddlyElement(msgArea,"div",null,"messageToolbar"),
			config.messages.messageClose.text,
			config.messages.messageClose.tooltip,
			clearMessage);
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea,"div");
}

function displayMessage(text,linkText)
{
	var e = getMessageDiv();
	if(!e) {
		alert(text);
		return;
	}
	if(linkText) {
		var link = createTiddlyElement(e,"a",null,null,text);
		link.href = linkText;
		link.target = "_blank";
	} else {
		e.appendChild(document.createTextNode(text));
	}
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea) {
		jQuery(msgArea).empty();
		msgArea.style.display = "none";
	}
	return false;
}

//--
//-- Refresh mechanism
//--

config.notifyTiddlers = [
	{name: "SystemSettings", notify: onSystemSettingsChange},
	{name: "StyleSheetLayout", notify: refreshStyles},
	{name: "StyleSheetColors", notify: refreshStyles},
	{name: "StyleSheet", notify: refreshStyles},
	{name: "StyleSheetPrint", notify: refreshStyles},
	{name: "PageTemplate", notify: refreshPageTemplate},
	{name: "SiteTitle", notify: refreshPageTitle},
	{name: "SiteSubtitle", notify: refreshPageTitle},
	{name: "WindowTitle", notify: refreshPageTitle},
	{name: "ColorPalette", notify: refreshColorPalette},
	{name: null, notify: refreshDisplay}
];

config.refreshers = {
	link: function(e,changeList)
		{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e,title);
		return true;
		},

	tiddler: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))
			story.refreshTiddler(title,template,true);
		else
			refreshElements(e,changeList);
		return true;
		},

	content: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		var args = e.getAttribute("args");
		if(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {
			jQuery(e).empty();
			config.macros.tiddler.transclude(e,title,args);
			return true;
		} else
			return false;
		},

	macro: function(e,changeList)
		{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e,params);
		return true;
		}
};

config.refresherData = {
	styleSheet: "StyleSheet",
	defaultStyleSheet: "StyleSheet",
	pageTemplate: "PageTemplate",
	defaultPageTemplate: "PageTemplate",
	colorPalette: "ColorPalette",
	defaultColorPalette: "ColorPalette"
};

function refreshElements(root,changeList)
{
	var c,nodes = root.childNodes;
	for(c=0; c<nodes.length; c++) {
		var e = nodes[c], type = null;
		if(e.getAttribute && (e.tagName ? e.tagName != "IFRAME" : true))
			type = e.getAttribute("refresh");
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e,changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e,changeList);
	}
}

function applyHtmlMacros(root,tiddler)
{
	var e = root.firstChild;
	while(e) {
		var nextChild = e.nextSibling;
		if(e.getAttribute) {
			var macro = e.getAttribute("macro");
			if(macro) {
				e.removeAttribute("macro");
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1) {
					params = macro.substr(p+1);
					macro = macro.substr(0,p);
				}
				invokeMacro(e,macro,params,null,tiddler);
			}
		}
		if(e.hasChildNodes())
			applyHtmlMacros(e,tiddler);
		e = nextChild;
	}
}

function refreshPageTemplate(title)
{
	var stash = jQuery("<div/>").appendTo("body").hide()[0];
	var display = story.getContainer();
	var nodes,t;
	if(display) {
		nodes = display.childNodes;
		for(t=nodes.length-1; t>=0; t--)
			stash.appendChild(nodes[t]);
	}
	var wrapper = document.getElementById("contentWrapper");

	var isAvailable = function(title) {
		var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
		if(s!=-1)
			title = title.substr(0,s);
		return store.tiddlerExists(title) || store.isShadowTiddler(title);
	};
	if(!title || !isAvailable(title))
		title = config.refresherData.pageTemplate;
	if(!isAvailable(title))
		title = config.refresherData.defaultPageTemplate; //# this one is always avaialable
	wrapper.innerHTML = store.getRecursiveTiddlerText(title,null,10);
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = story.getContainer();
	jQuery(display).empty();
	if(!display)
		display = createTiddlyElement(wrapper,"div",story.containerId());
	nodes = stash.childNodes;
	for(t=nodes.length-1; t>=0; t--)
		display.appendChild(nodes[t]);
	jQuery(stash).remove();
}

function refreshDisplay(hint)
{
	if(typeof hint == "string")
		hint = [hint];
	var e = document.getElementById("contentWrapper");
	refreshElements(e,hint);
	if(backstage.isPanelVisible()) {
		e = document.getElementById("backstage");
		refreshElements(e,hint);
	}
}

function refreshPageTitle()
{
	document.title = getPageTitle();
}

function getPageTitle()
{
	return wikifyPlainText(store.getTiddlerText("WindowTitle",""),null,tiddler);
}

function refreshStyles(title,doc)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title,"",10),title,doc || document);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles(config.refresherData.styleSheet);
	refreshStyles("StyleSheetPrint");
}

//--
//-- Option handling
//--

config.optionHandlers = {
	'txt': {
		get: function(name) {return encodeCookie(config.options[name].toString());},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	},
	'chk': {
		get: function(name) {return config.options[name] ? 'true' : 'false';},
		set: function(name,value) {config.options[name] = value == 'true';}
	}
};

function setOption(name,value)
{
	var optType = name.substr(0,3);
	if(config.optionHandlers[optType] && config.optionHandlers[optType].set)
		config.optionHandlers[optType].set(name,value);
}

// Gets the value of an option as a string. Most code should just read from config.options.* directly
function getOption(name)
{
	var optType = name.substr(0,3);
	return config.optionHandlers[optType] && config.optionHandlers[optType].get ? config.optionHandlers[optType].get(name) : null;
}

function loadOptions()
{
	if(safeMode)
		return;
	loadCookies();
	loadSystemSettings();
}
// @Deprecated; retained for backwards compatibility
var loadOptionsCookie = loadOptions;

function getCookies()
{
	var cookieList = document.cookie.split(';');
	var i,cookies = {};
	for(i=0; i<cookieList.length; i++) {
		var p = cookieList[i].indexOf('=');
		if(p != -1) {
			var name = cookieList[i].substr(0,p).trim();
			var value = cookieList[i].substr(p+1).trim();
			cookies[name] = value;
		}
	}
	return cookies;
}

function loadCookies()
{
	var i,cookies = getCookies();
	if(cookies['TiddlyWiki']) {
		cookies = cookies['TiddlyWiki'].decodeHashMap();
	}
	for(i in cookies) {
		if(config.optionsSource[i] != 'setting') {
			setOption(i,cookies[i]);
		}
	}
}

function loadSystemSettings()
{
	var key,settings = store.calcAllSlices('SystemSettings');
	config.optionsSource = {};
	for(key in settings) {
		setOption(key,settings[key]);
		config.optionsSource[key] = 'setting';
	}
}

function onSystemSettingsChange()
{
	if(!startingUp) {
		loadSystemSettings();
	}
}

function saveOption(name)
{
	if(safeMode)
		return;
	if(name.match(/[()\s]/g, '_')) {
		alert(config.messages.invalidCookie.format([name]));
		return;
	}
	saveCookie(name);
	if(config.optionsSource[name] == 'setting') {
		saveSystemSetting(name,true);
	}
}
// @Deprecated; retained for backwards compatibility
var saveOptionCookie = saveOption;

function removeCookie(name)
{
	document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';
}

function saveCookie(name)
{
	var key,cookies = {};
	for(key in config.options) {
		var value = getOption(key);
		value = value == null ? 'false' : value;
		cookies[key] = value;
	}
	document.cookie = 'TiddlyWiki=' + String.encodeHashMap(cookies) + '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';
	cookies = getCookies();
	var c;
	for(c in cookies) {
		var optType = c.substr(0,3);
		if(config.optionHandlers[optType])
			removeCookie(c);
	}
}

var systemSettingSave;
function commitSystemSettings(storeWasDirty)
{
	if(systemSettingSave) {
		window.clearTimeout(systemSettingSave);
	}
	systemSettingSave = window.setTimeout(function() {
		var tiddler = store.getTiddler('SystemSettings');
		if(storeWasDirty == false && story.areAnyDirty() == false) {
			saveChanges(null,[tiddler]);
		} else {
			autoSaveChanges(null,[tiddler]);
		}
	}, 1000);
}

function saveSystemSetting(name,saveFile)
{
	var title = 'SystemSettings';
	var slice = store.getTiddlerSlice(title,name);
	if(readOnly || slice === getOption(name)) {
		return; //# don't save if read-only or the option hasn't changed
	}
	var slices = store.calcAllSlices(title);
	var key;
	for(key in config.optionsSource) {
		var value = getOption(key) || '';
		if(slices[key] !== value) {
			slices[key] = value;
		}
	}
	var text = [];
	for(key in slices) {
		text.push('%0: %1'.format([key,slices[key]]));
	}
	text = text.sort().join('\n');
	var storeWasDirty = store.isDirty();
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.text = text;
		tiddler = store.saveTiddler(tiddler);
	} else {
		tiddler = store.saveTiddler(title,title,text,'System',new Date(),['excludeLists'],config.defaultCustomFields);
	}
	if(saveFile) {
		commitSystemSettings(storeWasDirty);
	}
}

function encodeCookie(s)
{
	return escape(convertUnicodeToHtmlEntities(s));
}

function decodeCookie(s)
{
	s = unescape(s);
	var re = /&#[0-9]{1,5};/g;
	return s.replace(re,function($0) {return String.fromCharCode(eval($0.replace(/[&#;]/g,'')));});
}

config.macros.option.genericCreate = function(place,type,opt,className,desc)
{
	var typeInfo = config.macros.option.types[type];
	var c = document.createElement(typeInfo.elementType);
	if(typeInfo.typeValue)
		c.setAttribute('type',typeInfo.typeValue);
	c[typeInfo.eventName] = typeInfo.onChange;
	c.setAttribute('option',opt);
	c.className = className || typeInfo.className;
	if(config.optionsDesc[opt])
		c.setAttribute('title',config.optionsDesc[opt]);
	place.appendChild(c);
	if(desc != 'no')
		createTiddlyText(place,config.optionsDesc[opt] || opt);
	c[typeInfo.valueField] = config.options[opt];
	return c;
};

config.macros.option.genericOnChange = function(e)
{
	var opt = this.getAttribute('option');
	if(opt) {
		var optType = opt.substr(0,3);
		var handler = config.macros.option.types[optType];
		if(handler.elementType && handler.valueField)
			config.macros.option.propagateOption(opt,handler.valueField,this[handler.valueField],handler.elementType,this);
	}
	return true;
};

config.macros.option.types = {
	'txt': {
		elementType: 'input',
		valueField: 'value',
		eventName: 'onchange',
		className: 'txtOptionInput',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	},
	'chk': {
		elementType: 'input',
		valueField: 'checked',
		eventName: 'onclick',
		className: 'chkOptionInput',
		typeValue: 'checkbox',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	}
};

config.macros.option.propagateOption = function(opt,valueField,value,elementType,elem)
{
	config.options[opt] = value;
	saveOption(opt);
	var t,nodes = document.getElementsByTagName(elementType);
	for(t=0; t<nodes.length; t++) {
		var optNode = nodes[t].getAttribute('option');
		if(opt == optNode && nodes[t]!=elem)
			nodes[t][valueField] = value;
	}
};

config.macros.option.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params,'name',null);
	var className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params,'class',null);
	var desc = getParam(params,'desc','no');
	var type = opt.substr(0,3);
	var h = config.macros.option.types[type];
	if(h && h.create)
		h.create(place,type,opt,className,desc);
};

config.macros.options.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var showUnknown = getParam(params,'showUnknown','no');
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement('markList');
	var chkUnknown = wizard.getElement('chkUnknown');
	chkUnknown.checked = showUnknown == 'yes';
	chkUnknown.onchange = this.onChangeUnknown;
	var listWrapper = document.createElement('div');
	markList.parentNode.insertBefore(listWrapper,markList);
	wizard.setValue('listWrapper',listWrapper);
	this.refreshOptions(listWrapper,showUnknown == 'yes');
};

config.macros.options.refreshOptions = function(listWrapper,showUnknown)
{
	var n,opts = [];
	for(n in config.options) {
		var opt = {};
		opt.option = '';
		opt.name = n;
		opt.lowlight = !config.optionsDesc[n];
		opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
		if(!opt.lowlight || showUnknown)
			opts.push(opt);
	}
	opts.sort(function(a,b) {return a.name.substr(3) < b.name.substr(3) ? -1 : (a.name.substr(3) == b.name.substr(3) ? 0 : +1);});
	ListView.create(listWrapper,opts,this.listViewTemplate);
	for(n=0; n<opts.length; n++) {
		var type = opts[n].name.substr(0,3);
		var h = config.macros.option.types[type];
		if(h && h.create) {
			h.create(opts[n].colElements['option'],type,opts[n].name,null,'no');
		}
	}
};

config.macros.options.onChangeUnknown = function(e)
{
	var wizard = new Wizard(this);
	var listWrapper = wizard.getValue('listWrapper');
	jQuery(listWrapper).empty();
	config.macros.options.refreshOptions(listWrapper,this.checked);
	return false;
};

//--
//-- Saving
//--

var saveUsingSafari = false;

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var startSaveAreaRE = /<((div)|(DIV)) ((id)|(ID))=["']?storeArea['"]?>/; // Used for IE6
var endSaveArea = '</d' + 'iv>';
var endSaveAreaCaps = '</D' + 'IV>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	if((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))
		return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
	}
}

function updateLanguageAttribute(s)
{
	if(config.locale) {
		var mRE = /(<html(?:.*?)?)(?: xml:lang\="([a-z]+)")?(?: lang\="([a-z]+)")?>/;
		var m = mRE.exec(s);
		if(m) {
			var t = m[1];
			if(m[2])
				t += ' xml:lang="' + config.locale + '"';
			if(m[3])
				t += ' lang="' + config.locale + '"';
			t += ">";
			s = s.substr(0,m.index) + t + s.substr(m.index+m[0].length);
		}
	}
	return s;
}

function updateMarkupBlock(s,blockName,tiddlerName)
{
	return s.replaceChunk(
			"<!--%0-START-->".format([blockName]),
			"<!--%0-END-->".format([blockName]),
			"\n" + convertUnicodeToFileFormat(store.getRecursiveTiddlerText(tiddlerName,"")) + "\n");
}

function updateOriginal(original,posDiv,localPath)
{
	if(!posDiv)
		posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(config.messages.invalidFileError.format([localPath]));
		return null;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + "\n" +
				convertUnicodeToFileFormat(store.allTiddlersAsHtml()) + "\n" +
				original.substr(posDiv[1]);
	var newSiteTitle = convertUnicodeToFileFormat(getPageTitle()).htmlEncode();
	revised = revised.replaceChunk("<title"+">","</title"+">"," " + newSiteTitle + " ");
	revised = updateLanguageAttribute(revised);
	revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
	revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
	revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
	revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
	return revised;
}

function locateStoreArea(original)
{
	// Locate the storeArea divs
	if(!original)
		return null;
	var posOpeningDiv = original.search(startSaveAreaRE);
	var limitClosingDiv = original.indexOf("<"+"!--POST-STOREAREA--"+">");
	if(limitClosingDiv == -1)
		limitClosingDiv = original.indexOf("<"+"!--POST-BODY-START--"+">");
	var start = limitClosingDiv == -1 ? original.length : limitClosingDiv;
	var posClosingDiv = original.lastIndexOf(endSaveArea,start);
	if(posClosingDiv == -1)
		posClosingDiv = original.lastIndexOf(endSaveAreaCaps,start);
	return (posOpeningDiv != -1 && posClosingDiv != -1) ? [posOpeningDiv,posClosingDiv] : null;
}

function autoSaveChanges(onlyIfDirty,tiddlers)
{
	if(config.options.chkAutoSave)
		saveChanges(onlyIfDirty,tiddlers);
}

function loadOriginal(localPath)
{
	return loadFile(localPath);
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty,tiddlers)
{
	if(onlyIfDirty && !store.isDirty())
		return;
	clearMessage();
	var t0 = new Date();
	var msg = config.messages;
	var originalPath = document.location.toString();
	if(originalPath.substr(0,5) != "file:") {
		alert(msg.notFileUrlError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var localPath = getLocalPath(originalPath);
	var original = loadOriginal(localPath);
	if(original == null) {
		alert(msg.cantSaveError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(msg.invalidFileError.format([localPath]));
		return;
	}
	saveMain(localPath,original,posDiv);
	if(config.options.chkSaveBackups)
		saveBackup(localPath,original);
	if(config.options.chkSaveEmptyTemplate)
		saveEmpty(localPath,original,posDiv);
	if(config.options.chkGenerateAnRssFeed && saveRss instanceof Function)
		saveRss(localPath);
	if(config.options.chkDisplayInstrumentation)
		displayMessage("saveChanges " + (new Date()-t0) + " ms");
}

function saveMain(localPath,original,posDiv)
{
	var save;
	try {
		var revised = updateOriginal(original,posDiv,localPath);
		save = saveFile(localPath,revised);
	} catch (ex) {
		showException(ex);
	}
	if(save) {
		displayMessage(config.messages.mainSaved,"file://" + localPath);
		store.setDirty(false);
	} else {
		alert(config.messages.mainFailed);
	}
}

function saveBackup(localPath,original)
{
	var backupPath = getBackupPath(localPath);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(backup)
		displayMessage(config.messages.backupSaved,"file://" + backupPath);
	else
		alert(config.messages.backupFailed);
}

function saveEmpty(localPath,original,posDiv)
{
	var emptyPath,p;
	if((p = localPath.lastIndexOf("/")) != -1)
		emptyPath = localPath.substr(0,p) + "/";
	else if((p = localPath.lastIndexOf("\\")) != -1)
		emptyPath = localPath.substr(0,p) + "\\";
	else
		emptyPath = localPath + ".";
	emptyPath += "empty.html";
	var empty = original.substr(0,posDiv[0] + startSaveArea.length) + original.substr(posDiv[1]);
	var emptySave = saveFile(emptyPath,empty);
	if(emptySave)
		displayMessage(config.messages.emptySaved,"file://" + emptyPath);
	else
		alert(config.messages.emptyFailed);
}

function getLocalPath(origPath)
{
	var originalPath = convertUriToUTF8(origPath,config.options.txtFileSystemCharSet);
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0,argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0,hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");
	return localPath;
}

function getBackupPath(localPath,title,extension)
{
	var slash = "\\";
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1) {
		dirPathPos = localPath.lastIndexOf("/");
		slash = "/";
	}
	var backupFolder = config.options.txtBackupFolder;
	if(!backupFolder || backupFolder == "")
		backupFolder = ".";
	var backupPath = localPath.substr(0,dirPathPos) + slash + backupFolder + localPath.substr(dirPathPos);
	backupPath = backupPath.substr(0,backupPath.lastIndexOf(".")) + ".";
	if(title)
		backupPath += title.replace(/[\\\/\*\?\":<> ]/g,"_") + ".";
	backupPath += (new Date()).convertToYYYYMMDDHHMMSSMMM() + "." + (extension || "html");
	return backupPath;
}

//--
//-- RSS Saving
//--

function saveRss(localPath)
{
	var rssPath = localPath.substr(0,localPath.lastIndexOf(".")) + ".xml";
	if(saveFile(rssPath,convertUnicodeToFileFormat(generateRss())))
		displayMessage(config.messages.rssSaved,"file://" + rssPath);
	else
		alert(config.messages.rssFailed);
}

tiddlerToRssItem = function(tiddler,uri)
{
	var s = "<title" + ">" + tiddler.title.htmlEncode() + "</title" + ">\n";
	s += "<description>" + wikifyStatic(tiddler.text,null,tiddler).htmlEncode() + "</description>\n";
	var i;
	for(i=0; i<tiddler.tags.length; i++)
		s += "<category>" + tiddler.tags[i] + "</category>\n";
	s += "<link>" + uri + "#" + encodeURIComponent(String.encodeTiddlyLink(tiddler.title)) + "</link>\n";
	s +="<pubDate>" + tiddler.modified.toGMTString() + "</pubDate>\n";
	return s;
};

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlainText(store.getTiddlerText("SiteTitle",""),null,tiddler).htmlEncode() + "</title" + ">");
	if(u)
		s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlainText(store.getTiddlerText("SiteSubtitle",""),null,tiddler).htmlEncode() + "</description>");
	s.push("<language>" + config.locale + "</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + formatVersion() + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified","excludeLists");
	var i,n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length-config.numRssItems;
	for(i=tiddlers.length-1; i>=n; i--) {
		s.push("<item>\n" + tiddlerToRssItem(tiddlers[i],u) + "\n</item>");
	}
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}

//--
//-- Filesystem code
//--

function convertUTF8ToUnicode(u)
{
	return config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);
}

function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length) {
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80) {
			dst++;
		} else if(b1 < 0xE0) {
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		} else {
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		}
	}
	return uni;
}

function mozConvertUTF8ToUnicode(u)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUTF8ToUnicode(u);
	} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return fin.length > 0 ? s+fin : s;
}

function convertUnicodeToFileFormat(s)
{
	return config.browser.isOpera || !window.netscape ? (config.browser.isIE ? convertUnicodeToHtmlEntities(s) : s) : mozConvertUnicodeToUTF8(s);
}

function convertUnicodeToHtmlEntities(s)
{
	var re = /[^\u0000-\u007F]/g;
	return s.replace(re,function($0) {return "&#" + $0.charCodeAt(0).toString() + ";";});
}

function convertUnicodeToUTF8(s)
{
// return convertUnicodeToFileFormat to allow plugin migration
	return convertUnicodeToFileFormat(s);
}

function manualConvertUnicodeToUTF8(s)
{
	return unescape(encodeURIComponent(s));
}

function mozConvertUnicodeToUTF8(s)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUnicodeToUTF8(s);
	} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	return fin.length > 0 ? u + fin : u;
}

function convertUriToUTF8(uri,charSet)
{
	if(window.netscape == undefined || charSet == undefined || charSet == "")
		return uri;
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/utf8converterservice;1"].getService(Components.interfaces.nsIUTF8ConverterService);
	} catch(ex) {
		return uri;
	}
	return converter.convertURISpecToUTF8(uri,charSet);
}

function copyFile(dest,source)
{
	return config.browser.isIE ? ieCopyFile(dest,source) : false;
}

function saveFile(fileUrl,content)
{
	var r = mozillaSaveFile(fileUrl,content);
	if(!r)
		r = ieSaveFile(fileUrl,content);
	if(!r)
		r = javaSaveFile(fileUrl,content);
	return r;
}

function loadFile(fileUrl)
{
	var r = mozillaLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = ieLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = javaLoadFile(fileUrl);
	return r;
}

function ieCreatePath(path)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}

	var pos = path.lastIndexOf("\\");
	if(pos==-1)
		pos = path.lastIndexOf("/");
	if(pos!=-1)
		path = path.substring(0,pos+1);

	var scan = [path];
	var parent = fso.GetParentFolderName(path);
	while(parent && !fso.FolderExists(parent)) {
		scan.push(parent);
		parent = fso.GetParentFolderName(parent);
	}

	for(i=scan.length-1;i>=0;i--) {
		if(!fso.FolderExists(scan[i])) {
			fso.CreateFolder(scan[i]);
		}
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath,content)
{
	ieCreatePath(filePath);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return true;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
	} catch(ex) {
		return null;
	}
	return content;
}

function ieCopyFile(dest,source)
{
	ieCreatePath(dest);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		fso.GetFile(source).Copy(dest);
	} catch(ex) {
		return false;
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath,content)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				file.create(0,0x01B4);// 0x01B4 = 0664
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file,0x22,0x04,null);
			out.write(content,content.length);
			out.flush();
			out.close();
			return true;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				return null;
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file,0x01,0x04,null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			var contents = sInputStream.read(sInputStream.available());
			sInputStream.close();
			inputStream.close();
			return contents;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	return i > 0 ? url.substring(i-1) : url;
}

function javaSaveFile(filePath,content)
{
	try {
		if(document.applets["TiddlySaver"])
			return document.applets["TiddlySaver"].saveFile(javaUrlToFilename(filePath),"UTF-8",content);
	} catch(ex) {
	}
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex2) {
		return null;
	}
	return true;
}

function javaLoadFile(filePath)
{
	try {
		if(document.applets["TiddlySaver"]) {
			var ret = document.applets["TiddlySaver"].loadFile(javaUrlToFilename(filePath),"UTF-8");
			if(!ret)
				return null;
			return String(ret);
		}
	} catch(ex) {
	}
	var content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			content.push(String(line));
		r.close();
	} catch(ex2) {
		return null;
	}
	return content.join("\n");
}

//--
//-- Server adaptor base class
//--

function AdaptorBase()
{
	this.host = null;
	this.store = null;
	return this;
}

AdaptorBase.prototype.close = function()
{
	return true;
};

AdaptorBase.prototype.fullHostName = function(host)
{
	if(!host)
		return '';
	host = host.trim();
	if(!host.match(/:\/\//))
		host = 'http://' + host;
	if(host.substr(host.length-1) == '/')
		host = host.substr(0,host.length-1);
	return host;
};

AdaptorBase.minHostName = function(host)
{
	return host;
};

AdaptorBase.prototype.setContext = function(context,userParams,callback)
{
	if(!context) context = {};
	context.userParams = userParams;
	if(callback) context.callback = callback;
	context.adaptor = this;
	if(!context.host)
		context.host = this.host;
	context.host = this.fullHostName(context.host);
	if(!context.workspace)
		context.workspace = this.workspace;
	return context;
};

// Open the specified host
AdaptorBase.prototype.openHost = function(host,context,userParams,callback)
{
	this.host = host;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {context.callback(context,userParams);},10);
	return true;
};

// Open the specified workspace
AdaptorBase.prototype.openWorkspace = function(workspace,context,userParams,callback)
{
	this.workspace = workspace;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

//--
//-- Server adaptor for talking to static TiddlyWiki files
//--

function FileAdaptor()
{
}

FileAdaptor.prototype = new AdaptorBase();

FileAdaptor.serverType = 'file';
FileAdaptor.serverLabel = 'TiddlyWiki';

FileAdaptor.loadTiddlyWikiSuccess = function(context,jqXHR)
{
	context.status = true;
	context.adaptor.store = new TiddlyWiki();
	if(!context.adaptor.store.importTiddlyWiki(jqXHR.responseText)) {
		context.statusText = config.messages.invalidFileError.format([context.host]);
		context.status = false;
	}
	context.complete(context,context.userParams);
};

FileAdaptor.loadTiddlyWikiError = function(context,jqXHR)
{
	context.status = false;
	context.statusText = jqXHR.message;
	context.complete(context,context.userParams);
};

// Get the list of workspaces on a given server
FileAdaptor.prototype.getWorkspaceList = function(context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.workspaces = [{title:"(default)"}];
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

// Gets the list of tiddlers within a given workspace
FileAdaptor.prototype.getTiddlerList = function(context,userParams,callback,filter)
{
	context = this.setContext(context,userParams,callback);
	if(!context.filter)
		context.filter = filter;
	context.complete = FileAdaptor.getTiddlerListComplete;
	if(this.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			context.xhr = jqXHR;
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerListComplete = function(context,userParams)
{
	if(context.status) {
		if(context.filter) {
			context.tiddlers = context.adaptor.store.filterTiddlers(context.filter);
		} else {
			context.tiddlers = [];
			context.adaptor.store.forEachTiddler(function(title,tiddler) {context.tiddlers.push(tiddler);});
		}
		var i;
		for(i=0; i<context.tiddlers.length; i++) {
			context.tiddlers[i].fields['server.type'] = FileAdaptor.serverType;
			context.tiddlers[i].fields['server.host'] = AdaptorBase.minHostName(context.host);
			context.tiddlers[i].fields['server.page.revision'] = context.tiddlers[i].modified.convertToYYYYMMDDHHMM();
		}
		context.status = true;
	}
	if(context.callback) {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.generateTiddlerInfo = function(tiddler)
{
	var info = {};
	info.uri = tiddler.fields['server.host'] + "#" + tiddler.title;
	return info;
};

// Retrieve a tiddler from a given workspace on a given server
FileAdaptor.prototype.getTiddler = function(title,context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.title = title;
	context.complete = FileAdaptor.getTiddlerComplete;
	if(context.adaptor.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerComplete = function(context,userParams)
{
	var t = context.adaptor.store.fetchTiddler(context.title);
	if(t) {
		t.fields['server.type'] = FileAdaptor.serverType;
		t.fields['server.host'] = AdaptorBase.minHostName(context.host);
		t.fields['server.page.revision'] = t.modified.convertToYYYYMMDDHHMM();
		context.tiddler = t;
		context.status = true;
	} else { //# tiddler does not exist in document
		context.status = false;
	}
	if(context.allowSynchronous) {
		context.isSynchronous = true;
		context.callback(context,userParams);
	} else {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.close = function()
{
	this.store = null;
};

config.adaptors[FileAdaptor.serverType] = FileAdaptor;

config.defaultAdaptor = FileAdaptor.serverType;

//--
//-- HTTP request code
//--

function ajaxReq(args)
{
	if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	return jQuery.ajax(args);
}

function httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache)
{
	var httpSuccess = function(xhr) {
		try {
			// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
			return (!xhr.status && location.protocol === "file:") ||
				(xhr.status >= 200 && xhr.status < 300) ||
				xhr.status === 304 || xhr.status === 1223;
		} catch(e) {}
		return false;
	};

	var options = {
		type:type,
		url:url,
		processData:false,
		data:data,
		cache:!!allowCache,
		beforeSend: function(xhr) {
			var i;
			for(i in headers)
				xhr.setRequestHeader(i,headers[i]);
			xhr.setRequestHeader("X-Requested-With", "TiddlyWiki " + formatVersion());
		}
	};

	if(callback) {
		options.complete = function(xhr,textStatus) {
			if(httpSuccess(xhr))
				callback(true,params,xhr.responseText,url,xhr);
			else
				callback(false,params,null,url,xhr);
		};
	}
	if(contentType)
		options.contentType = contentType;
	if(username)
		options.username = username;
	if(password)
		options.password = password;
	if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	return jQuery.ajax(options);
}
//--
//-- TiddlyWiki-specific utility functions
//--

// Returns TiddlyWiki version string
function formatVersion(v)
{
	v = v || version;
	return v.major + "." + v.minor + "." + v.revision +
		(v.alpha ? " (alpha " + v.alpha + ")" : "") +
		(v.beta ? " (beta " + v.beta + ")" : "");
}

function compareVersions(v1,v2)
{
	var x1,x2,i,a = ["major","minor","revision"];
	for(i = 0; i<a.length; i++) {
		x1 = v1[a[i]] || 0;
		x2 = v2[a[i]] || 0;
		if(x1<x2)
			return 1;
		if(x1>x2)
			return -1;
	}
	x1 = v1.beta || 9999;
	x2 = v2.beta || 9999;
	if(x1<x2)
		return 1;
	return x1 > x2 ? -1 : 0;
}

function merge(dst,src,preserveExisting)
{
	var i;
	for(i in src) {
		if(!preserveExisting || dst[i] === undefined)
			dst[i] = src[i];
	}
	return dst;
}

// Resolve the target object of an event
function resolveTarget(e)
{
	var obj;
	if(e.target)
		obj = e.target;
	else if(e.srcElement)
		obj = e.srcElement;
	if(obj.nodeType == 3) // defeat Safari bug
		obj = obj.parentNode;
	return obj;
}

// Returns a string containing the description of an exception, optionally prepended by a message
function exceptionText(e,message)
{
	var s = e.description || e.toString();
	return message ? "%0:\n%1".format([message,s]) : s;
}

// Displays an alert of an exception description with optional message
function showException(e,message)
{
	alert(exceptionText(e,message));
}

function alertAndThrow(m)
{
	alert(m);
	throw(m);
}

function glyph(name)
{
	var g = config.glyphs;
	var b = g.currBrowser;
	if(b == null) {
		b = 0;
		while(b < g.browsers.length-1 && !g.browsers[b]())
			b++;
		g.currBrowser = b;
	}
	if(!g.codes[name])
		return "";
	return g.codes[name][b];
}

function createTiddlyText(parent,text)
{
	return parent.appendChild(document.createTextNode(text));
}

function createTiddlyCheckbox(parent,caption,checked,onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type","checkbox");
	cb.onclick = onChange;
	parent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption,parent);
	return cb;
}

function createTiddlyElement(parent,element,id,className,text,attribs)
{
	var n,e = document.createElement(element);
	if(className != null)
		e.className = className;
	if(id != null)
		e.setAttribute("id",id);
	if(text != null)
		e.appendChild(document.createTextNode(text));
	if(attribs) {
		for(n in attribs) {
			e.setAttribute(n,attribs[n]);
		}
	}
	if(parent != null)
		parent.appendChild(e);
	return e;
}

function createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)
{
	var i,btn = document.createElement("a");
	btn.setAttribute("href","javascript:;");
	if(action) {
		btn.onclick = action;
	}
	if(tooltip)
		btn.setAttribute("title",tooltip);
	if(text)
		btn.appendChild(document.createTextNode(text));
	btn.className = className || "button";
	if(id)
		btn.id = id;
	if(attribs) {
		for(i in attribs) {
			btn.setAttribute(i,attribs[i]);
		}
	}
	if(parent)
		parent.appendChild(btn);
	if(accessKey)
		btn.setAttribute("accessKey",accessKey);
	return btn;
}

function createExternalLink(place,url,label)
{
	var link = document.createElement("a");
	link.className = "externalLink";
	link.href = url;
	var f = config.messages.externalLinkTooltip;
	link.title = f ? f.format([url]) : url;
	if(config.options.chkOpenInNewWindow)
		link.target = "_blank";
	place.appendChild(link);
	if(label)
		createTiddlyText(link, label);
	return link;
}

function getTiddlyLinkInfo(title,currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler) {
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
	} else {
	    var f;
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title)) {
			f = config.messages.shadowedTiddlerToolTip;
			classes.pushUnique("shadow");
		} else {
			f = config.messages.undefinedTiddlerToolTip;
			classes.remove("shadow");
		}
		subTitle = f ? f.format([title]) : "";
	}
	if(typeof config.annotations[title]=="string")
		subTitle = config.annotations[title];
	return {classes: classes.join(" "),subTitle: subTitle};
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	var link = target;
	var title = null;
	var fields = null;
	var noToggle = null;
	do {
		title = link.getAttribute("tiddlyLink");
		fields = link.getAttribute("tiddlyFields");
		noToggle = link.getAttribute("noToggle");
		link = link.parentNode;
	} while(title == null && link != null);
	if(!store.isShadowTiddler(title)) {
		var f = fields ? fields.decodeHashMap() : {};
		fields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));
	}
	if(title) {
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		if(noToggle)
			toggling = false;
		if(store.getTiddler(title))
			fields = null;
		story.displayTiddler(target,title,null,true,null,fields,toggling);
	}
	clearMessage();
	return false;
}

function createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)
{
	var title = jQuery.trim(title);
	var text = includeText ? title : null;
	var i = getTiddlyLinkInfo(title,className);
	var btn = isStatic ? createExternalLink(place,store.getTiddlerText("SiteUrl",null) + "#" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);
	if(isStatic)
		btn.className += ' ' + className;
	btn.setAttribute("refresh","link");
	btn.setAttribute("tiddlyLink",title);
	if(noToggle)
		btn.setAttribute("noToggle","true");
	if(linkedFromTiddler) {
		var fields = linkedFromTiddler.getInheritedFields();
		if(fields)
			btn.setAttribute("tiddlyFields",fields);
	}
	return btn;
}

function refreshTiddlyLink(e,title)
{
	var i = getTiddlyLinkInfo(title,e.className);
	e.className = i.classes;
	e.title = i.subTitle;
}

function createTiddlyDropDown(place,onchange,options,defaultValue)
{
	var sel = createTiddlyElement(place,"select");
	sel.onchange = onchange;
	var t;
	for(t=0; t<options.length; t++) {
		var e = createTiddlyElement(sel,"option",null,null,options[t].caption);
		e.value = options[t].name;
		if(options[t].name == defaultValue)
			e.selected = true;
	}
	return sel;
}

//--
//-- TiddlyWiki-specific popup utility functions
//--

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(ev)
{
	var tiddlers = store.getTaggedTiddlers(this.getAttribute("tag"));
	var sortby = this.getAttribute("sortby");
	if(sortby&&sortby.length) {
		store.sortTiddlers(tiddlers,sortby);
	}
	story.displayTiddlers(this,tiddlers);
	return false;
}

// Event handler for clicking on a tiddler tag
function onClickTag(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	jQuery(popup).addClass("taggedTiddlerList");
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag) {
		var tagged = tag.indexOf("[")==-1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);
		var sortby = this.getAttribute("sortby");
		if(sortby&&sortby.length) {
			store.sortTiddlers(tagged,sortby);
		}
		var titles = [];
		var r;
		for(r=0;r<tagged.length;r++) {
			if(tagged[r].title != title)
				titles.push(tagged[r].title);
		}
		var lingo = config.views.wikified.tag;
		if(titles.length > 0) {
			var openAll = createTiddlyButton(createTiddlyElement(popup,"li"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);
			openAll.setAttribute("tag",tag);
			openAll.setAttribute("sortby",sortby);
			createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
			for(r=0; r<titles.length; r++) {
				createTiddlyLink(createTiddlyElement(popup,"li"),titles[r],true);
			}
		} else {
			createTiddlyElement(popup,"li",null,"disabled",lingo.popupNone.format([tag]));
		}
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var h = createTiddlyLink(createTiddlyElement(popup,"li"),tag,false);
		createTiddlyText(h,lingo.openTag.format([tag]));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place,tag,excludeTiddler,title,tooltip)
{
	var btn = createTiddlyButton(place,title||tag,(tooltip||config.views.wikified.tag.tooltip).format([tag]),onClickTag);
	btn.setAttribute("tag",tag);
	if(excludeTiddler)
		btn.setAttribute("tiddler",excludeTiddler);
	return btn;
}

function onClickTiddlyPopup(ev)
{
	var e = ev || window.event;
	var tiddler = this.tiddler;
	if(tiddler.text) {
		var popup = Popup.create(this,"div","popupTiddler");
		wikify(tiddler.text,popup,null,tiddler);
		Popup.show();
	}
	if(e) e.cancelBubble = true;
	if(e && e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyPopup(place,caption,tooltip,tiddler)
{
	if(tiddler.text) {
		createTiddlyLink(place,caption,true);
		var btn = createTiddlyButton(place,glyph("downArrow"),tooltip,onClickTiddlyPopup,"tiddlerPopupButton");
		btn.tiddler = tiddler;
	} else {
		createTiddlyText(place,caption);
	}
}

function onClickError(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	var t;
	for(t=0; t<lines.length; t++)
		createTiddlyElement(popup,"li",null,null,lines[t]);
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyError(place,title,text)
{
	var btn = createTiddlyButton(place,title,null,onClickError,"errorButton");
	if(text) btn.setAttribute("errorText",text);
}
//-
//- Animation engine
//-

function Animator()
{
	this.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.timerID = 0; // ID of the timer used for animating
	this.animations = []; // List of animations in progress
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() //# Variable number of arguments
{
	var t;
	for(t=0; t<arguments.length; t++)
		this.animations.push(arguments[t]);
	if(this.running == 0) {
		var me = this;
		this.timerID = window.setInterval(function() {me.doAnimate(me);},10);
	}
	this.running += arguments.length;
};

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var a = 0;
	while(a < me.animations.length) {
		var animation = me.animations[a];
		if(animation.tick()) {
			a++;
		} else {
			me.animations.splice(a,1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
		}
	}
};

Animator.slowInSlowOut = function(progress)
{
	return(1-((Math.cos(progress * Math.PI)+1)/2));
};

//--
//-- Morpher animation
//--

// Animate a set of properties of an element
function Morpher(element,duration,properties,callback)
{
	this.element = element;
	this.duration = duration;
	this.properties = properties;
	this.startTime = new Date();
	this.endTime = Number(this.startTime) + duration;
	this.callback = callback;
	this.tick();
	return this;
}

Morpher.prototype.assignStyle = function(element,style,value)
{
	switch(style) {
	case "-tw-vertScroll":
		window.scrollTo(findScrollX(),value);
		break;
	case "-tw-horizScroll":
		window.scrollTo(value,findScrollY());
		break;
	default:
		element.style[style] = value;
		break;
	}
};

Morpher.prototype.stop = function()
{
	var t;
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.atEnd !== undefined) {
			this.assignStyle(this.element,p.style,p.atEnd);
		}
	}
	if(this.callback)
		this.callback(this.element,this.properties);
};

Morpher.prototype.tick = function()
{
	var currTime = Number(new Date());
	var t,progress = Animator.slowInSlowOut(Math.min(1,(currTime-this.startTime)/this.duration));
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.start !== undefined && p.end !== undefined) {
			var template = p.template || "%0";
			switch(p.format) {
			case undefined:
			case "style":
				var v = p.start + (p.end-p.start) * progress;
				this.assignStyle(this.element,p.style,template.format([v]));
				break;
			case "color":
				break;
			}
		}
	}
	if(currTime >= this.endTime) {
		this.stop();
		return false;
	}
	return true;
};

//--
//-- Zoomer animation
//--

function Zoomer(text,startElement,targetElement,unused)
{
	var e = createTiddlyElement(document.body,"div",null,"zoomer");
	createTiddlyElement(e,"div",null,null,text);
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	var p = [
		{style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px'},
		{style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px'},
		{style: 'width', start: Math.min(startElement.scrollWidth,winWidth), end: Math.min(targetElement.scrollWidth,winWidth), template: '%0px', atEnd: 'auto'},
		{style: 'height', start: Math.min(startElement.scrollHeight,winHeight), end: Math.min(targetElement.scrollHeight,winHeight), template: '%0px', atEnd: 'auto'},
		{style: 'fontSize', start: 8, end: 24, template: '%0pt'}
	];
	var c = function(element,properties) {jQuery(element).remove();};
	return new Morpher(e,config.animDuration,p,c);
}

//--
//-- Scroller animation
//--

function Scroller(targetElement)
{
	var p = [{style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)}];
	return new Morpher(targetElement,config.animDuration,p);
}

//--
//-- Slider animation
//--

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element,opening,unused,deleteMode)
{
	element.style.overflow = 'hidden';
	if(opening)
		element.style.height = '0px'; // Resolves a Firefox flashing bug
	element.style.display = 'block';
	var height = element.scrollHeight;
	var p = [];
	var c = null;
	if(opening) {
		p.push({style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto'});
		p.push({style: 'opacity', start: 0, end: 1, template: '%0'});
		p.push({style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)'});
	} else {
		p.push({style: 'height', start: height, end: 0, template: '%0px'});
		p.push({style: 'display', atEnd: 'none'});
		p.push({style: 'opacity', start: 1, end: 0, template: '%0'});
		p.push({style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)'});
		switch(deleteMode) {
		case "all":
			c = function(element,properties) {jQuery(element).remove();};
			break;
		case "children":
			c = function(element,properties) {jQuery(element).empty();};
			break;
		}
	}
	return new Morpher(element,config.animDuration,p,c);
}

//--
//-- Popup menu
//--

var Popup = {
	stack: [] // Array of objects with members root: and popup:
	};

Popup.create = function(root,elem,className)
{
	var stackPosition = this.find(root,"popup");
	Popup.remove(stackPosition+1);
	var popup = createTiddlyElement(document.body,elem || "ol","popup",className || "popup");
	popup.stackPosition = stackPosition;
	Popup.stack.push({root: root, popup: popup});
	return popup;
};

Popup.onDocumentClick = function(ev)
{
	var e = ev || window.event;
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
};

Popup.show = function(valign,halign,offset)
{
	var curr = Popup.stack[Popup.stack.length-1];
	this.place(curr.root,curr.popup,valign,halign,offset);
	jQuery(curr.root).addClass("highlight");
	if(config.options.chkAnimate && anim && typeof Scroller == "function")
		anim.startAnimating(new Scroller(curr.popup));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
};

Popup.place = function(root,popup,valign,halign,offset)
{
	if(!offset)
		offset = {x:0,y:0};
	if(popup.stackPosition >= 0 && !valign && !halign) {
		offset.x = offset.x + root.offsetWidth;
	} else {
		offset.x = (halign == "right") ? offset.x + root.offsetWidth : offset.x;
		offset.y = (valign == "top") ? offset.y : offset.y + root.offsetHeight;
	}
	var rootLeft = findPosX(root);
	var rootTop = findPosY(root);
	var popupLeft = rootLeft + offset.x;
	var popupTop = rootTop + offset.y;
	var winWidth = findWindowWidth();
	if(popup.offsetWidth > winWidth*0.75)
		popup.style.width = winWidth*0.75 + "px";
	var popupWidth = popup.offsetWidth;
	var scrollWidth = winWidth - document.body.offsetWidth;
	if(popupLeft + popupWidth > winWidth - scrollWidth - 1) {
		if(halign == "right")
			popupLeft = popupLeft - root.offsetWidth - popupWidth;
		else
			popupLeft = winWidth - popupWidth - scrollWidth - 1;
	}
	popup.style.left = popupLeft + "px";
	popup.style.top = popupTop + "px";
	popup.style.display = "block";
};

Popup.find = function(e)
{
	var t,pos = -1;
	for(t=this.stack.length-1; t>=0; t--) {
		if(isDescendant(e,this.stack[t].popup))
			pos = t;
	}
	return pos;
};

Popup.remove = function(pos)
{
	if(!pos) pos = 0;
	if(Popup.stack.length > pos) {
		Popup.removeFrom(pos);
	}
};

Popup.removeFrom = function(from)
{
	var t;
	for(t=Popup.stack.length-1; t>=from; t--) {
		var p = Popup.stack[t];
		jQuery(p.root).removeClass("highlight");
		jQuery(p.popup).remove();
	}
	Popup.stack = Popup.stack.slice(0,from);
};

//--
//-- Wizard support
//--

function Wizard(elem)
{
	if(elem) {
		this.formElem = findRelated(elem,"wizard","className");
		this.bodyElem = findRelated(this.formElem.firstChild,"wizardBody","className","nextSibling");
		this.footElem = findRelated(this.formElem.firstChild,"wizardFooter","className","nextSibling");
	} else {
		this.formElem = null;
		this.bodyElem = null;
		this.footElem = null;
	}
}

Wizard.prototype.setValue = function(name,value)
{
	jQuery(this.formElem).data(name, value);
};

Wizard.prototype.getValue = function(name)
{
	return this.formElem ? jQuery(this.formElem).data(name) : null;
};

Wizard.prototype.createWizard = function(place,title)
{
	this.formElem = createTiddlyElement(place,"form",null,"wizard");
	createTiddlyElement(this.formElem,"h1",null,null,title);
	this.bodyElem = createTiddlyElement(this.formElem,"div",null,"wizardBody");
	this.footElem = createTiddlyElement(this.formElem,"div",null,"wizardFooter");
	return this.formElem;
};

Wizard.prototype.clear = function()
{
	jQuery(this.bodyElem).empty();
};

Wizard.prototype.setButtons = function(buttonInfo,status)
{
	jQuery(this.footElem).empty();
	var t;
	for(t=0; t<buttonInfo.length; t++) {
		createTiddlyButton(this.footElem,buttonInfo[t].caption,buttonInfo[t].tooltip,buttonInfo[t].onClick);
		insertSpacer(this.footElem);
		}
	if(typeof status == "string") {
		createTiddlyElement(this.footElem,"span",null,"status",status);
	}
};

Wizard.prototype.addStep = function(stepTitle,html)
{
	jQuery(this.bodyElem).empty();
	var w = createTiddlyElement(this.bodyElem,"div");
	createTiddlyElement(w,"h2",null,null,stepTitle);
	var step = createTiddlyElement(w,"div",null,"wizardStep");
	step.innerHTML = html;
	applyHtmlMacros(step,tiddler);
};

Wizard.prototype.getElement = function(name)
{
	return this.formElem.elements[name];
};

//--
//-- ListView gadget
//--

var ListView = {};

// Create a listview
ListView.create = function(place,listObject,listTemplate,callback,className)
{
	var table = createTiddlyElement(place,"table",null,className || "listView twtable");
	var thead = createTiddlyElement(table,"thead");
	var t,r = createTiddlyElement(thead,"tr");
	for(t=0; t<listTemplate.columns.length; t++) {
		var columnTemplate = listTemplate.columns[t];
		var c = createTiddlyElement(r,"th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader) {
			colType.createHeader(c,columnTemplate,t);
			if(columnTemplate.className)
				jQuery(c).addClass(columnTemplate.className);
		}
	}
	var rc,tbody = createTiddlyElement(table,"tbody");
	for(rc=0; rc<listObject.length; rc++) {
		var rowObject = listObject[rc];
		r = createTiddlyElement(tbody,"tr");
		for(c=0; c<listTemplate.rowClasses.length; c++) {
			if(rowObject[listTemplate.rowClasses[c].field])
				jQuery(r).addClass(listTemplate.rowClasses[c].className);
		}
		rowObject.rowElement = r;
		rowObject.colElements = {};
		var cc;
		for(cc=0; cc<listTemplate.columns.length; cc++) {
			c = createTiddlyElement(r,"td");
			columnTemplate = listTemplate.columns[cc];
			var field = columnTemplate.field;
			colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem) {
				colType.createItem(c,rowObject,field,columnTemplate,cc,rc);
				if(columnTemplate.className)
					jQuery(c).addClass(columnTemplate.className);
			}
			rowObject.colElements[field] = c;
		}
	}
	if(callback && listTemplate.actions)
		createTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);
	if(callback && listTemplate.buttons) {
		for(t=0; t<listTemplate.buttons.length; t++) {
			var a = listTemplate.buttons[t];
			if(a && a.name != "")
				createTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));
		}
	}
	return table;
};

ListView.getCommandHandler = function(callback,name,allowEmptySelection)
{
	return function(e) {
		var view = findRelated(this,"TABLE",null,"previousSibling");
		var tiddlers = [];
		ListView.forEachSelector(view,function(e,rowName) {
					if(e.checked)
						tiddlers.push(rowName);
					});
		if(tiddlers.length == 0 && !allowEmptySelection) {
			alert(config.messages.nothingSelected);
		} else {
			if(this.nodeName.toLowerCase() == "select") {
				callback(view,this.value,tiddlers);
				this.selectedIndex = 0;
			} else {
				callback(view,name,tiddlers);
			}
		}
	};
};

// Invoke a callback for each selector checkbox in the listview
ListView.forEachSelector = function(view,callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var t,hadOne = false;
	for(t=0; t<checkboxes.length; t++) {
		var cb = checkboxes[t];
		if(cb.getAttribute("type") == "checkbox") {
			var rn = cb.getAttribute("rowName");
			if(rn) {
				callback(cb,rn);
				hadOne = true;
			}
		}
	}
	return hadOne;
};

ListView.getSelectedRows = function(view)
{
	var rowNames = [];
	ListView.forEachSelector(view,function(e,rowName) {
				if(e.checked)
					rowNames.push(rowName);
				});
	return rowNames;
};

ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyText(place,columnTemplate.title);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v);
		}
};

ListView.columnTypes.WikiText = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				wikify(v,place,null,null);
		}
};

ListView.columnTypes.Tiddler = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined && v.title)
				createTiddlyPopup(place,v.title,config.messages.listView.tiddlerTooltip,v);
		}
};

ListView.columnTypes.Size = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var msg = config.messages.sizeTemplates;
			var v = listObject[field];
			if(v != undefined) {
				var t = 0;
				while(t<msg.length-1 && v<msg[t].unit)
					t++;
				createTiddlyText(place,msg[t].template.format([Math.round(v/msg[t].unit)]));
			}
		}
};

ListView.columnTypes.Link = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			var c = columnTemplate.text;
			if(v != undefined)
				createExternalLink(place,v,c || v);
		}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v.formatString(columnTemplate.dateFormat));
		}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var t;
				for(t=0; t<v.length; t++) {
					createTiddlyText(place,v[t]);
					createTiddlyElement(place,"br");
				}
			}
		}
};

ListView.columnTypes.Selector = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyCheckbox(place,null,false,this.onHeaderChange);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],null);
			e.setAttribute("rowName",listObject[columnTemplate.rowName]);
		},
	onHeaderChange: function(e)
		{
			var state = this.checked;
			var view = findRelated(this,"TABLE");
			if(!view)
				return;
			ListView.forEachSelector(view,function(e,rowName) {
								e.checked = state;
							});
		}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var tags = listObject[field];
			createTiddlyText(place,String.encodeTiddlyLinkList(tags));
		}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			if(listObject[field] == true)
				createTiddlyText(place,columnTemplate.trueText);
			if(listObject[field] == false)
				createTiddlyText(place,columnTemplate.falseText);
		}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);
			e.setAttribute("tiddler",listObject.title);
			e.setAttribute("tag",columnTemplate.tag);
		},
	onChange : function(e)
		{
			var tag = this.getAttribute("tag");
			var tiddler = this.getAttribute("tiddler");
			store.setTiddlerTag(tiddler,this.checked,tag);
		}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);
				createTiddlyText(link,listObject[field]);
			}
		}
};

//--
//-- Augmented methods for the JavaScript Array() object
//--

// Add indexOf function if browser does not support it
if(!Array.indexOf) {
Array.prototype.indexOf = function(item,from)
{
	if(!from)
		from = 0;
	var i;
	for(i=from; i<this.length; i++) {
		if(this[i] === item)
			return i;
	}
	return -1;
};}

// Find an entry in a given field of the members of an array
Array.prototype.findByField = function(field,value)
{
	var t;
	for(t=0; t<this.length; t++) {
		if(this[t][field] === value)
			return t;
	}
	return null;
};

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value,mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1) {
		if(p == -1)
			this.push(value);
	} else if(mode == -1) {
		if(p != -1)
			this.splice(p,1);
	}
};

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	var i;
	for(i=0; i<items.length; i++) {
		if(this.indexOf(items[i]) != -1)
			return true;
	}
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	var i;
	for(i = 0; i<items.length; i++) {
		if(this.indexOf(items[i]) == -1)
			return false;
	}
	return true;
};

// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item,unique)
{
	if(unique === false) {
		this.push(item);
	} else {
		if(this.indexOf(item) == -1)
			this.push(item);
	}
};

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1)
		this.splice(p,1);
};

if(!Array.prototype.map) {
Array.prototype.map = function(fn,thisObj)
{
	var scope = thisObj || window;
	var i,j,a = [];
	for(i=0, j=this.length; i < j; ++i) {
		a.push(fn.call(scope,this[i],i,this));
	}
	return a;
};}

//--
//-- Augmented methods for the JavaScript String() object
//--

// Get characters from the right end of a string
String.prototype.right = function(n)
{
	return n < this.length ? this.slice(this.length-n) : this;
};

// Trim whitespace from both ends of a string
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g,"");
};

// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var t,s = this.split("-");
	if(s.length > 1) {
		for(t=1; t<s.length; t++)
			s[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);
	}
	return s.join("");
};

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(s)
{
	var substrings = s && s.constructor == Array ? s : arguments;
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var match,r = [];
	do {
		match = subRegExp.exec(this);
		if(match && match[1]) {
			if(match.index > currPos)
				r.push(this.substring(currPos,match.index));
			r.push(substrings[parseInt(match[1],10)]);
			currPos = subRegExp.lastIndex;
		}
	} while(match);
	if(currPos < this.length)
		r.push(this.substring(currPos,this.length));
	return r.join("");
};

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	var s = "\\^$*+?()=!|,{}[].";
	var t,c = this;
	for(t=0; t<s.length; t++)
		c = c.replace(new RegExp("\\" + s.substr(t,1),"g"),"\\" + s.substr(t,1));
	return c;
};

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg,"\\s").replace(/\n/mg,"\\n").replace(/\r/mg,"");
};

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg,"\n").replace(/\\b/mg," ").replace(/\\s/mg,"\\").replace(/\r/mg,"");
};

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return this.replace(/&/mg,"&amp;").replace(/</mg,"&lt;").replace(/>/mg,"&gt;").replace(/\"/mg,"&quot;");
};

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return this.replace(/&lt;/mg,"<").replace(/&gt;/mg,">").replace(/&quot;/mg,"\"").replace(/&amp;/mg,"&");
};

// Parse a space-separated string of name:value parameters
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p) {
		var n;
		if(match[p]) // Double quoted
			n = match[p];
		else if(match[p+1]) // Single quoted
			n = match[p+1];
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try {
				n = match[p+3];
				if(allowEval && config.evaluateMacroParameters != "none") {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval) {
							n = window.restrictedEval(n);
						}
					} else {
						n = window.eval(n);
					}
				}
			} catch(ex) {
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(ex);
			}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
	};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token,"mg") : new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var match;
	do {
		match = re.exec(this);
		if(match) {
			var n = parseToken(match,1);
			if(noNames) {
				r.push({name:"",value:n});
			} else {
				var v = parseToken(match,8);
				if(v == null && defaultName) {
					v = n;
					n = defaultName;
				} else if(v == null && defaultValue) {
					v = defaultValue;
				}
				r.push({name:n,value:v});
				if(cascadeDefaults) {
					defaultName = n;
					defaultValue = v;
				}
			}
		}
	} while(match);
	// Summarise parameters into first element
	var t;
	for(t=1; t<r.length; t++) {
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
	}
	return r;
};

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function(notAllowEval)
{
	var p = this.parseParams("list",null,!notAllowEval,true);
	var t,n = [];
	for(t=1; t<p.length; t++)
		n.push(p[t].value);
	return n;
};

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list",null,false,true);
	var t,n = [];
	for(t=1; t<p.length; t++) {
		if(p[t].value)
			n.pushUnique(p[t].value,unique);
	}
	return n;
};

// Returns array with start and end index of chunk between given start and end marker, or undefined.
String.prototype.getChunkRange = function(start,end)
{
	var s = this.indexOf(start);
	if(s != -1) {
		s += start.length;
		var e = this.indexOf(end,s);
		if(e != -1)
			return [s,e];
	}
};

// Replace a chunk of a string given start and end markers
String.prototype.replaceChunk = function(start,end,sub)
{
	var r = this.getChunkRange(start,end);
	return r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;
};

// Returns a chunk of a string between start and end markers, or undefined
String.prototype.getChunk = function(start,end)
{
	var r = this.getChunkRange(start,end);
	if(r)
		return this.substring(r[0],r[1]);
};


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	return title.indexOf(" ") == -1 ? title : "[[" + title + "]]";
};

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(list) {
		var t,results = [];
		for(t=0; t<list.length; t++)
			results.push(String.encodeTiddlyLink(list[t]));
		return results.join(" ");
	} else {
		return "";
	}
};

// Convert a string as a sequence of name:"value" pairs into a hashmap
String.prototype.decodeHashMap = function()
{
	var fields = this.parseParams("anon","",false);
	var t,r = {};
	for(t=1; t<fields.length; t++)
		r[fields[t].name] = fields[t].value;
	return r;
};

// Static method to encode a hashmap into a name:"value"... string
String.encodeHashMap = function(hashmap)
{
	var t,r = [];
	for(t in hashmap)
		r.push(t + ':"' + hashmap[t] + '"');
	return r.join(" ");
};

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n,d)
{
	var s = n.toString();
	if(s.length < d)
		s = "000000000000000000000000000".substr(0,d-s.length) + s;
	return s;
};

String.prototype.startsWith = function(prefix)
{
	return !prefix || this.substring(0,prefix.length) == prefix;
};

// Returns the first value of the given named parameter.
function getParam(params,name,defaultValue)
{
	if(!params)
		return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
function getFlag(params,name,defaultValue)
{
	return !!getParam(params,name,defaultValue);
}

//--
//-- Augmented methods for the JavaScript Date() object
//--

// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));
	t = t.replace(/hh12/g,this.getHours12());
	t = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));
	t = t.replace(/hh/g,this.getHours());
	t = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);
	t = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));
	t = t.replace(/mm/g,this.getMinutes());
	t = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));
	t = t.replace(/ss/g,this.getSeconds());
	t = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());
	t = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());
	t = t.replace(/wYYYY/g,this.getYearForWeekNo());
	t = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));
	t = t.replace(/YYYY/g,this.getFullYear());
	t = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));
	t = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);
	t = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));
	t = t.replace(/MM/g,this.getMonth()+1);
	t = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));
	t = t.replace(/WW/g,this.getWeek());
	t = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);
	t = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);
	t = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));
	t = t.replace(/DDth/g,this.getDate()+this.daySuffix());
	t = t.replace(/DD/g,this.getDate());
	var tz = this.getTimezoneOffset();
	var atz = Math.abs(tz);
	t = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));
	t = t.replace(/\\/g,"");
	return t;
};

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo
	var n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);
	return Math.floor(n/7)+1;
};

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week
	return dt.getFullYear();
};

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h-12 : ( h > 0 ? h : 12 );
};

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;
};

Date.prototype.daySuffix = function()
{
	return config.messages.dates.daySuffixes[this.getDate()-1];
};

// Convert a date to local YYYYMMDDHHMM string format
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);
};

// Convert a date to UTC YYYYMMDDHHMM string format
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);
};

// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + "." + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +"0";
};

// Static method to create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSS format string
Date.convertFromYYYYMMDDHHMMSS = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string
Date.convertFromYYYYMMDDHHMMSSMMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return new Date(Date.UTC(parseInt(d.substr(0,4),10),
			parseInt(d.substr(4,2),10)-1,
			parseInt(d.substr(6,2),10),
			parseInt(d.substr(8,2)||"00",10),
			parseInt(d.substr(10,2)||"00",10),
			parseInt(d.substr(12,2)||"00",10),
			parseInt(d.substr(14,3)||"000",10)));
};

//--
//-- RGB colour object
//--

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r,g,b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string") {
		if(r.substr(0,1) == "#") {
			if(r.length == 7) {
				this.r = parseInt(r.substr(1,2),16)/255;
				this.g = parseInt(r.substr(3,2),16)/255;
				this.b = parseInt(r.substr(5,2),16)/255;
			} else {
				this.r = parseInt(r.substr(1,1),16)/15;
				this.g = parseInt(r.substr(2,1),16)/15;
				this.b = parseInt(r.substr(3,1),16)/15;
			}
		} else {
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/;
			var c = r.match(rgbPattern);
			if(c) {
				this.r = parseInt(c[1],10)/255;
				this.g = parseInt(c[2],10)/255;
				this.b = parseInt(c[3],10)/255;
			}
		}
	} else {
		this.r = r;
		this.g = g;
		this.b = b;
	}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c,f)
{
	return new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);
};

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var clamp = function(x,min,max) {
		return x < min ? min : (x > max ? max : x);
	};
	return "#" +
			("0" + Math.floor(clamp(this.r,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.g,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.b,0,1) * 255).toString(16)).right(2);
};

//--
//-- DOM utilities - many derived from www.quirksmode.org
//--

function drawGradient(place,horiz,locolors,hicolors)
{
	if(!hicolors)
		hicolors = locolors;
	var t;
	for(t=0; t<= 100; t+=2) {
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? t + "%" : 0;
		bar.style.top = horiz ? 0 : t + "%";
		bar.style.width = horiz ? (101-t) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101-t) + "%";
		bar.style.zIndex = -1;
		var p = t/100*(locolors.length-1);
		var hc = hicolors[Math.floor(p)];
		if(typeof hc == "string")
			hc = new RGB(hc);
		var lc = locolors[Math.ceil(p)];
		if(typeof lc == "string")
			lc = new RGB(lc);
		bar.style.backgroundColor = hc.mix(lc,p-Math.floor(p)).toString();
	}
}

function addEvent(obj,type,fn)
{
	if(obj.attachEvent) {
		obj["e"+type+fn] = fn;
		obj[type+fn] = function(){obj["e"+type+fn](window.event);};
		obj.attachEvent("on"+type,obj[type+fn]);
	} else {
		obj.addEventListener(type,fn,false);
	}
}

function removeEvent(obj,type,fn)
{
	if(obj.detachEvent) {
		obj.detachEvent("on"+type,obj[type+fn]);
		obj[type+fn] = null;
	} else {
		obj.removeEventListener(type,fn,false);
	}
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e,value,name,relative)
{
	name = name || "tagName";
	relative = relative || "parentNode";
	if(name == "className") {
		while(e && !jQuery(e).hasClass(value)) {
			e = e[relative];
		}
	} else {
		while(e && e[name] != value) {
			e = e[relative];
		}
	}
	return e;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop) {
		return posTop;
	} else if(posBot > winBot) {
		if(e.offsetHeight < winHeight)
			return posTop - (winHeight - e.offsetHeight);
		else
			return posTop;
	} else {
		return winTop;
	}
}

// Get the current width of the display window
function findWindowWidth()
{
	return window.innerWidth || document.documentElement.clientWidth;
}

// Get the current height of the display window
function findWindowHeight()
{
	return window.innerHeight || document.documentElement.clientHeight;
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return window.scrollX || document.documentElement.scrollLeft;
}

// Get the current vertical page scroll position
function findScrollY()
{
	return window.scrollY || document.documentElement.scrollTop;
}

function findPosX(obj)
{
	var curleft = 0;
	while(obj.offsetParent) {
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
	}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while(obj.offsetParent) {
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
	}
	return curtop;
}

// Blur a particular element
function blurElement(e)
{
	if(e && e.focus && e.blur) {
		e.focus();
		e.blur();
	}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place)
		place.appendChild(e);
	return e;
}

// Replace the current selection of a textarea or text input and scroll it into view
function replaceSelection(e,text)
{
	if(e.setSelectionRange) {
		var oldpos = e.selectionStart;
		var isRange = e.selectionEnd > e.selectionStart;
		e.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionEnd);
		e.setSelectionRange(isRange ? oldpos : oldpos + text.length,oldpos + text.length);
		var linecount = e.value.split("\n").length;
		var thisline = e.value.substr(0,e.selectionStart).split("\n").length-1;
		e.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);
	} else if(document.selection) {
		var range = document.selection.createRange();
		if(range.parentElement() == e) {
			var isCollapsed = range.text == "";
			range.text = text;
			if(!isCollapsed) {
				range.moveStart("character", -text.length);
				range.select();
			}
		}
	}
}

// Set the caret position in a text area
function setCaretPosition(e,pos)
{
	if(e.selectionStart || e.selectionStart == '0') {
		e.selectionStart = pos;
		e.selectionEnd = pos;
		e.focus();
	} else if(document.selection) {
		// IE support
		e.focus ();
		var sel = document.selection.createRange();
		sel.moveStart('character', -e.value.length);
		sel.moveStart('character',pos);
		sel.moveEnd('character',0);
		sel.select();
	}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var t = "";
	while(e && e.nodeName == "#text") {
		t += e.nodeValue;
		e = e.nextSibling;
	}
	return t;
}

// Returns true if the element e has a given ancestor element
function isDescendant(e,ancestor)
{
	while(e) {
		if(e === ancestor)
			return true;
		e = e.parentNode;
	}
	return false;
}


// deprecate the following...

// Prevent an event from bubbling
function stopEvent(e)
{
	var ev = e || window.event;
	ev.cancelBubble = true;
	if(ev.stopPropagation) ev.stopPropagation();
	return false;
}

// Remove any event handlers or non-primitve custom attributes
function scrubNode(e)
{
	if(!config.browser.isIE)
		return;
	var att = e.attributes;
	if(att) {
		var t;
		for(t=0; t<att.length; t++) {
			var n = att[t].name;
			if(n !== "style" && (typeof e[n] === "function" || (typeof e[n] === "object" && e[n] != null))) {
				try {
					e[n] = null;
				} catch(ex) {
				}
			}
		}
	}
	var c = e.firstChild;
	while(c) {
		scrubNode(c);
		c = c.nextSibling;
	}
}

function setStylesheet(s,id,doc)
{
	jQuery.twStylesheet(s,{id:id,doc:doc});
}

function removeStyleSheet(id)
{
	jQuery.twStylesheet.remove({id:id});
}

//--
//-- LoaderBase and SaverBase
//--

function LoaderBase() {}

LoaderBase.prototype.loadTiddler = function(store,node,tiddlers)
{
	var title = this.getTitle(store,node);
	if(safeMode && store.isShadowTiddler(title))
		return;
	if(title) {
		var tiddler = store.createTiddler(title);
		this.internalizeTiddler(store,tiddler,title,node);
		tiddlers.push(tiddler);
	}
};

LoaderBase.prototype.loadTiddlers = function(store,nodes)
{
	var t,tiddlers = [];
	for(t = 0; t < nodes.length; t++) {
		try {
			this.loadTiddler(store,nodes[t],tiddlers);
		} catch(ex) {
			showException(ex,config.messages.tiddlerLoadError.format([this.getTitle(store,nodes[t])]));
		}
	}
	return tiddlers;
};

function SaverBase() {}

SaverBase.prototype.externalize = function(store)
{
	var results = [];
	var t,tiddlers = store.getTiddlers("title");
	for(t = 0; t < tiddlers.length; t++) {
		if(!tiddlers[t].doNotSave())
			results.push(this.externalizeTiddler(store, tiddlers[t]));
	}
	return results.join("\n");
};

//--
//-- TW21Loader (inherits from LoaderBase)
//--

function TW21Loader() {}

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store,node)
{
	var title = null;
	if(node.getAttribute) {
		title = node.getAttribute("title");
		if(!title)
			title = node.getAttribute("tiddler");
	}
	if(!title && node.id) {
		var lenPrefix = store.idPrefix.length;
		if(node.id.substr(0,lenPrefix) == store.idPrefix)
			title = node.id.substr(lenPrefix);
	}
	return title;
};

TW21Loader.prototype.internalizeTiddler = function(store,tiddler,title,node)
{
	var e = node.firstChild;
	var text = null;
	if(node.getAttribute("tiddler")) {
		text = getNodeText(e).unescapeLineBreaks();
	} else {
		while(e.nodeName!="PRE" && e.nodeName!="pre") {
			e = e.nextSibling;
		}
		text = e.innerHTML.replace(/\r/mg,"").htmlDecode();
	}
	var creator = node.getAttribute("creator");
	var modifier = node.getAttribute("modifier");
	var c = node.getAttribute("created");
	var m = node.getAttribute("modified");
	var created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;
	var modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;
	var tags = node.getAttribute("tags");
	var fields = {};
	var i,attrs = node.attributes;
	for(i = attrs.length-1; i >= 0; i--) {
		var name = attrs[i].name;
		if(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title,text,modifier,modified,tags,created,fields,creator);
	return tiddler;
};

//--
//-- TW21Saver (inherits from SaverBase)
//--

function TW21Saver() {}

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store,tiddler)
{
	try {
		var extendedAttributes = "";
		var usePre = config.options.chkUsePreForStorage;
		store.forEachField(tiddler,
			function(tiddler,fieldName,value) {
				// don't store stuff from the temp namespace
				if(typeof value != "string")
					value = "";
				if(!fieldName.match(/^temp\./))
					extendedAttributes += ' %0="%1"'.format([fieldName,value.escapeLineBreaks().htmlEncode()]);
			},true);
		var created = tiddler.created;
		var modified = tiddler.modified;
		var attributes = tiddler.creator ? ' creator="' + tiddler.creator.htmlEncode() + '"' : "";
		attributes += tiddler.modifier ? ' modifier="' + tiddler.modifier.htmlEncode() + '"' : "";
		attributes += (usePre && created == version.date) ? "" :' created="' + created.convertToYYYYMMDDHHMM() + '"';
		attributes += (usePre && modified == created) ? "" : ' modified="' + modified.convertToYYYYMMDDHHMM() +'"';
		var tags = tiddler.getTags();
		if(!usePre || tags)
			attributes += ' tags="' + tags.htmlEncode() + '"';
		return ('<div %0="%1"%2%3>%4</'+'div>').format([
				usePre ? "title" : "tiddler",
				tiddler.title.htmlEncode(),
				attributes,
				extendedAttributes,
				usePre ? "\n<pre>" + tiddler.text.htmlEncode() + "</pre>\n" : tiddler.text.escapeLineBreaks().htmlEncode()
			]);
	} catch (ex) {
		throw exceptionText(ex,config.messages.tiddlerSaveError.format([tiddler.title]));
	}
};

//]]>
</script>
<script id="jsdeprecatedArea" type="text/javascript">
//<![CDATA[
//--
//-- Deprecated Crypto functions and associated conversion routines.
//-- Use the jQuery.encoding functions directly instead.
//--

// Crypto 'namespace'
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	return jQuery.encoding.strToBe32s(str);
};

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	return jQuery.encoding.be32sToStr(be);
};

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	return jQuery.encoding.be32sToHex(be);
};

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return jQuery.encoding.digests.hexSha1Str(str);
};

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return jQuery.encoding.digests.sha1Str(str);
};

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	return jQuery.encoding.digests.sha1(x,blen);
};

//--
//-- Deprecated code
//--

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output,this.element),this.terminator);
};

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
		var text = lookaheadMatch[1];
		if(config.browser.isIE)
			text = text.replace(/\n/g,"\r");
		createTiddlyElement(w.output,"pre",null,null,text);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
};

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br = {};
config.macros.br.handler = function(place)
{
	createTiddlyElement(place,"br");
};

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
};

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef,title)
{
	return store.getLoader().internalizeTiddler(store,this,title,divRef);
};

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store,this);
};

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement,titles,template,unused1,unused2,animate,unused3)
{
	story.displayTiddlers(srcElement,titles,template,animate);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement,title,template,unused1,unused2,animate,unused3)
{
	story.displayTiddler(srcElement,title,template,animate);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n","mg");
var regexpBackSlash = new RegExp("\\\\","mg");
var regexpBackSlashEss = new RegExp("\\\\s","mg");
var regexpNewLine = new RegExp("\n","mg");
var regexpCarriageReturn = new RegExp("\r","mg");

//--
//-- Deprecated FileAdaptor functions
//--

FileAdaptor.loadTiddlyWikiCallback = function(status,context,responseText,url,xhr)
{
	context.status = status;
	if(!status) {
		context.statusText = "Error reading file";
	} else {
		context.adaptor.store = new TiddlyWiki();
		if(!context.adaptor.store.importTiddlyWiki(responseText)) {
			context.statusText = config.messages.invalidFileError.format([url]);
			context.status = false;
		}
	}
	context.complete(context,context.userParams);
};

//--
//-- Deprecated HTTP request code
//-- Use the jQuery ajax functions directly instead
//--

function loadRemoteFile(url,callback,params)
{
	return httpReq("GET",url,callback,params);
}

function doHttp(type,url,data,contentType,username,password,callback,params,headers,allowCache)
{
	return httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache);
}

//--
//-- Deprecated String functions
//--

// @Deprecated: no direct replacement, since not used in core code
String.prototype.toJSONString = function()
{
	// Convert a string to it's JSON representation by encoding control characters, double quotes and backslash. See json.org
	var m = {
		'\b': '\\b',
		'\f': '\\f',
		'\n': '\\n',
		'\r': '\\r',
		'\t': '\\t',
		'"' : '\\"',
		'\\': '\\\\'
		};
	var replaceFn = function(a,b) {
		var c = m[b];
		if(c)
			return c;
		c = b.charCodeAt();
		return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
		};
	if(/["\\\x00-\x1f]/.test(this))
		return '"' + this.replace(/([\x00-\x1f\\"])/g,replaceFn) + '"';
	return '"' + this + '"';
};

//--
//-- Deprecated Tiddler code
//--

// @Deprecated: Use tiddlerToRssItem(tiddler,uri) instead
Tiddler.prototype.toRssItem = function(uri)
{
	return tiddlerToRssItem(this,uri);
};

// @Deprecated: Use "<item>\n" + tiddlerToRssItem(tiddler,uri)  + "\n</item>" instead
Tiddler.prototype.saveToRss = function(uri)
{
	return "<item>\n" + tiddlerToRssItem(this,uri) + "\n</item>";
};

// @Deprecated: Use jQuery.encoding.digests.hexSha1Str instead
Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
};

//--
//-- Deprecated Number functions
//--

// @Deprecated: no direct replacement, since not used in core code
// Clamp a number to a range
Number.prototype.clamp = function(min,max)
{
	var c = this;
	if(c < min)
		c = min;
	if(c > max)
		c = max;
	return Number(c);
};

//--
//-- Deprecated utility functions
//-- Use the jQuery functions directly instead
//--

// Remove all children of a node
function removeChildren(e)
{
	jQuery(e).empty();
}

// Remove a node and all it's children
function removeNode(e)
{
	jQuery(e).remove();
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	return jQuery(e).text();
}

function addClass(e,className)
{
	jQuery(e).addClass(className);
}

function removeClass(e,className)
{
	jQuery(e).removeClass(className);
}

function hasClass(e,className)
{
	return jQuery(e).hasClass(className);
}

//--
//-- Deprecated Wikifier code
//--

function wikifyPlain(title,theStore,limit)
{
	if(!theStore)
		theStore = store;
	if(theStore.tiddlerExists(title) || theStore.isShadowTiddler(title)) {
		return wikifyPlainText(theStore.getTiddlerText(title),limit,tiddler);
	} else {
		return "";
	}
}

//]]>
</script>
<script id="jslibArea" type="text/javascript">
//<![CDATA[
/*! jQuery v1.6.4 http://jquery.com/ | http://jquery.org/license */
(function(a,b){function cu(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cr(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)}cg[a]=e}return cg[a]}function cq(a,b){var c={};f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a});return c}function cp(){cn=b}function co(){setTimeout(cp,0);return cn=f.now()}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bA.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)bY(a+"["+e+"]",b[e],c,d);else d(a,b)}function bX(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bW(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bP,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bW(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bW(a,c,d,e,"*",g));return l}function bV(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bL),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function by(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bt:bu;if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0});return d+"px"}d=bv(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)});return d+"px"}function bl(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bd,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bk(a){f.nodeName(a,"input")?bj(a):"getElementsByTagName"in a&&f.grep(a.getElementsByTagName("input"),bj)}function bj(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bi(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bh(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bg(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function bf(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function V(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(Q.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function U(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function M(a,b){return(a&&a!=="*"?a+".":"")+b.replace(y,"`").replace(z,"&")}function L(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(w,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function J(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function D(){return!0}function C(){return!1}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;B.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!B){B=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&K()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?"":H.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(!b)return-1;if(I)return I.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test("")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())});return e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;f.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g+"With"](this===b?d:this,[h])}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-1000px",top:"-1000px"});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!l(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i=f.expando,j=typeof c=="string",k=a.nodeType,l=k?f.cache:a,m=k?a[f.expando]:a[f.expando]&&f.expando;if((!m||e&&m&&l[m]&&!l[m][i])&&j&&d===b)return;m||(k?a[f.expando]=m=++f.uuid:m=f.expando),l[m]||(l[m]={},k||(l[m].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?l[m][i]=f.extend(l[m][i],c):l[m]=f.extend(l[m],c);g=l[m],e&&(g[i]||(g[i]={}),g=g[i]),d!==b&&(g[f.camelCase(c)]=d);if(c==="events"&&!g[c])return g[i]&&g[i].events;j?(h=g[c],h==null&&(h=g[f.camelCase(c)])):h=g;return h}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e=f.expando,g=a.nodeType,h=g?f.cache:a,i=g?a[f.expando]:f.expando;if(!h[i])return;if(b){d=c?h[i][e]:h[i];if(d){d[b]||(b=f.camelCase(b)),delete d[b];if(!l(d))return}}if(c){delete h[i][e];if(!l(h[i]))return}var j=h[i][e];f.support.deleteExpando||!h.setInterval?delete h[i]:h[i]=null,j?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=j):g&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");j[1]=j[1]?"."+j[1]:"";if(c===b){d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d));return d===b&&j[1]?this.data(j[0]):d}return this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);m();return d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u,v;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(o);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(o);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(n," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];if(c&&"get"in c&&(d=c.get(e,"value"))!==b)return d;d=e.value;return typeof d=="string"?d.replace(p,""):d==null?"":d}return b}var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}if(g&&!d.length&&e.length)return f(e[c]).val();return d},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);var h,i,j=g!==1||!f.isXMLDoc(a);j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=v:u&&(i=u)));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(i&&"set"in i&&j&&(h=i.set(a,d,c))!==b)return h;a.setAttribute(c,""+d);return d}if(i&&"get"in i&&j&&(h=i.get(a,c))!==null)return h;h=a.getAttribute(c);return h===null?b:h},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.attr(a,b,""),a.removeAttribute(b),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(u&&f.nodeName(a,"button"))return u.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(u&&f.nodeName(a,"button"))return u.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);i&&(c=f.propFix[c]||c,h=f.propHooks[c]);return d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==null?g:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabIndex=f.propHooks.tabIndex,v={get:function(a,c){var d;return f.prop(a,c)===!0||(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},f.support.getSetAttribute||(u=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var w=/\.(.*)$/,x=/^(?:textarea|input|select)$/i,y=/\./g,z=/ /g,A=/[^\w\s.|`]/g,B=function(a){return a.replace(A,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=C;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=C);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),B).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete 
t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if(!!e&&!f.event.customEvent[h]||!!f.event.global[h]){c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result}},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,M(a.origType,a.selector),f.extend({},a,{handler:L,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,M(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?D:C):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=D;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=D,this.stopPropagation()},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C};var E=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},F=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?F:E,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?F:E)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";(c==="submit"||c==="image")&&f(b).closest("form").length&&J("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&J("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var G,H=function(a){var b=f.nodeName(a,"input")?a.type:"",c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex);return c},I=function(c){var d=c.target,e,g;if(!!x.test(d.nodeName)&&!d.readOnly){e=f._data(d,"_change_data"),g=H(d),(c.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",g);if(e===b||g===e)return;if(e!=null||g)c.type="change",c.liveFired=b,f.event.trigger(c,arguments[1],d)}};f.event.special.change={filters:{focusout:I,beforedeactivate:I,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&I.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&I.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",H(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in G)f.event.add(this,c+".specialChange",G[c]);return x.test(this.nodeName)},teardown:function(a){f.event.remove(this,".specialChange");return x.test(this.nodeName)}},G=f.event.special.change.filters,G.focus=G.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){f(this).unbind(a,g);return e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var K={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)==="."){n.unbind(g);return this}if(d===!1||f.isFunction(d))e=d||C,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=w.exec(h),k="",j&&(k=j[0],h=h.replace(w,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,K[h]?(a.push(K[h]+k),h=h+k):h=(K[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+M(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+M(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);o&&(k(o,h,f,g),k.uniqueSort(f));return f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b){g=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var N=/Until$/,O=/^(?:parents|prevUntil|prevAll)/,P=/,/,Q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,S=f.expr.match.POS,T={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(V(this,a,!1),"not",a)},filter:function(a){return this.pushStack(V(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=S.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=S.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(U(c[0])||U(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=R.call(arguments);N.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!T[a]?f.unique(e):e,(this.length>1||P.test(d))&&O.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|object|embed|option|style)/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,bc=/\/(java|ecma)script/i,bd=/^\s*<!(?:\[CDATA\[|\-\-)/,be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};be.optgroup=be.option,be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,f.support.htmlSerialize||(be._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!be[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bb.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bf(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bl)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!ba.test(a[0])&&(f.support.checkClone||!bb.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean
(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bh(a,d),e=bi(a),g=bi(d);for(h=0;e[h];++h)g[h]&&bh(e[h],g[h])}if(b){bg(a,d);if(c){e=bi(a),g=bi(d);for(h=0;e[h];++h)bg(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=be[l]||be._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bk(k[i]);else bk(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bc.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bm=/alpha\([^)]*\)/i,bn=/opacity=([^)]*)/,bo=/([A-Z]|^ms)/g,bp=/^-?\d+(?:px)?$/i,bq=/^-?\d/,br=/^([\-+])=([\-+.\de]+)/,bs={position:"absolute",visibility:"hidden",display:"block"},bt=["Left","Right"],bu=["Top","Bottom"],bv,bw,bx;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bv(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=br.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bv)return bv(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return by(a,b,d);f.swap(a,bs,function(){e=by(a,b,d)});return e}},set:function(a,b){if(!bp.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bn.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bm,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bm.test(g)?g.replace(bm,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bv(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bw=function(a,c){var d,e,g;c=c.replace(bo,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bx=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;!bp.test(d)&&bq.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));return d===""?"auto":d}),bv=bw||bx,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bz=/%20/g,bA=/\[\]$/,bB=/\r?\n/g,bC=/#.*$/,bD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bE=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bF=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bG=/^(?:GET|HEAD)$/,bH=/^\/\//,bI=/\?/,bJ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bK=/^(?:select|textarea)/i,bL=/\s+/,bM=/([?&])_=[^&]*/,bN=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bO=f.fn.load,bP={},bQ={},bR,bS,bT=["*/"]+["*"];try{bR=e.href}catch(bU){bR=c.createElement("a"),bR.href="",bR=bR.href}bS=bN.exec(bR.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bO)return bO.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bJ,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bK.test(this.nodeName)||bE.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bB,"\r\n")}}):{name:b.name,value:c.replace(bB,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?bX(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),bX(a,b);return a},ajaxSettings:{url:bR,isLocal:bF.test(bS[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bT},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bV(bP),ajaxTransport:bV(bQ),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?bZ(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=b$(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bD.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bC,"").replace(bH,bS[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bL),d.crossDomain==null&&(r=bN.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bS[1]&&r[2]==bS[2]&&(r[3]||(r[1]==="http:"?80:443))==(bS[3]||(bS[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bW(bP,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bG.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bI.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bM,"$1_="+x);d.url=y+(y===d.url?(bI.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bT+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bW(bQ,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){s<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join("&").replace(bz,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cq("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cr(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cq("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cq("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cr(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0})},stop:function(a,b){a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue();return this}}),f.each({slideDown:cq("show",1),slideUp:cq("hide",1),slideToggle:cq("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function g(a){return d.step(a)}var d=this,e=f.fx;this.startTime=cn||co(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&&f.timers.push(g)&&!cl&&(cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||co(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cs=/^t(?:able|d|h)$/i,ct=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cu(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!cs.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=ct.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!ct.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cu(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cu(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(f.css(a,d,"padding")):null},f.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNaN(j)?i:j}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window);
//]]>
</script>
<script id="jqueryArea" type="text/javascript">
//<![CDATA[
/*
jQuery.encoding.digests.sha1.js

SHA-1 digest and associated utility functions

Copyright (c) UnaMesa Association 2009

Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

if(!$.encoding)
	$.encoding = {};
	$.extend($.encoding,{
		strToBe32s: function(str) {
			// Convert a string to an array of big-endian 32-bit words
			var be=[];
			var len=Math.floor(str.length/4);
			var i, j;
			for(i=0, j=0; i<len; i++, j+=4) {
				be[i]=((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
			}
			while(j<str.length) {
				be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
				j++;
			}
			return be;
		},
		be32sToStr: function(be) {
			// Convert an array of big-endian 32-bit words to a string
			var str='';
			for(var i=0;i<be.length*32;i+=8) {
				str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
			}
			return str;
		},
		be32sToHex: function(be) {
			// Convert an array of big-endian 32-bit words to a hex string
			var hex='0123456789ABCDEF';
			var str='';
			for(var i=0;i<be.length*4;i++) {
				str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
			}
			return str;
		}
	});
})(jQuery);


(function($) {

if(!$.encoding.digests)
	$.encoding.digests = {};
	$.extend($.encoding.digests,{
		hexSha1Str: function(str) {
			// Return, in hex, the SHA-1 hash of a string
			return $.encoding.be32sToHex($.encoding.digests.sha1Str(str));
		},
		sha1Str: function(str) {
			// Return the SHA-1 hash of a string
			return sha1($.encoding.strToBe32s(str),str.length);
		},
		sha1: function(x,blen) {
			// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
			return sha1($.encoding.strToBe32s(str),str.length);
		}
	});

	// Private functions.
	function sha1(x,blen) {
		// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
		function add32(a,b) {
			// Add 32-bit integers, wrapping at 32 bits
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			var lsw=(a&0xFFFF)+(b&0xFFFF);
			var msw=(a>>16)+(b>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function AA(a,b,c,d,e) {
			// Cryptographic round helper function. Add five 32-bit integers, wrapping at 32 bits, second parameter is rotated left 5 bits before the addition
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			b=(b>>>27)|(b<<5);
			var lsw=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
			var msw=(a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function RR(w,j) {
			// Cryptographic round helper function.
			var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];
			return (n>>>31)|(n<<1);
		}

		var len=blen*8;
		x[len>>5] |= 0x80 << (24-len%32);
		x[((len+64>>9)<<4)+15]=len;
		var w=new Array(80);

		var k1=0x5A827999;
		var k2=0x6ED9EBA1;
		var k3=0x8F1BBCDC;
		var k4=0xCA62C1D6;

		var h0=0x67452301;
		var h1=0xEFCDAB89;
		var h2=0x98BADCFE;
		var h3=0x10325476;
		var h4=0xC3D2E1F0;

		for(var i=0;i<x.length;i+=16) {
			var j=0;
			var t;
			var a=h0;
			var b=h1;
			var c=h2;
			var d=h3;
			var e=h4;
			while(j<16) {
				w[j]=x[i+j];
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<20) {
				w[j]=RR(w,j);
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<40) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k2);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<60) {
				w[j]=RR(w,j);
				t=AA(e,a,(b&c)|(d&(b|c)),w[j],k3);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<80) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k4);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			h0=add32(h0,a);
			h1=add32(h1,b);
			h2=add32(h2,c);
			h3=add32(h3,d);
			h4=add32(h4,e);
		}
		return [h0,h1,h2,h3,h4];
	}
})(jQuery);
/*
jQuery.twStylesheet.js

jQuery plugin to dynamically insert CSS rules into a document

Usage:
  jQuery.twStylesheet applies style definitions
  jQuery.twStylesheet.remove neutralizes style definitions

Copyright (c) UnaMesa Association 2009

Triple licensed under the BSD, MIT and GPL licenses:
  http://www.opensource.org/licenses/bsd-license.php
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

var defaultId = "customStyleSheet"; // XXX: rename to dynamicStyleSheet?

// Add or replace a style sheet
// css argument is a string of CSS rule sets
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
// N.B.: Uses DOM methods instead of jQuery to ensure cross-browser comaptibility.
$.twStylesheet = function(css, options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(doc.createStyleSheet) { // IE-specific handling
		if(el) {
			el.parentNode.removeChild(el);
		}
		doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd",
			'&nbsp;<style id="' + id + '" type="text/css">' + css + '</style>'); // fails without &nbsp;
	} else { // modern browsers
		if(el) {
			el.replaceChild(doc.createTextNode(css), el.firstChild);
		} else {
			el = doc.createElement("style");
			el.type = "text/css";
			el.id = id;
			el.appendChild(doc.createTextNode(css));
			doc.getElementsByTagName("head")[0].appendChild(el);
		}
	}
};

// Remove existing style sheet
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
$.twStylesheet.remove = function(options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(el) {
		el.parentNode.removeChild(el);
	}
};

})(jQuery);
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
if(useJavaSaver)
	document.write("<applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>");
//]]>
</script>
<!--POST-SCRIPT-START-->

<!--POST-SCRIPT-END-->
</body>
</html>
